(function(){dorado.widget={};dorado.widget.Component=$extend([dorado.AttributeSupport,dorado.EventSupport],{$className:"dorado.widget.Component",ATTRIBUTES:{id:{readOnly:true},ready:{readOnly:true},destroyed:{readOnly:true},parent:{readOnly:true},view:{setter:function(b,d){if(this._view==d){return}if(this._view){this._view.unregisterComponent(this._id)}if(d){d.registerComponent(this._id,this)}this._view=d}},dataTypeRepository:{readOnly:true,getter:function(){var b=this.get("view")||dorado.widget.View.TOP;return b.get("dataTypeRepository")}},userData:{skipRefresh:true}},EVENTS:{onCreate:{},onDestroy:{},onReady:{}},constructor:function(b){var d;if(b&&b.constructor==String){d=b;b=null}else{if(b){d=b.id;delete b.id}}this._uniqueId=dorado.Core.newId();dorado.widget.Component.ALL[this._uniqueId]=this;this._id=d?d:this._uniqueId;$invokeSuper.call(this,arguments);if(b){this.set(b)}if(dorado.widget.View.TOP){dorado.widget.View.TOP.addChild(this)}this.fireEvent("onCreate",this)},doSet:function(d,k){function b(i,l){if(!i){return i
}if(!(i instanceof dorado.widget.Component)&&typeof i=="object"){i=dorado.Toolkits.createInstance("widget",i,function(){return l?dorado.Toolkits.getPrototype("widget",l):null})}return i}var j=this.ATTRIBUTES[d];if(j){if(this._ready&&j.writeBeforeReady){throw new dorado.ResourceException("dorado.widget.AttributeWriteBeforeReady",d)}if(j.componentReference){var e=null,h=false;if(k){if(k instanceof Array){if(k.length>0){e=[],h=true;for(var f=0;f<k.length;f++){e[f]=dorado.widget.Component.getComponentReference(this,d,k[f]);if(!(e[f] instanceof dorado.widget.Component)){h=false}}}}else{e=dorado.widget.Component.getComponentReference(this,d,k);h=(e instanceof dorado.widget.Component)}}$invokeSuper.call(this,[d,(h?e:null)]);return}else{if(j.innerComponent!=null){if(k){if(k instanceof Array){var g=[];for(var f=0;f<k.length;f++){g.push(b(k[f],j.innerComponent))}k=g}else{k=b(k,j.innerComponent)}}}}}$invokeSuper.call(this,arguments)},onReady:function(){if(this._ready){return}this._ready=true;this.fireEvent("onReady",this)
},destroy:function(){if(this._destroyed){return}this._destroyed=true;this.fireEvent("onDestroy",this);delete dorado.widget.Component.ALL[this._uniqueId]},getListenerScope:function(){return this.get("view")||dorado.widget.View.TOP}});dorado.widget.Component.getComponentReference=function(e,f,k){if(!k){return k}if(k instanceof dorado.widget.Component){return k}else{var h;if(typeof k=="string"){h=dorado.widget.View.TOP.id(k);if(h){return h}k={view:dorado.widget.View.TOP,component:k}}else{if(typeof k=="object"&&k.$type){return dorado.Toolkits.createInstance("widget",k)}}var i=k.view,g=k.component;h=i.id(g);if(h){return h}var d=i._wantedComponents;if(!d){i._wantedComponents=d={count:0};i.addListener("onComponentRegistered",a)}var j=d[g];if(!j){d[g]=j=[];d.count++}j.push({object:e,attribute:f});var l="_"+f+"_id";if(!e[l]){e[l]=g}else{var b=e[l];if(typeof b=="string"){e[l]=b=[e[l]]}b.push(g)}return g}};function a(n,q){var e=n._wantedComponents;var o=e[q.component._id];if(o){var m=q.component;delete e[m._id];
e.count--;if(e.count==0){n.removeListener("onComponentRegistered",a);delete n._wantedComponent}for(var h=0;h<o.length;h++){var k=o[h],f=k.object,d=k.attribute;var b=f["_"+d+"_id"];if(b){if(typeof b=="string"){if(b==m._id){f.set(d,m)}}else{var l=b.indexOf(m._id);if(l>=0){b[l]=m;var p=true;for(var g=0;g<b.length;g++){if(typeof b[g]=="string"){p=false;break}}if(p){f.set(d,b)}}}}}}}dorado.widget.Component.ALL={};dorado.Toolkits.registerTypeTranslator("widget",function(b){return dorado.util.Common.getClassType("dorado.widget."+b,true)})})();(function(){dorado.widget.DataSet=$extend(dorado.widget.Component,{$className:"dorado.widget.DataSet",ATTRIBUTES:{loadMode:{writeBeforeReady:true},dataType:{getter:function(){return this.getDataType()}},data:{getter:function(){return this.getData()},setter:function(b,d){if(this._ready){this.setData(d)}else{this._data=d}}},dataProvider:{setter:function(b,d){this["_"+b]=(d&&d.constructor===String)?dorado.DataProvider.create(d):d}},parameter:{},pageSize:{defaultValue:0},pageNo:{defaultValue:1},dataLoaded:{readOnly:true},readOnly:{}},EVENTS:{onDataLoad:{}},_disableObserversCounter:0,constructor:function(b){this._dataPathCache={};
this._observers=[];$invokeSuper.call(this,arguments)},onReady:function(){$invokeSuper.call(this,arguments);if(this._observers.length>0){for(var b=0;b<this._observers;b++){this.retrievePreloadConfig(this._observers[b])}if(this._data){this.setData(this._data)}else{this.sendMessage(0)}}if(this._loadMode=="onReady"){if(this._view){this._view._loadingDataSet.push(this)}this.getDataAsync()}},setData:function(e){var b=this.getDataType(null,true);if(b||this._getDataCalled){if(e!=null){if(!(e instanceof dorado.EntityList||e instanceof dorado.Entity)){e=dorado.DataUtil.convert(e,this.getDataTypeRepository(),b)}}if(this._data&&(this._data instanceof dorado.EntityList||this._data instanceof dorado.Entity)){this._data._setObserver(null)}if(e){if(e.dataType==null){e.dataType=b}else{if(b&&b!=e.dataType){var d=true;if(b instanceof dorado.EntityDataType&&e.dataType){d=(e.dataType.getElementDataType()!=b)}if(d){throw new dorado.ResourceException("dorado.widget.DataTypeNotAccording",this._id)}}}}this._data=e;
this._dataLoaded=true}else{this._data=e}if(e&&(e instanceof dorado.EntityList||e instanceof dorado.Entity)){e._setObserver(this);this._dataPathCache={};this.sendMessage(0);this.fireEvent("onDataLoad",this)}},doLoad:function(e){var d=this._data;if(d===undefined){if(this._dataProvider){d=this.dataPipe;if(!d){d=this.dataPipe=new dorado.DataSetDataPipe(this)}}}if(d instanceof dorado.DataPipe){var b=d;if(e){b.getAsync({scope:this,callback:function(g,f){if(g){this.setData(f)}$callback(e,g)}});return}else{if(b.runningProcNum>0){throw new dorado.ResourceException("dorado.widget.GetDataDuringLoading",this._id)}this.setData(d=b.get())}}else{if(e){$callback(e,true)}}},load:function(){return this.doLoad()},loadAsync:function(b){this.doLoad(b||dorado._NULL_FUNCTION)},doGetData:function(i,e,j){function d(p,k,q){var o=this._data;if(o){if(!(o instanceof dorado.EntityList||o instanceof dorado.Entity)){this.setData(o);o=this._data}var m;if(p){m=dorado.DataPath.create(p)}var l=(p||"$EMPTY")+"~"+h;var n=this._dataPathCache[l];
if(n!==undefined){return n}if(o&&m){o=m.evaluate(o,k)}this._dataPathCache[l]=o}return o}if(typeof e=="string"){e={loadMode:e}}else{e=e||{}}if(e.flush){this.clear()}var h,b=e.loadMode||"always";h=b;if(e.firstResultOnly){h+="F"}if(e.acceptAggregation){h+="A"}this._getDataCalled=true;if(this._data===undefined&&b!="never"){if(this._preloadConfigsMap){var g=this._preloadConfigsMap[i||"#EMPTY"];if(g){dorado.DataProvider._SYS_PARAMETER={preloadConfigs:g}}}if(j){this.doLoad({scope:this,callback:function(l,k){if(l){k=d.call(this,i,e)}$callback(j,l,k)}});return}else{if(b=="auto"){this.doLoad(dorado._NULL_FUNCTION);return}else{this.doLoad()}}dorado.DataProvider._SYS_PARAMETER=null}var f=d.call(this,i,e);if(j){$callback(j,true,f)}else{return f}},getData:function(d,b){b=b||{};if(b.firstResultOnly==null){b.firstResultOnly=true}if(b.acceptAggregation==null){b.acceptAggregation=true}return this.doGetData(d,b)},getDataAsync:function(d,e,b){b=b||{};if(b.firstResultOnly==null){b.firstResultOnly=true}if(b.acceptAggregation==null){b.acceptAggregation=true
}this.doGetData(d,b,e||dorado._NULL_FUNCTION)},queryData:function(d,b){return this.doGetData(d,b)},queryDataAsync:function(d,e,b){this.doGetData(d,b,e||dorado._NULL_FUNCTION)},flush:function(){this.getData(null,{flush:true})},flushAsync:function(){this.getDataAsync(null,null,{flush:true})},getDataTypeRepository:function(){return this._view?this._view._dataTypeRepository:null},getDataType:function(f,e){var d;if(typeof e=="string"){d=e}else{d=e?e.loadMode:undefined}var b=dorado.LazyLoadDataType.dataTypeGetter.call(this,d);if(!b&&this._data){b=this._data.dataType}if(b){return dorado.DataPath.create(f).getDataType(b,e)}else{return null}},clear:function(){delete this._data},retrievePreloadConfig:function(d){if(dorado.widget.DataTree&&dorado.Object.isInstanceOf(d,dorado.widget.DataTree)){var g=d.get("bindingConfigs");if(g){var b=this._preloadConfigsMap,f=d._dataPath||"#EMPTY";if(!b){this._preloadConfigsMap=b={}}var j=b[f]||[];for(var e=0;e<g.length;e++){var h=dorado.widget.DataTree.bindingConfigToPreloadConfig(g[e]);
if(h){j=j.concat(h)}}if(j.length){b[f]=j}}}},addObserver:function(b){this._observers.push(b);if(this._ready){this.retrievePreloadConfig(b);b.dataSetMessageReceived(this,a.MESSAGE_REFRESH)}},removeObserver:function(b){this._observers.remove(b)},entityMessageReceived:function(d,b){this._dataPathCache={};if(this._ready){this.sendMessage(d,b)}},disableObservers:dorado.Entity.prototype.disableObservers,enableObservers:dorado.Entity.prototype.enableObservers,notifyObservers:function(){this._dataPathCache={};this.sendMessage(0)},sendMessage:function(f,d){if(this._disableObserversCounter>0){return}var g=this._observers;for(var e=0;e<g.length;e++){var b=g[e];b.dataSetMessageReceived.call(b,f,d)}}});dorado.DataSetDataPipe=$extend(dorado.DataProviderPipe,{$className:"dorado.DataSetDataPipe",constructor:function(b){this.dataSet=b;this.dataType=b._dataType;this.dataTypeRepository=b.get("dataTypeRepository");this.view=b.get("view")},getDataProviderArg:function(){var b=dorado.$this=this.dataSet._parameter;
return{pageSize:this.dataSet._pageSize,pageNo:this.dataSet._pageNo,parameter:dorado.JSON.evaluate(b),dataType:this.dataType,view:this.view}},getDataProvider:function(){return this.dataSet._dataProvider}});var a=dorado.widget.DataSet;a.MESSAGE_REFRESH=0;a.MESSAGE_DATA_CHANGED=dorado.Entity._MESSAGE_DATA_CHANGED;a.MESSAGE_ENTITY_STATE_CHANGED=dorado.Entity._MESSAGE_ENTITY_STATE_CHANGED;a.MESSAGE_DELETED=dorado.EntityList._MESSAGE_DELETED;a.MESSAGE_INSERTED=dorado.EntityList._MESSAGE_INSERTED;a.MESSAGE_CURRENT_CHANGED=dorado.EntityList._MESSAGE_CURRENT_CHANGED;a.MESSAGE_REFRESH_ENTITY=dorado.EntityList._MESSAGE_REFRESH_ENTITY;dorado.widget.DataSetObserver=$class({$className:"dorado.widget.DataSetObserver",dataSetMessageReceived:function(d,b){}})})();(function(){var a,f=0;dorado.widget.Control=$extend([dorado.widget.Component,dorado.RenderableElement,dorado.Draggable,dorado.Droppable],{$className:"dorado.widget.Control",_ignoreRefresh:1,renderUtilAttached:true,focusable:false,selectable:true,ATTRIBUTES:{width:{setter:function(i,h){this._width=isFinite(h)?parseInt(h):h;
delete this._realWidth;this._fixedWidth=!(typeof h=="string"&&h.match("%"))}},height:{setter:function(i,h){this._height=isFinite(h)?parseInt(h):h;delete this._realHeight;this._fixedHeight=!(typeof h=="string"&&h.match("%"))}},renderTo:{writeOnce:true,writeBeforeReady:true},renderOn:{writeOnce:true,writeBeforeReady:true},visible:{defaultValue:true},hideMode:{defaultValue:"visibility",writeBeforeReady:true},attached:{readOnly:true},focused:{readOnly:true},focusParent:{skipRefresh:true,readOnly:true,getter:function(){return this._focusParent||this._parent}},tip:{},layoutConstraint:{setter:function(i,h){this._layoutConstraint=h;if(this._rendered&&this._parent&&this._parent._layout){this._parent._layout.refreshControl(this)}}},view:{skipRefresh:true,setter:function(h,i){if(this._view==i){return}$invokeSuper.call(this,arguments);if(this._innerControls){jQuery.each(this._innerControls,function(j,k){if(this._view){k.set("view",null)}k.set("view",i)})}}}},EVENTS:{onCreateDom:{},onClick:{},onDoubleClick:{},onMouseDown:{},onMouseUp:{},onContextMenu:{},onFocus:{},onBlur:{},onKeyDown:{},onKeyPress:{}},constructor:function(i){$invokeSuper.call(this,arguments);
var j=this._renderTo,h=this._renderOn;if(j||h){$setTimeout(this,function(){var k=j||h;if(typeof k=="string"){k=jQuery(k)[0]}if(k&&k.nodeType){(j)?this.render(k):this.replace(k)}},0)}},onReady:function(){if(this._innerControls){jQuery.each(this._innerControls,function(h,j){if(!(j instanceof dorado.widget.Control)&&!j._ready){j.onReady()}})}$invokeSuper.call(this,arguments)},destroy:function(){if(this._innerControls){jQuery.each(this._innerControls.slice(0,-1),function(k,l){if(!l._destroyed){l.destroy()}});delete this._innerControls}var j=(window.closed||dorado.windowClosed);if(!j&&this._parent){if(this._isInnerControl){this._parent.unregisterInnerControl(this)}else{this._parent.removeChild(this)}}var i=this._dom;if(i){try{i.doradoUniqueId=null}catch(h){}if(!j){$fly(i).remove()}}$invokeSuper.call(this,arguments)},doSet:function(h,j){$invokeSuper.call(this,arguments);if(!this._rendered){return}var i=this.ATTRIBUTES[h];if((this._visible||h=="visible")&&this._ignoreRefresh<1&&i&&!i.skipRefresh){dorado.Toolkits.setDelayedAction(this,"$refreshDelayTimerId",this.refresh,50)
}},assignDom:function(h){h.style.display="";this._dom=h},refresh:function(h){if(this._duringRefreshDom||!this._rendered||(!this._attached&&this.renderUtilAttached)){return}if(h){dorado.Toolkits.setDelayedAction(this,"$refreshDelayTimerId",function(){this._duringRefreshDom=true;try{dorado.Toolkits.cancelDelayedAction(this,"$refreshDelayTimerId");this.refreshDom(this.getDom())}finally{this._duringRefreshDom=false}},50)}else{this._duringRefreshDom=true;try{dorado.Toolkits.cancelDelayedAction(this,"$refreshDelayTimerId");this.refreshDom(this.getDom())}finally{this._duringRefreshDom=false}}},refreshDom:function(i){if(!this.selectable){$DomUtils.disableUserSelection(i)}try{i.doradoUniqueId=this._uniqueId;if(this._currentVisible!==undefined){if(this._currentVisible!=this._visible){if(this._hideMode=="layout"){if(this._visible){this.set("layoutConstraint",this._oldLayoutConstraint)}else{this._oldLayoutConstraint=this._layoutConstraint;this.set("layoutConstraint",dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT)
}}else{i.style.visibility=(this._visible)?"":"hidden"}}}else{if(!this._visible){if(this._hideMode=="layout"){this._oldLayoutConstraint=this._layoutConstraint}else{i.style.visibility="hidden"}}}if(this._tip){this._currentTip=this._tip;dorado.TipManager.initTip(i,{text:this._tip})}else{if(this._currentTip){dorado.TipManager.deleteTip(i)}}}catch(h){}this.applyDraggable(i);this.applyDroppable(i);$invokeSuper.call(this,arguments);this._currentVisible=!!this._visible},resetDimension:function(){if(this._skipResetDimension){return}var h=$invokeSuper.call(this,arguments)||!this._fixedWidth||!this._fixedHeight;if((h||!this._currentVisible)&&this.onResize&&this._visible){this._skipResetDimension=true;this.onResize();this._skipResetDimension=false}return h},notifySizeChange:function(){if(!this._parent||!this._rendered){return}var h=this._parent._layout;if(h&&h._attached&&h.onControlSizeChange){dorado.Toolkits.setDelayedAction(this,"$notifySizeChangeTimerId",function(){h.onControlSizeChange(this)},200)
}},getDom:function(){if(!this._dom){var i=this._dom=this.createDom();var h=this;$fly(i).click(function(j){if(!h.processDefaultMouseListener()){return}if(h.onClick){if(h.onClick(j)===false){return false}}return h.fireEvent("onClick",h,{button:j.button,event:j})}).bind("dblclick",function(j){if(!h.processDefaultMouseListener()){return}if(h.onDoubleClick){if(h.onDoubleClick(j)===false){return false}}return h.fireEvent("onDoubleClick",h,{button:j.button,event:j})}).mousedown(function(j){if(j.srcElement!=a||(new Date()-f)>500){dorado.widget.setFocusedControl(h);a=j.srcElement;f=new Date()}if(!h.processDefaultMouseListener()){return}if(h.onMouseDown){if(h.onMouseDown(j)===false){return false}}return h.fireEvent("onMouseDown",h,{button:j.button,event:j})}).mouseup(function(j){if(!h.processDefaultMouseListener()){return}if(h.onMouseUp){if(h.onMouseUp(j)===false){return false}}return h.fireEvent("onMouseUp",h,{button:j.button,event:j})}).bind("contextmenu",function(j){j=jQuery.event.fix(j||window.event);
var k={event:j,processDefault:true};if(h.getListenerCount("onContextMenu")){k.processDefault=false;h.fireEvent("onContextMenu",h,k)}if(!k.processDefault){j.preventDefault();j.returnValue=false;return false}});if(this.focusable){i.tabIndex=1}this.fireEvent("onCreateDom",this,{dom:i})}return this._dom},processDefaultMouseListener:function(){return !this._disabled},doRenderToOrReplace:function(k,j,i){var n=this._renderTo||this._renderOn;$invokeSuper.call(this,arguments);var o=this._dom;if(!o){return}var l=false;if(!n&&this._parent&&this._parent!=dorado.widget.View.TOP){l=this._parent._attached}else{var h=o.ownerDocument.body;var m=o.parentNode;while(m){if(m==h){l=true;break}m=m.parentNode}}if(l){this.onAttachToDocument()}else{if(this._attached){this.onDetachFromDocument()}}if(!this._ready){this.onReady()}},onAttachToDocument:function(){if(this._rendered&&!this._attached){var h=this.getDom();this._attached=true;this._ignoreRefresh--;if(this.renderUtilAttached){this.refreshDom(h)}if(this.doOnAttachToDocument){this.doOnAttachToDocument()
}if(this._innerControls){jQuery.each(this._innerControls,function(j,k){k.onAttachToDocument()})}}},onDetachFromDocument:function(){if(this._rendered&&this._attached){this._attached=false;this._ignoreRefresh++;if(this.doOnDetachFromDocument){this.doOnDetachFromDocument()}if(this._innerControls){jQuery.each(this._innerControls,function(h,j){j.onDetachFromDocument()})}}},registerInnerControl:function(h){if(!this._innerControls){this._innerControls=[]}this._innerControls.push(h);if(this._attached){h.onAttachToDocument()}h._isInnerControl=true;h._parent=h._focusParent=this;h.set("view",(this instanceof dorado.widget.View)?this:this.get("view"))},unregisterInnerControl:function(h){if(!this._innerControls){return}h.onDetachFromDocument();this._innerControls.remove(h);h._parent=h._focusParent=null;h.set("view",null);delete h._isInnerControl},findParent:function(h){var i=this._parent;while(i){if(i instanceof h){return i}i=i._parent}return null},setFocus:function(){var h=this._dom;if(h){setTimeout(function(){try{h.focus()
}catch(i){}},0)}},isFocusable:function(h){if(!this.focusable||!this._rendered||!this.getDom()||this._disabled){return false}if(h){var i=this._parent;while(i){if(!i._rendered){break}if(i.isChildrenFocusable&&!i.isChildrenFocusable(false)){return false}i=i._parent}}var j=this.getDom();return !j.disabled&&j.offsetWidth>0},onFocus:function(){this._focused=true;if(this.doOnFocus){this.doOnFocus()}if(this._className){$fly(this.getDom()).addClass(this._className+"-focused")}this.fireEvent("onFocus",this)},onBlur:function(){this._focused=false;if(this.doOnBlur){this.doOnBlur()}$fly(this.getDom()).removeClass(this._className+"-focused");this.fireEvent("onBlur",this)},onKeyDown:function(j){var i=true;if(this.getListenerCount("onKeyDown")){var h={keyCode:j.keyCode,shiftKey:j.shiftKey,ctrlKey:j.ctrlKey,altlKey:j.altlKey,event:j};this.fireEvent("onKeyDown",this,h);i=h.returnValue}if(!i){return i}var i=this.doOnKeyDown?this.doOnKeyDown(j):true;if(!i){return i}var k=this.get("focusParent");if(k&&dorado.widget.disableKeyBubble!=k){i=k.onKeyDown(j)
}return i},onKeyPress:function(j){var i=true;if(this.getListenerCount("onKeyPress")){var h={keyCode:j.keyCode,shiftKey:j.shiftKey,ctrlKey:j.ctrlKey,altlKey:j.altlKey,event:j};this.fireEvent("onKeyPress",this,h);i=h.returnValue}if(!i){return i}var i=this.doOnKeyPress?this.doOnKeyPress(j):true;if(!i){return i}var k=this.get("focusParent");if(k&&dorado.widget.disableKeyBubble!=k){i=k.onKeyDown(j)}return i},initDraggingInfo:function(h,i){$invokeSuper.call(this,arguments);h.set({object:this,sourceControl:this})},onDraggingSourceOver:function(h,i){h.set({targetObject:this,targetControl:this});return $invokeSuper.call(this,arguments)},onDraggingSourceOut:function(h,j){var i=$invokeSuper.call(this,arguments);h.set({targetObject:null,targetControl:null});return i}});dorado.widget.disableKeyBubble=false;dorado.widget.focusedControl=[];dorado.widget.onControlGainedFocus=function(m){if(dorado.widget.focusedControl&&dorado.widget.focusedControl.peek()==m){return}var k=dorado.widget.focusedControl;var h=[];
if(m){var p=m;while(p){h.push(p);var l=p.get("focusParent");if(!l){break}p=l}h=h.reverse()}var j=k.length-1;for(;j>=0;j--){var n=k[j];if(n==h[j]){break}if(n.onBlur){n.onBlur()}}dorado.widget.focusedControl=h;j++;for(;j<h.length;j++){if(h[j].onFocus){h[j].onFocus()}}};dorado.widget.onControlLostFocus=function(h){if(!h.get("focused")){return}do{h=h.get("focusParent")}while(h&&!h.isFocusable());dorado.widget.onControlGainedFocus(h)};dorado.widget.setFocusedControl=function(h){if(dorado.widget.focusedControl&&dorado.widget.focusedControl.peek()==h){return}while(h&&!h.isFocusable()){h=h.get("focusParent")}if(h){h.setFocus();dorado.widget.onControlGainedFocus(h)}else{if(document.body){document.body.focus()}dorado.widget.onControlGainedFocus(null)}};dorado.widget.getMainFocusedControl=function(){var h=dorado.widget.focusedControl;for(var j=h.length-1;j>=0;j--){if(!h[j]._focusParent){return h[j]}}return h[0]};dorado.widget.getFocusedControl=function(){var h=dorado.widget.focusedControl;return h.peek()
};dorado.widget.findFocusableControlInElement=function(h){function i(j){var k=j.firstChild,l=null;while(k){l=i(k);if(l){break}if(k.doradoUniqueId){c=dorado.widget.Component.ALL[k.doradoUniqueId];if(c&&c.isFocusable()){l=c;break}}k=k.nextSibling}return l}return i(h)};function g(j){var h=null;if(j instanceof dorado.widget.Container&&j.isChildrenFocusable()){var i=j._children.iterator();while(i.hasNext()){h=i.next();if(h instanceof dorado.widget.Control&&h.isFocusable()){h=g(h);if(h){break}}}}if(!h&&j.isFocusable()){h=j}return h}function d(k){var j=k._parent;if(j&&j._children){var i=j._children.iterator(k);while(i.hasNext()){var h=i.next();if(h instanceof dorado.widget.Control&&h.isFocusable()){h=g(h);if(h){return h}}}}return null}function b(j){var h=null;if(j instanceof dorado.widget.Container&&j.isChildrenFocusable()){var i=j._children.iterator();i.last();while(i.hasPrevious()){h=i.previous();if(h instanceof dorado.widget.Control&&h.isFocusable()){h=b(h);if(h){break}}}}if(!h&&j.isFocusable()){h=j
}return h}function e(k){var j=k._parent;if(j&&j._children){var i=j._children.iterator(k);while(i.hasPrevious()){var h=i.previous();if(h instanceof dorado.widget.Control&&h.isFocusable()){h=b(h);if(h){return h}}}}return null}dorado.widget.findNextFocusableControl=function(i){var j=i||dorado.widget.getMainFocusedControl();while(j){var h=d(j);if(h){return h}j=j._parent}return g(dorado.widget.View.TOP)};dorado.widget.findPreviousFocusableControl=function(i){var j=i||dorado.widget.getMainFocusedControl();while(j){var h=e(j);if(h){return h}j=j._parent}return b(dorado.widget.View.TOP)}})();dorado._queueObject={};dorado.queue=function(d,b){if(!d){return}var a=dorado._queueObject[d];if(!a){a=dorado._queueObject[d]=[]}a.push(b);if(!a.processing){dorado.dequeue(d)}};dorado.dequeue=function(d){if(!d){return true}var a=dorado._queueObject[d];if(a){if(a.length>0){a.processing=true;var b=a.shift();b.call(null,[])}else{a.processing=false}}};(function(){var b="_SHOWHIDE";dorado.widget.FloatControl=$class({$className:"dorado.widget.FloatControl",ATTRIBUTES:{floating:{defaultValue:true,setter:function(e,f){var g=this.getAttributeWatcher();
if(g.getWritingTimes("visible")==0){this._visible=!f}this._floating=f}},floatingClassName:{defaultValue:"d-floating"},visible:{defaultValue:false},animateType:{defaultValue:"zoom",skipRefresh:true},showAnimateType:{skipRefresh:true},hideAnimateType:{skipRefresh:true},animateTarget:{skipRefresh:true},left:{},top:{},center:{skipRefresh:true},anchorTarget:{skipRefresh:true},positionOffset:{skipRefresh:true},align:{skipRefresh:true},vAlign:{skipRefresh:true},autoAdjustPosition:{skipRefresh:true,defaultValue:true},handleOverflow:{skipRefresh:true,defaultValue:true},modal:{skipRefresh:true},modalType:{skipRefresh:true,defaultValue:"dark"},shadowMode:{defaultValue:"sides"},focusAfterShow:{defaultValue:true}},EVENTS:{beforeShow:{},onShow:{},beforeHide:{},onHide:{}},show:function(g){g=g||{};var k=this;var f=["autoAdjustPosition","handleOverflow","positionOffset","align","vAlign","handleOverflow","anchorTarget"];for(var h=0;h<f.length;h++){var e=f[h],j=g[e];if(j===undefined){g[e]=k["_"+e]}}dorado.queue(k._id+b,function(){g=g||{};
if(!k._rendered){var l=k._renderTo;if(l){if(l instanceof dorado.widget.Container){l=l.get("containerDom")}else{if(typeof l=="string"){l=jQuery(document.body).find(l)[0]}else{if(!l.nodeName){l=null}}}}var i=k._visible;k._visible=true;k.render(l);k._visible=i}if(k.doShow){k.doShow.apply(k,[g])}})},doShow:function(m){var i=this,h=i.getDom(),g=true,j=true;$fly(h).css({display:"",visibility:"hidden",left:-99999,top:-99999});var l={};i.fireEvent("beforeShow",i,l);if(l.processDefault===false){dorado.dequeue(i._id+b);return}if(i._visible){j=false}i._visible=true;var k=i.getShowPosition(m);m.position=k;m.animateTarget=i._animateTarget;if(j&&i._modal){dorado.ModalManager.show(h,dorado.widget.FloatControl.modalTypeClassName[i._modalType])}var f=m.animateType||i._showAnimateType||i._animateType;if(g&&f!="none"){i.fireEvent("onShow",i);var e=dorado.widget.FloatControl.behaviors[f];if(typeof e.show=="function"){e.show.apply(i,[m])}}else{$fly(h).css(k);i.fireEvent("onShow",i);i.doAfterShow.apply(i,[m])
}},doAfterShow:function(){var e=this,f=e.getDom();if(f){$fly(f).css({visibility:"",display:""}).bringToFront();if(e._shadowMode!="none"){$fly(f).shadow({mode:e._shadowMode||"sides"})}if(e.isFocusable()&&e._focusAfterShow){dorado.widget.setFocusedControl(e)}}dorado.dequeue(e._id+b)},getShowPosition:function(l){var g=this,h=l.anchorTarget,i=l.position,f=g.getDom(),e=l.event,j,m;if(h){if(h instanceof dorado.widget.Control){j=h._dom;g._focusParent=h}else{if(dorado.Object.isInstanceOf(h,dorado.RenderableElement)){j=h._dom}else{if(typeof h=="string"){j=jQuery(h)[0]}else{j=h}}}m=$DomUtils.dockAround(f,j,l)}else{if(i){m=$DomUtils.locateIn(f,l)}else{if(e){l.position={left:e.pageX,top:e.pageY};m=$DomUtils.locateIn(f,l)}else{if(g._center&&g._left==undefined&&g._top==undefined){var k={width:$fly(window).width(),height:$fly(window).height()};g._left=(k.width-$fly(f).width())/2+jQuery(window).scrollLeft();g._top=(k.height-$fly(f).height())/2+jQuery(window).scrollTop()}l.position={left:g._left||0,top:g._top||0};
m=$DomUtils.locateIn(f,l)}}}return m},hide:function(f){var g=this,e=arguments;if(!g._visible){dorado.dequeue(g._id+b);return}dorado.queue(g._id+b,function(){var h={};g.fireEvent("beforeHide",g,h);if(h.processDefault===false){dorado.dequeue(g._id+b);return}f=f||{};if(g.doHide){g.doHide.apply(g,e)}if(g._focused){dorado.widget.setFocusedControl(g._focusParent)}})},doHide:function(f){var h=this,i=h._dom;if(i){f=f||{};if(h._modal){dorado.ModalManager.hide(i)}h._visible=false;var e=f.animateType||h._hideAnimateType||h._animateType;f.animateTarget=h._animateTarget;if(e!="none"){var g=dorado.widget.FloatControl.behaviors[e];if(typeof g.hide=="function"){g.hide.apply(h,[f])}}else{if(h._shadowMode!="none"){$fly(h._dom)}h.doAfterHide()}}},doAfterHide:function(){var e=this,f=e._dom;e.fireEvent("onHide",e);$fly(f).css({visibility:"hidden",display:"none"});dorado.dequeue(e._id+b)}});var a=function(f,g){var i=this,l=f.align,k=f.vAlign,h=f.direction,j=i._dom;$fly(j).css("visibility","");if(!h&&(k&&l)){if(k.indexOf("inner")!=-1){h=l.indexOf("right")!=-1?"l2r":"r2l"
}else{h=k.indexOf("bottom")!=-1?"t2b":"b2t"}}h=h||"t2b";i._slideInDir=h;var e=f.position||{};$fly(j).css(e).bringToFront()[g?"safeSlideIn":"slideIn"]({duration:f.animateDuration||200,easing:f.animateEasing,direction:h,complete:function(){i.doAfterShow.apply(i,[f]);j.style.display=""}})};var d=function(e,f){var h=this,i=h._dom,g=h._slideInDir;switch(g){case"l2r":g="r2l";break;case"r2l":g="l2r";break;case"b2t":g="t2b";break;case"t2b":g="b2t";break}h._slideInDir=null;$fly(i)[f?"safeSlideOut":"slideOut"]({direction:g,duration:e.animateDuration||200,easing:e.animateEasing,complete:function(){h.doAfterHide.apply(h,arguments)}})};dorado.widget.FloatControl.modalTypeClassName={dark:"d-modal-mask",transparent:"d-modal-mask-transparent"};dorado.widget.FloatControl.behaviors={zoom:{show:function(e){var f=this,g=f._dom;$fly(g).zoomIn(jQuery.extend(e,{duration:e.animateDuration||200,easing:e.animateEasing,complete:function(){f.doAfterShow.apply(f,[e])}}))},hide:function(e){var f=this,g=f._dom;$fly(g).css("visibility","hidden").zoomOut(jQuery.extend(e,{duration:e.animateDuration||200,easing:e.animateEasing,complete:function(){f.doAfterHide.apply(f,arguments)
}}))}},slide:{show:function(e){a.apply(this,[e])},hide:function(e){d.apply(this,[e])}},safeSlide:{show:function(e){a.apply(this,[e,true])},hide:function(e){d.apply(this,[e,true])}},fade:{show:function(e){var f=this,g=f._dom;$fly(g).disableShadow().bringToFront().css({visibility:"",opacity:0}).animate({opacity:1},{duration:e.animateDuration||200,easing:e.animateEasing,complete:function(){$fly(g).css({opacity:""});f.doAfterShow.apply(f,[e]);$fly(g).enableShadow()}})},hide:function(e){var f=this,g=f._dom;$fly(g).disableShadow().animate({opacity:0},{duration:e.animateDuration||200,easing:e.animateEasing,complete:function(){$fly(g).css({opacity:""});f.doAfterHide.apply(f,arguments);$fly(g).enableShadow()}})}}}})();(function(){var a=true;dorado.widget.Container=$extend(dorado.widget.Control,{$className:"dorado.widget.Container",ATTRIBUTES:{className:{defaultValue:"d-container"},layout:{writeBeforeReady:true,setter:function(b,d){if(this._layout){this._layout.set("container",null)}if(d&&!(d instanceof dorado.widget.layout.Layout)){d=dorado.Toolkits.createInstance("layout",d,function(e){e=e||"Dock";
return dorado.util.Common.getClassType("dorado.widget.layout."+e+"Layout",true)})}this._layout=d;if(d){d.set("container",this)}},getter:function(){if(!this._rendered&&this._layout===undefined){this._ignoreRefresh++;try{this.createDefaultLayout()}finally{this._ignoreRefresh--}}return this._layout}},children:{setter:function(e,d){if(!d||d.length<1){return}for(var b=0;b<d.length;b++){var f=d[b];if(f instanceof dorado.widget.Component){this.addChild(f)}else{if(f.$type){this.addChild(dorado.Toolkits.createInstance("widget",f))}}}}},contentOverflow:{skipRefresh:true,defaultValue:"auto",setter:function(b,f){var d=this;if(d._rendered){var e=d.getContentContainer();if(e){e.style.overflow=f}}d._contentOverflow=f}},view:{setter:function(b,d){if(this._view==d){return}$invokeSuper.call(this,arguments);this._children.each(function(e){if(this._view){e.set("view",null)}e.set("view",d)},this)}},containerDom:{readOnly:true,getter:function(){return this._container}}},constructor:function(b){this._children=new dorado.util.KeyedList(dorado._GET_ID);
$invokeSuper.call(this,arguments)},createDefaultLayout:function(){this.set("layout",new dorado.widget.layout.DockLayout())},onReady:function(){this._children.each(function(b){if(!(b instanceof dorado.widget.Control)&&!b._ready){b.onReady()}if(dorado.Object.isInstanceOf(b,dorado.widget.FloatControl)&&!b._ready&&b._floating&&b._visible){b.show()}});$invokeSuper.call(this,arguments)},destroy:function(){jQuery.each(this._children.toArray(),function(b,d){if(!d._destroyed){d.destroy()}});$invokeSuper.call(this,arguments)},doRenderToOrReplace:function(g,f){if(g&&this._children.size==0&&f.childNodes.length>0){var e=[];for(var d=0;d<f.childNodes.length;d++){e.push(f.childNodes[d])}var b=new dorado.widget.HtmlContainer({content:e});this.addChild(b)}$invokeSuper.call(this,arguments)},addChild:function(b){if(b._parent){a=false;b._parent.removeChild(b);a=true}this._children.insert(b);if(dorado.widget.View.TOP!=this){b._parent=this}b.set("view",(this instanceof dorado.widget.View)?this:this.get("view"));
if(a&&b.parentChanged){b.parentChanged()}if(b instanceof dorado.widget.Control){var d=this.get("layout");if(d){if(!(dorado.Object.isInstanceOf(b,dorado.widget.FloatControl)&&b._floating)){var e=(this._attached&&d._regions.size==0&&!d._rendered);if(!b._visible&&b._hideMode=="layout"){b._layoutConstraint=dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT}d.addControl(b);if(e){d.onAttachToDocument(this.getContentContainer())}}}}if(!(b instanceof dorado.widget.Control)&&!b._ready&&this._ready){b.onReady.call(b)}},removeChild:function(b){this._children.remove(b);b.set("view",null);b._parent=null;dorado.widget.View.TOP.addChild(b);if(a&&b.parentChanged){b.parentChanged()}if(b instanceof dorado.widget.Control){var d=this.get("layout");if(d){d.removeControl(b)}}},removeAllChildren:function(){this._children.each(function(b){this.removeChild(b)},this)},getContentContainer:function(){return this.getDom()},doOnAttachToDocument:function(){var b=this.getContentContainer();if(b.nodeType&&b.nodeType==1&&!b.style.overflow){b.style.overflow=this._contentOverflow
}var d=this.get("layout");if(d&&!(d._regions.size==0&&!d._rendered)){d.onAttachToDocument(this.getContentContainer())}},doOnDetachToDocument:function(){var b=this.get("layout");if(b){b.onDetachToDocument()}},onResize:function(){var b=this.get("layout");if(b&&b._attached){b.onResize()}},isChildrenFocusable:function(b){if(!this._rendered||!this.getDom()){return false}if(b){var d=this._parent;while(d){if(!d._rendered){break}if(!d.isChildrenFocusable(false)){return false}d=d._parent}}var e=this.getDom();return !e.disabled&&e.offsetWidth>0}})})();(function(){var a=[];dorado.widget.View=$extend(dorado.widget.Container,{$className:"dorado.widget.View",ATTRIBUTES:{dataTypeRepository:{getter:function(d){return this["_"+d]||$dataTypeRepository}},className:{defaultValue:"d-view"},width:{defaultValue:"100%"},height:{defaultValue:"100%"},name:{},view:{setter:function(d,e){this._view=e}},context:{getter:function(){if(this._context==null){this._context={}}return this._context},setter:function(e,d){if(d instanceof Object){this._context=d
}}}},EVENTS:{onDataLoaded:{},onComponentRegistered:{},onComponentUnregistered:{}},constructor:function(d){a.push(this);this._identifiedComponents={};this._loadingDataSet=[];if(d=="$TOP_VIEW"){this._dataTypeRepository=dorado.DataTypeRepository.ROOT}else{this._dataTypeRepository=new dorado.DataTypeRepository(dorado.DataTypeRepository.ROOT)}this._dataTypeRepository.view=this;$invokeSuper.call(this,arguments)},destroy:function(){a.remove(this);$invokeSuper.call(this,arguments)},createDefaultLayout:function(){if(this._id!="$TOP_VIEW"){$invokeSuper.call(this,arguments)}},parentChanged:function(){if(this._parent){do{var d=this._parent;if(d instanceof dorado.widget.View){this._dataTypeRepository.parent=d._dataTypeRepository;break}d=d._parent}while(d!=null)}else{this._dataTypeRepository.parent=dorado.DataTypeRepository.ROOT}},registerComponent:function(e,d){if(this._identifiedComponents[e]){throw new dorado.ResourceException("dorado.widget.ComponentIdNotUnique",e,this._id)}this._identifiedComponents[e]=d;
this.fireEvent("onComponentRegistered",this,{component:d})},unregisterComponent:function(e){var d=this._identifiedComponents[e];delete this._identifiedComponents[e];this.fireEvent("onComponentUnregistered",this,{component:d})},getListenerScope:function(){return this},id:function(e){var d=this._identifiedComponents[e];if(!d&&dorado.widget.View.DEFAULT_COMPONENTS){d=dorado.widget.View.getDefaultComponent(this,e);if(d){this.registerComponent(e,d)}}return d},tag:function(e){var h=dorado.TagManager.find(e),g=h.objects;for(var f=0;f<g.length;f++){var d=g[f];if(d._view!=this&&d.view!=this){g.remove(d)}}return h},getComponentReference:function(e){var d=this.id(e);return d||{view:this,component:e}},getDataType:function(d){return this._dataTypeRepository.get(d)},getDataTypeAsync:function(d,e){return this._dataTypeRepository.getAsync(id,e)},onReady:function(){$invokeSuper.call(this,arguments);$waitFor(this._loadingDataSet,$scopify(this,this.onDataLoaded));this._loadingDataSet=[]},onDataLoaded:function(){this.fireEvent("onDataLoaded",this)
},render:function(e){var d;if(e==document.body){d=document.body.clientWidth}$invokeSuper.call(this,arguments);if(d&&d>document.body.clientWidth){this.onResize()}}});dorado.widget.View.registerDefaultComponent=function(f,d){var e=this.DEFAULT_COMPONENTS=this.DEFAULT_COMPONENTS||{};e[f]=d};dorado.widget.View.getDefaultComponent=function(d,g){var f=this.DEFAULT_COMPONENTS;if(!f||!f[g]){return}var e=f[g];if(e instanceof Function){e=e(d)}return e};var b=new dorado.widget.View("$TOP_VIEW");b.isChildrenFocusable=function(){return true};dorado.widget.View.TOP=b;window.$view=b;window.$id=function(h){var g=[];for(var f=0;a.length;f++){var d=a[f];var e=d.id(h);if(e){g.push(e)}}return new dorado.ObjectGroup(g)};window.$waitFor=dorado.widget.View.waitFor=function(f,e){if(!(f instanceof Array)){f=[f]}var d=[];jQuery.each(f,function(h,g){if(g instanceof dorado.widget.DataSet){d.push({callback:dorado._NULL_FUNCTION,run:function(i){g.loadAsync(i)}})}else{if(g instanceof Function){d.push({callback:dorado._NULL_FUNCTION,run:g})
}else{d.push(g)}}});dorado.Callback.simultaneousCallbacks(d,e)};jQuery().ready(function(){function h(i){var j=$DomUtils.findParent(i,function(l){return(!!l.doradoUniqueId)});var k=null;if(j){k=dorado.widget.Component.ALL[j.doradoUniqueId]}return k}$fly(document).mousedown(function(i){var j=h(i.target);if(j==null){dorado.widget.setFocusedControl(null)}}).keydown(function(j){var i,k=dorado.widget.getFocusedControl();if(k){i=k.onKeyDown(j)}if(i===false){j.preventDefault();j.cancelBubble=true;return false}else{if(i===true){switch(j.keyCode||j.which){case 9:case 13:var k=(j.shiftKey)?dorado.widget.findPreviousFocusableControl():dorado.widget.findNextFocusableControl();if(k&&k.isFocusable(true)){k.setFocus()}}}return true}}).keypress(function(j){var i,k=dorado.widget.getFocusedControl();if(k){i=k.onKeyPress(j)}if(i===false){j.preventDefault();j.cancelBubble=true;return false}else{return true}});var e="d-unknown-browser",d=dorado.Browser,f=d.version;if(d.msie){e="d-ie"}else{if(d.mozilla){e="d-mozilla"
}else{if(d.chrome){e="d-chrome"}else{if(d.safari){e="d-safari"}else{if(d.opera){e="d-opera"}}}}}if(f){var g=f.indexOf(".");e+=" "+e+((g>0)?f.substring(0,g):f)}$fly(document.body).addClass(e).focusin(function(i){var j=h(i.target);if(j){dorado.widget.onControlGainedFocus(j)}});setTimeout(function(){b.onReady();$fly(window).unload(function(){dorado.windowClosed=true;if(!b._destroyed){b.destroy()}}).bind("resize",function(){if(b.onResizeTimerId){clearTimeout(b.onResizeTimerId);delete b.onResizeTimerId}b.onResizeTimerId=setTimeout(function(){delete b.onResizeTimerId;b._children.each(function(i){if(i.resetDimension){i.resetDimension()}})},200)})},30)})})();dorado.widget.SubViewHolder=$extend(dorado.widget.Control,{$className:"dorado.widget.SubViewHolder",ATTRIBUTES:{subView:{writeBeforeReady:true}},createDom:function(b){var b=document.createElement("DIV");var a=this._subView;if(a){this.registerInnerControl(a);a.render(b)}return b}});dorado.widget.HtmlContainer=$extend(dorado.widget.Container,{$className:"dorado.widget.HtmlContainer",ATTRIBUTES:{className:{defaultValue:"d-html-container"},content:{},containerExpression:{}},createDom:function(){var f;
var d=this._content;if(d){if(d.constructor==String){var h=document.createElement("DIV");h.innerHTML=this._content;f=h}else{var e=[];this._xCreateContext={};this.pushHtmlElement(e,this._content);if(e.length==1){f=e[0]}else{if(e.length>1){var h=document.createElement("DIV");for(var b=0;b<e.length;b++){h.appendChild(e[b])}f=h}}}}if(!f){f=document.createElement("DIV")}var a=f;if(this._containerExpression){var g=$fly(a).find(this._containerExpression);if(g&&g.length>0){this._container=a=g[0]}}return f},pushHtmlElement:function(e,b){function d(j,i,f){if(!i){return}if(i.constructor==String){var k=this._DIV_FOR_INNERHTML;if(!k){this._DIV_FOR_INNERHTML=k=document.createElement("DIV")}k.innerHTML=i;while(k.firstChild){var h=k.firstChild;k.removeChild(h);if(dorado.Browser.msie&&h.nodeType==3){var g=document.createElement("SPAN");g.appendChild(h);h=g}j.push(h)}}else{if(i.nodeType){j.push(i)}else{j.push($DomUtils.xCreateElement(i,null,f))}}}if(b instanceof Array){for(var a=0;a<b.length;a++){d(e,b[a],this._xCreateContext)
}}else{d(e,b,this._xCreateContext)}},getSubDom:function(a){this.getDom();return this._xCreateContext?this._xCreateContext[a]:null}});dorado.widget.DataControl=$extend(dorado.widget.DataSetObserver,{$className:"dorado.widget.DataControl",ATTRIBUTES:{dataSet:{componentReference:true,setter:function(b,d){if(this._dataSet){this._dataSet.removeObserver(this)}this._dataSet=d;if(d){d.addObserver(this)}}},dataPath:{}},EVENTS:{onGetBindingData:{},onGetBindingDataType:{}},timestamp:0,_disableBindingCounter:0,disableBinding:function(){this._disableBindingCounter++},enableBinding:function(){if(this._disableBindingCounter>0){this._disableBindingCounter--}},getBindingData:function(a){if(!a){a={}}if(a.loadMode==null){a.loadMode="auto"}var b=null;if(this.getListenerCount("onGetBindingData")>0){var d={options:a,data:b};if(this.fireEvent("onGetBindingData",this,d)){b=d.data}}else{if(this._dataSet){b=this._dataSet.queryData(this._dataPath,a)}}return b},getBindingDataType:function(b){if(!b){b={}}if(b.loadMode==null){b.loadMode="auto"
}var a=null;if(this.getListenerCount("onGetBindingDataType")>0){var d={options:b};if(this.fireEvent("onGetBindingDataType",this,d)){a=d.dataType}}else{if(this._dataSet){a=this._dataSet.getDataType(this._dataPath,b)}}return a},dataSetMessageReceived:function(b,a){if(this._disableBindingCounter==0&&this.filterDataSetMessage(b,a)){this.processDataSetMessage(b,a)}},filterDataSetMessage:function(b,a){return true},processDataSetMessage:dorado._NULL_FUNCTION});dorado.widget.PropertyDataControl=$extend(dorado.widget.DataControl,{$className:"dorado.widget.PropertyDataControl",ATTRIBUTES:{dataPath:{defaultValue:"#"},property:{}},filterDataSetMessage:function(e,d,f){var a=true;switch(e){case dorado.widget.DataSet.MESSAGE_DATA_CHANGED:a=(d.property==this._property);break;case dorado.widget.DataSet.MESSAGE_DELETED:case dorado.widget.DataSet.MESSAGE_INSERTED:a=false;break}return a},getBindingData:function(b){var a={firstResultOnly:true,acceptAggregation:false};if(typeof b=="String"){a.loadMode=b}else{dorado.Object.apply(a,b)
}return $invokeSuper.call(this,[a])},getBindingPropertyDef:function(){var a=this.getBindingDataType(),b;if(a){b=a.getPropertyDef(this._property)}return b},getBindingPropertyValue:function(){var a=this.getBindingData(true);return(a)?a.get(this._property):null},getBindingPropertyText:function(){var a=this.getBindingData(true);return(a)?a.getText(this._property):""}});dorado.widget.layout={};dorado.widget.layout.Layout=$extend(dorado.AttributeSupport,{$className:"dorado.widget.layout.Layout",ATTRIBUTES:{className:{},regionClassName:{},padding:{},style:{writeOnly:true},container:{setter:function(d,b){if(this._container!=b){this._domCache={};this._container=b}}},rendered:{readOnly:true},attached:{readOnly:true}},constructor:function(a){this._regions=new dorado.util.KeyedList(function(b){return b.control._id});$invokeSuper.call(this,arguments);if(a){this.set(a)}},getDom:function(){if(!this._dom){this._dom=this.createDom()}return this._dom},getRegionDom:function(a){if(a){return this._domCache[a.id]
}},refresh:function(){if(this._attached){this.refreshDom(this.getDom())}},onAttachToDocument:function(b){if(!this._attached){this._attached=true;if(this._regions.size==0){return}var a=this.getDom();if(a.parentNode!=b){b.appendChild(a)}this.refreshDom(a);this._rendered=true}},onDetachFromDocument:function(){if(this._attached){this._attached=false;this._regions.each(function(a){a.control.onDetachFromDocument()})}},getPreviousRegion:function(b){var a=this._regions.findEntry(b);while(a){a=a.previous;if(a&&a.data.constraint!=dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT){return a.data}}},getNextRegion:function(b){var a=this._regions.findEntry(b);while(a){a=a.next;if(a&&a.data.constraint!=dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT){return a.data}}},preprocessLayoutConstraint:function(a){return a||{}},addControl:function(b){var a={id:dorado.Core.newId(),control:b,constraint:this.preprocessLayoutConstraint(b._layoutConstraint)};this._regions.insert(a);if(this.onAddControl){this.onAddControl(b)
}},removeControl:function(a){if(this.onRemoveControl){this.onRemoveControl(a)}this._regions.removeKey(a._id)},disableRendering:function(){this._disableRendering=true},enableRendering:function(){this._disableRendering=false},resetControlDimension:function(f,a,h,d){var e=f.control;if(h&&(!e.ATTRIBUTES.width.independent||e._fixedWidth===false)){var g=a._realWidth||((dorado.Browser.msie&&dorado.Browser.version<"7")?a.offsetWidth:a.clientWidth);e._realWidth=g-f.padding*2+(f.autoWidthAdjust||0)}if(d&&(!e.ATTRIBUTES.height.independent||e._fixedHeight===false)){var b=a._realHeight||((dorado.Browser.msie&&dorado.Browser.version<"7")?a.offsetHeight:a.clientHeight);e._realHeight=b-f.padding*2+(f.autoHeightAdjust||0)}if(e._attached){e.refresh(true)}},renderControl:function(f,a,g,b){f.autoWidth=g;f.autoHeight=b;f.padding=parseInt(f.constraint.padding)||0;var e=f.control;if(f.padding){var d=e.get("style");if(!d){d={};e.set("style",d)}d.position="relative";d.left=d.top=f.padding+"px"}if(!a.style.width&&g&&!e.ATTRIBUTES.width.independent&&dorado.Browser.msie&&dorado.Browser.version<"7"){a.style.width="0px"
}this.resetControlDimension.apply(this,arguments);if(e._rendered&&e.getDom().parentNode==a){return}this._ignoreControlSizeChange=true;e.render(a);this._ignoreControlSizeChange=false},getRegion:function(a){return this._regions.get((a instanceof dorado.widget.Control)?a._id:a)},refreshControl:function(b){var a=this.getRegion(b);if(a){a.constraint=this.preprocessLayoutConstraint(b._layoutConstraint);this._ignoreControlSizeChange=true;if(this.doRefreshRegion){this.doRefreshRegion(a)}this._ignoreControlSizeChange=false}},onResize:function(){if(this._ignoreControlSizeChange||!this.doOnResize){return}var a=this.getDom();if(a.offsetWidth==0||a.offsetHeight==0){return}this.doOnResize()},onControlSizeChange:function(a){if(this._ignoreControlSizeChange||!this.doOnControlSizeChange){return}this.doOnControlSizeChange(a)}});dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT="none";(function(){var a=["left","right","width","top","bottom","height","anchorLeft","anchorRight","anchorTop","anchorBottom","padding"];
dorado.widget.layout.AnchorLayout=$extend(dorado.widget.layout.Layout,{$className:"dorado.widget.layout.AnchorLayout",ATTRIBUTES:{className:{defaultValue:"d-anchor-layout"},regionClassName:{defaultValue:"d-anchor-layout-region"}},createDom:function(){var b=document.createElement("DIV");b.className=this._className;return b},refreshDom:function(h){for(var d=this._regions.iterator();d.hasNext();){var g=d.next();var f=g.constraint;if(f==dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT){continue}var e=this.createRegionContainer(g);var b=this.adjustRegion(g);h.appendChild(e);this.renderControl(g,e,true,true);if(b){this.realignRegion(g,b)}}},createRegionContainer:function(d){var e=this.getRegionDom(d);if(!e){e=this._domCache[d.id]=document.createElement("DIV");if(this.style){$fly(e).css(this._style)}e.className=this._regionClassName;if(d.constraint){e.style.position=(d.constraint.left!=null||d.constraint.top!=null||d.constraint.right!=null||d.constraint.bottom!=null)?"absolute":"relative";$fly(e).addClass(d.constraint.className)
}}if(d.constraint){var b=dorado.Object.apply({},d.constraint,function(g,f){if(a.indexOf(g)>=0){return false}});$fly(e).css(b)}return e},onAddControl:function(e){if(!this._attached||this._disableRendering){return}var d=this._regions.get(e._id);if(d){var b=this.adjustRegion(d,true);if(b){this.realignRegion(d,b)}}},onRemoveControl:function(e){if(!this._attached||this._disableRendering){return}var d=this._regions.get(e._id);if(d){var f=this.getRegionDom(d);if(f){var g=jQuery(f);g.remove();delete this._domCache[d.id]}var b=this.getNextRegion(d);if(b){this.calculateRegions(b)}}},doOnControlSizeChange:function(b){this.refreshControl(b)},doRefreshRegion:function(i){var d,f,g=(i.constraint==dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT);var j=this.getRegionDom(i);j.style.display=(g?"none":"");if(!g){d=i.currentWidth;f=i.currentHeight;var b=this.adjustRegion(i,true);if(b){this.realignRegion(i,b)}}if(g||d!=i.currentWidth||f!=i.currentHeight){var e=this.getNextRegion(i);if(e){this.calculateRegions(e)
}}},doOnResize:function(){this.calculateRegions()},calculateRegions:function(b){var e=this._regions;if(e.size==0){return}var d=!b;e.each(function(g){if(!d){d=(b==g);if(!d){return}}var f=this.adjustRegion(g);if(f){this.realignRegion(g,f)}},this)},adjustRegion:function(m,k){function z(l,h){var b=e[h];if(b){if(b.constructor==String){if(b=="previous"){return this.getPreviousRegion(l)}}else{if(b instanceof Function){b=b.call(this,l)}}}return b}var v=this.getRegionDom(m);if(!v){return}var e=m.constraint,g;var A=this.getDom();var p,L,H,F,q,G;p=L=H=F=q=G=-1;var u,x,i,O,j,d;u=x=i=O=j=d=0;var D=parseInt(this._padding)||0;var f=A.clientWidth-D*2;var s=A.clientHeight-D*2;if(e.left!=null&&e.anchorLeft!="none"){var I=e.left;if(I.constructor==String&&I.match("%")){var N=u=parseInt(I);if(!isNaN(N)){p=N*f/100+D}}if(p<0){var C=z.call(this,m,"anchorLeft");var P=this.getRegionDom(C);if(P){p=P.offsetLeft+P.clientWidth+parseInt(I)}else{p=parseInt(I);p+=D}}}if(e.right!=null&&e.anchorRight!="none"){var E=e.right;
if(E.constructor==String&&E.match("%")){var N=x=parseInt(E);if(!isNaN(N)){L=N*f/100+D}}if(L<0){var C=z.call(this,m,"anchorRight");var P=this.getRegionDom(C);if(P){L=A.clientWidth-P.offsetLeft+parseInt(E)}else{L=parseInt(E);L+=D}}}if(e.top!=null&&e.anchorTop!="none"){var B=e.top;if(B.constructor==String&&B.match("%")){var N=i=parseInt(B);if(!isNaN(N)){F=N*f/100+D}}if(F<0){var C=z.call(this,m,"anchorTop");var P=this.getRegionDom(C);if(P){F=P.offsetTop+P.clientHeight+parseInt(B)}else{F=parseInt(B);F+=D}}}if(e.bottom!=null&&e.anchorBottom!="none"){var M=e.bottom;if(M.constructor==String&&M.match("%")){var N=O=parseInt(M);if(!isNaN(N)){q=N*f/100+D}}if(q<0){var C=z.call(this,m,"anchorBottom");var P=this.getRegionDom(C);if(P){q=A.clientHeight-P.offsetTop+parseInt(M)}else{q=parseInt(M);q+=D}}}var o=e.width;if(o==null&&m.control.getAttributeWatcher().getWritingTimes("width")){o=m.control._width}if(o!=null){var y=o;if(y.constructor==String&&y.match("%")){var N=j=parseInt(y);if(!isNaN(N)){H=N*f/100
}}else{H=parseInt(y)}}else{if(p>=0&&L>=0){if(u&&x){H=A.clientWidth-p-L;L=-1;u=x=false}else{H=A.clientWidth;if(u){p=-1;H-=L}if(x){L=-1;H-=p}if(!u&&!x){H-=(p+L);L=-1}}}}var n=e.height;if(n==null&&m.control.getAttributeWatcher().getWritingTimes("height")){n=m.control._height}if(n!=null){var K=n;if(K.constructor==String&&K.match("%")){var N=d=parseInt(K);if(!isNaN(N)){G=N*s/100}}else{G=parseInt(K)}}else{if(F>=0&&q>=0){if(i&&O){G=A.clientHeight-F-q;L=-1;i=O=false}else{G=A.clientHeight;if(i){F=-1;G-=q}if(O){q=-1;G-=F}if(!i&&!x){G-=(F+q);q=-1}}}}if(u||x||i||O||j||d){g={left:u,right:x,top:i,bottom:O,width:j,height:d}}var J=v.style;if(p>=0||L>=0||F>=0||q>=0){if(D>0){if((p>=0||L>=0)&&F<0&&q<0){F=D}if((F>=0||q>=0)&&p<0&&L<0){p=D}}if(p>=0){J.left=p+"px"}if(L>=0){J.right=L+"px"}if(F>=0){J.top=F+"px"}if(q>=0){J.bottom=q+"px"}}else{if(D>0){J.position="relative";J.left=J.top=D+"px"}}if(H>=0){J.width=H+"px"}if(G>=0){J.height=G+"px"}if(v.parentNode){if(!k){this.bubbleOnResize(m)}m.currentWidth=v.offsetWidth;
m.currentHeight=v.offsetHeight}return g},realignRegion:function(k,i){var j=this.getRegionDom(k);if(!j){return}var h,m,g,l,b,n;h=m=g=l=b=n=-1;var f=k.constraint,e=this.getDom();if(i.left){h=Math.round((e.clientWidth-j.offsetWidth-(parseInt(j.style.right)||0))*i.left/100)}else{if(i.right){m=Math.round((e.clientWidth-j.offsetWidth-(parseInt(j.style.left)||0))*i.right/100)}}if(i.top){l=Math.round((e.clientHeight-j.offsetHeight-(parseInt(j.style.bottom)||0))*i.top/100)}else{if(i.bottom){b=Math.round((e.clientHeight-j.offsetHeight-(parseInt(j.style.top)||0))*i.bottom/100)}}var d=j.style;if(h>=0){d.left=h+"px"}if(m>=0){d.right=m+"px"}if(l>=0){d.top=l+"px"}if(b>=0){d.bottom=b+"px"}},bubbleOnResize:function(d){var b=d.control;if(b._attached){this.resetControlDimension(d,this.getRegionDom(d),d.autoWidth,d.autoHeight)}}});dorado.Toolkits.registerPrototype("layout","Default",dorado.widget.layout.AnchorLayout)})();(function(){var d=0;var a={};jQuery.each(["left","right","top","bottom"],function(g,h){a[h]=function(i){while(i.previousRegion){i=i.previousRegion;
if(i.constraint.type==h){return i}}return null}});var e={};function b(g){if(g==null){g=d}var h=e[g+""];if(!h){h={top:{type:"top",left:g,right:g,top:g,bottom:undefined,anchorLeft:a.left,anchorRight:a.right,anchorTop:a.top},bottom:{type:"bottom",left:g,right:g,top:undefined,bottom:g,anchorLeft:a.left,anchorRight:a.right,anchorBottom:a.bottom},left:{type:"left",left:g,right:undefined,top:g,bottom:g,anchorLeft:a.left,anchorTop:a.top,anchorBottom:a.bottom},right:{type:"right",left:undefined,right:g,top:g,bottom:g,anchorRight:a.right,anchorTop:a.top,anchorBottom:a.bottom},center:{type:"center",left:g,right:g,top:g,bottom:g,anchorLeft:a.left,anchorRight:a.right,anchorTop:a.top,anchorBottom:a.bottom,overFlow:"auto"}};e[g+""]=h}return h}function f(h,g){var i=b(g);return i[h||"center"]}dorado.widget.layout.DockLayout=$extend(dorado.widget.layout.AnchorLayout,{$className:"dorado.widget.layout.DockLayout",ATTRIBUTES:{className:{defaultValue:"d-dock-layout"},regionClassName:{defaultValue:"d-dock-layout-region"},regionPadding:{defaultValue:d}},preprocessLayoutConstraint:function(g){if(g){if(g!=dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT){if(g.constructor==String){g=f(g,this._regionPadding)
}else{dorado.Object.apply(g,f(g.type,this._regionPadding))}}}else{g=dorado.Object.apply({},f(null,this._regionPadding))}return g},addControl:function(i){var j=this.preprocessLayoutConstraint(i._layoutConstraint);var h={id:dorado.Core.newId(),control:i,constraint:j};var k=this._regions;var g=(k.size>0)?k.last.data:null;if(g&&g.constraint.type=="center"){if(j.type=="center"){g.constraint=f("top",this._regionPadding);if(this._rendered){this.refreshControl(i)}h.previousRegion=g;k.insert(h)}else{h.previousRegion=(k.last.previous)?k.last.previous.data:null;g.previousRegion=h;k.insert(h,"before",g)}}else{h.previousRegion=g;k.insert(h)}if(this.onAddControl){this.onAddControl(i)}},renderControl:function(i,g,j,h){switch(i.constraint.type){case"top":case"bottom":j=true;break;case"left":case"right":h=true;break;default:j=true;h=true}return $invokeSuper.call(this,[i,g,j,h])}})})();(function(){var a=["colSpan","rowSpan","align","vAlign"];dorado.widget.layout.FormLayout=$extend(dorado.widget.layout.Layout,{$className:"dorado.widget.layout.FormLayout",ATTRIBUTES:{className:{defaultValue:"d-form-layout"},regionClassName:{defaultValue:"d-form-layout-region"},cols:{defaultValue:"*,*"},rowHeight:{defaultValue:22},colPadding:{defaultValue:16},rowPadding:{defaultValue:6},padding:{defaultValue:8},stretchWidth:{}},createDom:function(){var e=document.createElement("TABLE");
e.cellSpacing=e.cellPadding=0;e.className=this._className;var d=$fly(e);if(this.style){d.css(this._style)}d.xCreate([{tagName:"TBODY"}]);return e},refreshDom:function(x){if(this.precalculateRegions){this.precalculateRegions()}var e=x.tBodies[0];x.removeChild(e);while(e.firstChild){e.removeChild(e.firstChild)}x.appendChild(e);this.resizeTableAndCols();var d=this._grid,o=-1,h=this._realColWidths;for(var n=0;n<d.length;n++){var f=document.createElement("TR");f.style.height=this._rowHeight+"px";e.appendChild(f);var t=d[n],r=[];for(var m=0;m<t.length;m++){var l=d[n][m];if(l&&l.regionIndex<=o){continue}var p=this.createRegionContainer(l);var g=this._colClss[m];if(g){$fly(p).addClass(g)}f.appendChild(p);if(l){$fly(p).css(l.constraint);l.autoWidthAdjust=l.autoHeightAdjust=0;if((m+l.colSpan)<t.length){l.autoWidthAdjust=0-this._colPadding}if((n+l.rowSpan)<d.length){l.autoHeightAdjust=0-this._rowPadding}p.colSpan=l.colSpan;p.rowSpan=l.rowSpan;var s=0;if(l.colSpan>1){var k=l.colIndex+l.colSpan;for(var u=l.colIndex;
u<k;u++){s+=h[u]}}else{s=h[l.colIndex]}p._realWidth=s;p.style.width=s+"px";p.style.paddingBottom=(-l.autoHeightAdjust||0)+"px";r.push({cell:p,region:l})}}for(var v=0;v<r.length;v++){var q=r[v],p=q.cell,l=q.region;o=l.regionIndex;this.renderControl(l,p,true,false)}}this._regions.each(function(i){if(i.constraint==dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT){return}if(i.control.onAttachToDocument){i.control.onAttachToDocument()}})},createRegionContainer:function(g){var h=this.getRegionDom(g);if(!h){h=document.createElement("TD");if(g){this._domCache[g.id]=h}}h.className=this._regionClassName;if(g){var d=$fly(h),f=g.constraint;if(f.className){d.addClass(f.className)}if(f.align){h.align=f.align}if(f.vAlign){h.vAlign=f.vAlign}var e=dorado.Object.apply({},f,function(j,i){if(a.indexOf(j)>=0){return false}});d.css(e)}return h},initColInfos:function(){this._cols=this._cols||"*";var d=this._colWidths=[];var e=this._colClss=[];var f=0,g=0;jQuery.each(this._cols.split(","),function(l,k){var j,h,m=k.indexOf("[");
if(m>0){j=k.substring(0,m);h=k.substring(m+1,k.length-1)}else{j=k}e[l]=h;if(j=="*"){d.push(-1);f++}else{j=parseInt(j);d.push(j);g+=(j||0)}});this.colCount=d.length;this.dynaColCount=f;this.fixedWidth=g},precalculateRegions:function(){function i(t){function u(){for(var y=r;y<r+q&&y<d.length;y++){for(var x=v;x<v+p;x++){if(d[y][x]){return false}}}return true}var j=this.getPreviousRegion(t);var k=-1,s=0,m=-1,o=pColSpan=1;if(j){k=j.regionIndex;s=j.rowIndex;m=j.colIndex;o=j.rowSpan;pColSpan=j.colSpan}var l=t.constraint;var r=s,v=m;var p=((l.colSpan>this.colCount)?this.colCount:l.colSpan)||1;var q=l.rowSpan||1;do{v++;if(v+p>this.colCount){r++;v=0}}while(!u());for(var w=0;w<q;w++){if((r+w)>=d.length){d.push(new Array(this.colCount))}for(var n=0;n<p;n++){d[r+w][v+n]=t}}t.regionIndex=k+1;t.colIndex=v;t.rowIndex=r;t.colSpan=p;t.rowSpan=q}this.initColInfos();var d=this._grid=[];var h=this._regions;for(var e=h.iterator();e.hasNext();){var g=e.next(),f=g.constraint;if(f==dorado.widget.layout.Layout.NONE_LAYOUT_CONSTRAINT){g.regionIndex=-1;
continue}f.colSpan=parseInt(f.colSpan);f.rowSpan=parseInt(f.rowSpan);i.call(this,g)}},resizeTableAndCols:function(){var l=this._realColWidths;if(!l){this._realColWidths=l=[]}var m=this.getDom(),g=parseInt(this._padding)||0,f=this._colPadding||0;var h=(m.parentNode)?(jQuery(m.parentNode).width()-g*2):0;if(h<0){h=0}var k=0;if(dorado.Browser.safari||dorado.Browser.chrome){k=g*2}if(this._stretchWidth||this.dynaColCount>0){m.style.width=(h+k)+"px"}m.style.padding=g+"px";h-=f*(this._colWidths.length-1);var n=this,d=[];for(var e=0;e<this._colWidths.length;e++){var j=this._colWidths[e];if(n.dynaColCount>0){if(j==-1){j=parseInt((h-n.fixedWidth)/n.dynaColCount)}j=(j<0)?0:j}else{if(n._stretchWidth){j=parseInt(j*h/n.fixedWidth)}}if(e<this._colWidths.length-1){j+=f}if(l[e]!=j){d.push(e)}l[e]=j}return d},doOnResize:function(){if(this._disableRendering){return}this.initColInfos();var g=this.resizeTableAndCols();if(g.length==0){return}if(this._regions.size==0){return}var d=this._grid,o=this._realColWidths;
for(var p=0;p<d.length;p++){var l=d[p];for(var e=0;e<l.length;e++){var m=d[p][e];if(m){var n=0;if(m.colSpan>1){var k=m.colIndex+m.colSpan;for(var h=m.colIndex;h<k;h++){n+=o[h]}}else{n=o[m.colIndex]}var f=this.getRegionDom(m);f._realWidth=n;f.style.width=n+"px";var i=m.control;if(i._attached){this.resetControlDimension(m,f,true,false);i.resetDimension()}}}}},resetControlDimension:function(g,d,h,e){var f=g.control;if(h){h=(!f.ATTRIBUTES.width.independent&&!f.getAttributeWatcher().getWritingTimes("width"))}if(e){e=(!f.ATTRIBUTES.height.independent&&!f.getAttributeWatcher().getWritingTimes("height"))}$invokeSuper.call(this,[g,d,h,e])},doRefreshRegion:function(){this.refresh()}});var b=dorado.widget.layout.FormLayout.prototype;b.onAddControl=b.onRemoveControl=b.doRefreshRegion=function(){if(!this._attached||this._disableRendering){return}this.refreshDom(this.getDom())}})();