(function(){dorado.widget.Action=$extend(dorado.widget.Component,{$className:"dorado.widget.Action",ATTRIBUTES:{caption:{},icon:{},iconClass:{},tip:{},disabled:{},parameter:{},returnValue:{readOnly:true},async:{},hotkey:{writeBeforeReady:true,setter:function(d,b){this._hotkey=b;var c=this;if(b){jQuery(document).bind("keydown",b,function(){c.execute()})}}},confirmMessage:{},executingMessage:{},successMessage:{}},EVENTS:{beforeExecute:{},onExecute:{},onSuccess:{},onFailure:{}},constructor:function(){this._bindingObjects=new dorado.ObjectGroup();$invokeSuper.call(this,arguments);this.addListener("onAttributeChange",function(c,b){dorado.Toolkits.setDelayedAction(c,"$actionStateChangeTimerId",function(){var d=b.attribute,e=b.value;if((d=="icon")||(d=="iconClass")){c._bindingObjects.set(d,e,{skipUnknownAttribute:true})}else{c._bindingObjects.invoke("onActionStateChange")}},20)})},doExecuteSync:dorado._NULL_FUNCTION,doExecuteAsync:dorado._NULL_FUNCTION,execute:function(f){var c=this,b=true;function d(l){var k={processDefault:true};
if(c._async){var h;if(c._executingMessage){h=dorado.util.TaskIndicator.showTaskIndicator(c._executingMessage)}c.doExecuteAsync({callback:function(n,m){if(h){dorado.util.TaskIndicator.hideTaskIndicator(h)}c._returnValue=m;$callback(l,n,m,{scope:c._view});k.success=n;k[n?"result":"error"]=m;c.fireEvent("onExecute",k);c.fireEvent((n)?"onSuccess":"onFailure",c,k);if(n&&k.processDefault&&c._successMessage){dorado.MessageBox.alert(c._successMessage)}}})}else{var j=false,g;try{c._returnValue=g=c.doExecuteSync();j=true;$callback(l,true,g,{scope:c._view})}catch(i){c._returnValue=g=i}k.success=j;k[j?"result":"error"]=g;c.fireEvent("onExecute",c,k);c.fireEvent((j)?"onSuccess":"onFailure",c,k);if(j&&k.processDefault&&c._successMessage){dorado.MessageBox.alert(c._successMessage)}return g}}var e={processDefault:true};c.fireEvent("beforeExecute",c,e);if(e.processDefault){if(this._confirmMessage){var c=this;dorado.MessageBox.confirm(this._confirmMessage,function(){d.call(c,f)})}else{b=d.call(this,f)}}return b
}});var a=["caption","icon","iconClass","tip","disabled"];dorado.widget.ActionSupport=$class({$className:"dorado.widget.ActionSupport",ATTRIBUTES:{action:{componentReference:true,setter:function(d,c){if(this._action instanceof dorado.widget.Action){this._action._bindingObjects.objects.remove(this)}if(c&&!(c instanceof dorado.widget.Action)){var b=c;c=b.view.id(b.component)}this._action=c;if(c){c._bindingObjects.objects.push(this)}}}},onActionStateChange:function(){if(this.refresh){this.refresh(true)}},destroy:function(){if(this._destroyed){return}this.set("action",null);$invokeSuper.call(this,arguments)}})})();(function(){var c={ok:0,invalid:1,executing:2};dorado.widget.AjaxAction=$extend(dorado.widget.Action,{$className:"dorado.widget.AjaxAction",ATTRIBUTES:{async:{defaultValue:true},service:{},supportsEntity:{defaultValue:true}},getAjaxOptions:function(){var d={action:"remote-service",service:this._service,parameter:dorado.JSON.evaluate(this._parameter),context:(this._view?this._view.get("context"):null)};
if(this._supportsEntity){d.loadedDataTypes=this.get("dataTypeRepository").getLoadedDataTypes()}return dorado.Object.apply({jsonData:d},$setting["ajax.remoteServiceOptions"])},doExecuteSync:function(){var f=this.getAjaxOptions(),g=dorado.Toolkits.getAjax(f);var d=g.requestSync(f);if(d.success){var d=d.getJsonData(),e=this.get("dataTypeRepository");if(d&&(d.$dataTypeDefinitions||d.$context)){d=d.data;if(d.$dataTypeDefinitions){e.parseJsonData(d.$dataTypeDefinitions)}if(d.$context&&this._view){this._view.set("context",json.$context)}}if(d&&this._supportsEntity){d=dorado.DataUtil.convertIfNecessary(d,e)}return d}else{throw d.error}},doExecuteAsync:function(f){var d=this.getAjaxOptions(),e=dorado.Toolkits.getAjax(d);e.request(d,{scope:this,callback:function(h,g){if(h){g=g.getJsonData(),dataTypeRepository=this.get("dataTypeRepository");if(g&&(g.$dataTypeDefinitions||g.$context)){g=g.data;if(g.$dataTypeDefinitions){dataTypeRepository.parseJsonData(g.$dataTypeDefinitions)}if(g.$context&&this._view){this._view.set("context",json.$context)
}}if(g&&this._supportsEntity){g=dorado.DataUtil.convertIfNecessary(g,dataTypeRepository)}$callback(f,true,g)}else{$callback(f,false,g.error)}}})}});dorado.DataPath.registerInterceptor("CASCADE_DIRTY",function(g){function f(i){var k=(i.state!=dorado.Entity.STATE_NONE);if(!k){var l=i._data;for(var m in l){var e=l[m];if(e instanceof dorado.Entity){k=f(e)}else{if(e instanceof dorado.EntityList){var j=e.iterator(true);while(j.hasNext()){k=f(j.next());if(k){break}}}}if(k){break}}}return k}if(g instanceof dorado.Entity){if(!f(g)){g=null}}else{if(g instanceof dorado.EntityList){var d=g.iterator(true);var g=[];while(d.hasNext()){var h=d.next();if(f(h)){g.push(h)}}}else{g=null}}return g},function(d){return d});var a;dorado.DataPath.registerInterceptor("DIRTY_TREE",function(f){function g(h){var m=h.isDirty();var l=h._data;for(var k in l){if(!l.hasOwnProperty(k)){continue}if(k.charAt(0)=="$"){continue}var n=(h._propertyDefs)?h._propertyDefs.get(k):null;if(!n||!n._submitable){continue}var j=h.get(k,"never");
if(j instanceof dorado.EntityList){var i=j.iterator(true);while(i.hasNext()){if(g(i.next())){m=true}}}}if(!m){a[h.entityId]=true}return m}a={};if(f instanceof dorado.Entity){if(!g(f)){f=null}}else{if(f instanceof dorado.EntityList){var e=f.iterator(true);f=[];while(e.hasNext()){var d=e.next();if(g(d)){f.push(d)}}}}return f},function(d){return d});function b(d){return !a[d.entityId]}dorado.widget.UpdateAction=$extend(dorado.widget.Action,{$className:"dorado.widget.UpdateAction",ATTRIBUTES:{async:{defaultValue:true},dataResolver:{setter:function(d,e){this._dataResolver=(e&&e.constructor===String)?dorado.DataResolver.create(e):e}},updateItems:{getter:function(){var e=this._updateItems;if(e){var d=this;jQuery.each(e,function(g,f){if(f.autoResetEntityState==null){f.autoResetEntityState=true}if(f.dataSet==null){return}if(typeof f.dataSet=="string"){f.dataSet=d.get("view").id(f.dataSet)}else{if(!(f.dataSet instanceof dorado.widget.DataSet)){var h=f.dataSet;f.dataSet=h.view.id(h.component)}}})}return e
}},alwaysExecute:{}},EVENTS:{beforeExecute:{interceptor:function(g,f,d){var e=g(f,d);this._realConfirmMessage=this._confirmMessage;this._confirmMessage=null;return e}},beforeUpdate:{},onUpdate:{}},constructor:function(d){this._updateItems=[];$invokeSuper.call(this,arguments)},getResolveContext:function(){function g(j,i){if(!j){return i}if(c[i.result]>c[j.result]){j.result=i.result}j.info=j.info.concat(i.info);j.ok=j.info.concat(i.ok);j.warn=j.info.concat(i.warn);j.error=j.info.concat(i.error);j.executing=j.info.concat(i.executing);j.executingValidationNum+=i.executingValidationNum;return j}var n=[],E=[],w={},B=false,r=this.get("updateItems");for(var C=0;C<r.length;C++){var d=r[C];var z=d.dataSet;var l=d.options;if(z==null){continue}if(l instanceof Object){if(l.loadMode!==false){l.loadMode=true}if(l.includeUnsubmitableProperties!==true){l.includeUnsubmitableProperties=false}if(l.generateDataType!==false){l.generateDataType=true}if(l.generateState!==false){l.generateState=true}if(l.generateEntityId!==false){l.generateEntityId=true
}if(l.generateOldData!==false){l.generateOldData=true}}else{l={loadMode:"never",includeUnsubmitableProperties:false,generateDataType:true,generateState:true,generateEntityId:true,generateOldData:true}}if(d.firstResultOnly!=null){l.firstResultOnly=d.firstResultOnly}var x=d.alias||z._id;w[x]=z;var h=d.dataPath||"!DIRTY_TREE";if(h.indexOf("!DIRTY_TREE")>=0){l.entityFilter=b;l.includeDeletedEntity=true;a=null}else{if(d.submitSimplePropertyOnly){l.entityFilter=b;a={}}}var q=l.entityFilter;var F=z.queryData(h,l);if(F){var k,m={validateSimplePropertyOnly:d.submitSimplePropertyOnly};if(F instanceof Array){for(var A=0;A<F.length;A++){var t=F[A];if(t instanceof dorado.Entity){m.context={};t.validate(m);k=g(k,m.context)}}}else{if(F instanceof dorado.EntityList){for(var o=F.iterator();o.hasNext();){var t=o.next();m.context={};t.validate(m);k=g(k,m.context)}}else{if(F instanceof dorado.Entity){m.context={};F.validate(m);k=g(k,m.context)}}}}n.push({updateItem:d,alias:x,data:F,refreshMode:d.refreshMode,autoResetEntityState:d.autoResetEntityState})
}if(k){if(k.result=="invalid"){var y=$resource("dorado.baseWidget.SubmitInvalidData")+"\n";if(k.error.length+k.warn.length==1){if(k.error.length){y+=k.error[0].text}else{y+=k.warn[0].text}}else{y+=$resource("dorado.baseWidget.SubmitValidationSummary",k.error.length,k.warn.length)}throw new dorado.Exception(y)}else{if(k.result=="executing"){throw new dorado.ResourceException("dorado.baseWidget.SubmitValidatingData",k.executing.length)}}}for(var C=0;C<n.length;C++){var p=n[C],d=p.updateItem,F=p.data;delete p.updateItem;var f=[],e={entities:[]};if(F){if(F instanceof Array){var s=F,F=[];B=B||(s.length>0);for(var A=0;A<s.length;A++){var u=l.generateDataType,D;var t=s[A];if(t instanceof dorado.Entity){if(u&&D!=t.dataType){D=t.dataType;l.generateDataType=true}else{l.generateDataType=false}if(d.submitSimplePropertyOnly){a[t.entityId]=true}f.push(t);F.push(t.toJSON(l,e))}}}else{if(F instanceof dorado.EntityList||F instanceof dorado.Entity){B=true;if(d.refreshMode=="cascade"||d.submitSimplePropertyOnly){if(F instanceof dorado.Entity){if(d.submitSimplePropertyOnly){a[F.entityId]=true
}if(d.refreshMode=="cascade"){f.push(F)}}else{for(var o=F.iterator();o.hasNext();){var t=o.next();if(d.submitSimplePropertyOnly){a[t.entityId]=true}if(d.refreshMode=="cascade"){f.push(t)}}}}F=F.toJSON(l,e)}}p.data=F}E.push({alias:p.alias,refreshMode:d.refreshMode,entities:((d.refreshMode=="cascade")?f:e.entities)})}return{aliasMap:w,updateInfos:E,dataResolverArg:{dataItems:n,parameter:this._parameter,view:this._view},hasUpdateData:B}},doExecuteSync:function(){return this.doExecuteAsync()},doExecuteAsync:function(i){function d(q,k){function j(x,z,w){if(!x.entityId){return}var A;if(w!="cascade"){var y=x.getData();for(var u in y){if(!y.hasOwnProperty(u)){continue}var B=y[u];if(B instanceof Object&&B.entityId){A=j(B,z)||A}}}var t=z[x.entityId]||0;if(t.constructor==Number){if(x.state==t){return A}if(t==dorado.Entity.STATE_DELETED){x.remove(true)}else{x.setState(t)}}else{var C=t.$state||0;delete t.$state;if(w=="cascade"){x.fromJSON(t)}else{for(var u in t){if(!t.hasOwnProperty(u)){continue}x.set(u,t[u])
}}x.setState(C)}return true}function l(x,w){if(x.refreshMode=="none"){return false}var s=false,z=x.entities;if(x.refreshMode=="cascade"){var y={};for(var v=0;v<z.length;v++){var t=z[v];y[t.entityId]=t}for(var u in w){if(w.hasOwnProperty(u)){var t=y[u];if(t){s=j(t,w,x.refreshMode)||s}}}}else{for(var v=0;v<z.length;v++){var t=z[v];s=j(t,w,x.refreshMode)||s}}return s}var p=k.updateInfos,r=[];for(var n=0;n<p.length;n++){var o=p[n].alias;var m=k.aliasMap[o];m.disableObservers();try{if(l(p[n],q)){r.push(m)}}finally{m.enableObservers()}}jQuery.each(r,function(t,s){s.notifyObservers()})}function h(l,m){var n={dataItems:m.dataItems,parameter:m.parameter,processDefault:true};this.fireEvent("beforeUpdate",this,n);if(n.processDefault&&this._dataResolver){var k=this._dataResolver;k.supportsEntity=this._supportsEntity;k.dataTypeRepository=this.get("dataTypeRepository");k.message=this._executingMessage?"":null;if(i){return k.resolveAsync(m,{scope:this,callback:function(p,o){if(p){d.call(this,o.entityStates,l)
}$callback(i,p,(p)?o.returnValue:o);this.fireEvent("onUpdate",this,n)}})}else{var j=k.resolve(m);d.call(this,j.entityStates,l);this.fireEvent("onUpdate",this,n);return j.returnValue}}}var f=this.getResolveContext(),g=f.dataResolverArg;if(this._alwaysExecute||!this._updateItems.length||f.hasUpdateData){if(this._realConfirmMessage){var e=this;dorado.MessageBox.confirm(this._realConfirmMessage,function(){h.call(e,f,g)});if(this._confirmMessage===null){this._confirmMessage=this._realConfirmMessage;this._realConfirmMessage=null}}else{h.call(this,f,g)}}else{if(i){$callback(i,false)}else{return false}}}})})();(function(){var c="form_submit_action_",b=1;var a=function(d){function e(f){return f<10?"0"+f:f}return d.getUTCFullYear()+"-"+e(d.getUTCMonth()+1)+"-"+e(d.getUTCDate())+"T"+e(d.getUTCHours())+":"+e(d.getUTCMinutes())+":"+e(d.getUTCSeconds())+"Z"};dorado.widget.FormSubmitAction=$extend(dorado.widget.Action,{$className:"dorado.widget.FormSubmitAction",ATTRIBUTES:{action:{},target:{defaultValue:"_self"},method:{defaultValue:"post"}},doSubmitData:function(i){var h=this,f=document.createElement("form");
f.name=c+b++;f.style.display="none";f.action=dorado.Toolkits.translateURL(h._action);f.target=h._target||"_self";f.method=h._method||"post";for(var j in i){var d=document.createElement("input"),g=i[j],e="";if(g!==undefined){if(g instanceof Date){e=a(g)}else{if(g.toString){e=g.toString()}}}d.type="hidden";d.value=e;d.name=j;f.appendChild(d)}document.body.appendChild(f);f.submit();document.body.removeChild(f)},doExecuteSync:function(){var e=this,f=dorado.JSON.evaluate(e._parameter),d={};if(f&&f instanceof dorado.Entity){d=f.toJSON()}else{if(f){d=f}}e.doSubmitData(d)},doExecuteAsync:function(){this.doExecuteSync()}})})();dorado.widget.AbstractButton=$extend([dorado.widget.Control,dorado.widget.ActionSupport],{selectable:false,ATTRIBUTES:{disabled:{},toggleable:{},menu:{componentReference:true},toggleOnShowMenu:{defaultValue:true},toggled:{skipRefresh:true,setter:function(a,c){var b=this;if(b._toggled!=c){b._toggled=c;b.fireEvent("onToggle",b);b.doSetToggle(c)}}}},EVENTS:{onToggle:{}},onClick:function(){var a=this,b=a._action;
if(b){b.execute&&b.execute()}if(a._toggleable){a.set("toggled",!a._toggled)}return false}});(function(){var d="-click",b="-hover",c="-toggled",a="-disabled";dorado.widget.SimpleButton=$extend(dorado.widget.AbstractButton,{$className:"dorado.widget.SimpleButton",ATTRIBUTES:{mouseDownClassName:{},hoverClassName:{},toggledClassName:{},disabledClassName:{}},doSetToggle:function(){var f=this,h=f._dom,e=f._className,g=f._toggledClassName;if(h){if(f._toggled){$fly(h).addClass(g?g:(e+c))}else{$fly(h).removeClass(g?g:(e+c))}}},doShowMenu:function(){var f=this,i=f._menu,h=f._dom,e=f._className,g=f._toggledClassName;if(i){i.addListener("onShow",function(){if(f._toggleOnShowMenu){$fly(h).addClass(g?g:(e+c))}i.addListener("onHide",function(){if(f._toggleOnShowMenu){$fly(h).removeClass(g?g:(e+c))}dorado.widget.setFocusedControl(f)},{once:true})},{once:true});i._focusParent=f;i.show({anchorTarget:f,align:"innerleft",vAlign:"bottom"})}},createDom:function(){var g=this,i=document.createElement("div"),e=g._className,h=g._hoverClassName,f=g._mouseDownClassName;
i.className=e;jQuery(i).addClassOnHover(h?h:(e+b),null,function(){return !g._disabled}).addClassOnClick(f?f:(e+d),null,function(){return !g._disabled});return i},refreshDom:function(i){$invokeSuper.call(this,arguments);var f=this,e=f._className,h=f._disabledClassName,g=f._toggledClassName;if(f._disabled){$fly(i).addClass(h?h:(e+a))}else{$fly(i).removeClass(h?h:(e+a))}if(f._toggled){$fly(i).addClass(g?g:(e+c))}else{$fly(i).removeClass(g?g:(e+c))}},onClick:function(){$invokeSuper.call(this,arguments);if(this._menu){this.doShowMenu()}}});dorado.widget.SimpleIconButton=$extend(dorado.widget.SimpleButton,{$className:"dorado.widget.SimpleIconButton",ATTRIBUTES:{className:{defaultValue:"d-icon-button"},width:{independent:true},height:{independent:true},icon:{},iconClass:{},showTrigger:{writeBeforeReady:true}},createDom:function(){this._className=this._showTrigger===true||(this._menu&&(this._showTrigger!==false))?this._className+"-trigger":this._className;var e=$invokeSuper.call(this,arguments);
$fly(e).addClass(this._className);e.appendChild($DomUtils.xCreateElement({tagName:"div",className:"icon"}));return e},refreshDom:function(k){$invokeSuper.call(this,arguments);var h=this,g=h._className,j=h._action||{},i=h._icon||j._icon,f=h._iconClass||j._iconClass;var e=k.firstChild;if(i){$DomUtils.setBackgroundImage(e,i)}else{if(f){e.className="icon "+f}}$fly(k).toggleClass(g+"-disabled",!!(h._disabled||j._disabled))}})})();(function(){var m="-hover",c="-left-hover",h="-right-hover",a="-click",e="-left-click",j="-right-click",l="-toggled",k="-left-toggled",i="-right-toggled",f="-trigger",b="icon";function g(n){return !!(n._events&&n._events.onClick&&n._events.onClick.length>0)}function d(n){return n._showTrigger!==false&&(n._splitButton===true||(n._splitButton!==false&&!!(g(n)&&n._menu)))}dorado.widget.Button=$extend(dorado.widget.AbstractButton,{$className:"dorado.widget.Button",focusable:true,ATTRIBUTES:{className:{defaultValue:"d-button"},caption:{},icon:{},iconClass:{},triggerToggled:{},showTrigger:{writeBeforeReady:true},splitButton:{writeBeforeReady:true},width:{independent:true},height:{independent:true,readOnly:true}},EVENTS:{onTriggerClick:{}},doOnKeyDown:function(o){var n=this;
if(o.keyCode==32){n.fireEvent("onClick",n)}return true},doSetToggle:function(){var o=this,p=o._dom,n=o._className;if(p){if(o._toggled){$fly(p).addClass(n+(d(o)?k:l))}else{$fly(p).removeClass(n+l).removeClass(n+k)}}},doShowMenu:function(){var o=this,q=o._menu,p=o._dom,n=o._className;if(q){q.addListener("onShow",function(){if(o._toggleOnShowMenu&&!o._triggerToggled){$fly(p).addClass(n+(d(o)?i:l));o._triggerToggled=true}q.addListener("onHide",function(){o.doAfterMenuHide()},{once:true})},{once:true});q._focusParent=o;q.show({anchorTarget:o,align:"innerleft",vAlign:"bottom"})}},doAfterMenuHide:function(){var n=this,o=n._dom;if(n._toggleOnShowMenu){$fly(o).removeClass(n._className+(d(n)?i:l));n._triggerToggled=false}},_createIconSpan:function(r){var n=this,q=n._doms,p=n._action||{};r=r||n._dom;if(r){var o=document.createElement("span");o.className=b;o.innerHTML="&nbsp;";$fly(o).prependTo(q.buttonLeft).addClass(n._iconClass||p._iconClass);$DomUtils.setBackgroundImage(o,n._icon||p._icon);q.icon=o
}},onClick:function(){var n=this,p=n._action||{},o=n._disabled||p._disabled;if(!o){$invokeSuper.call(this,arguments);if(this._menu&&!g(this)){this.doShowMenu()}}},onResize:function(){var n=this,q=n._dom,o=n.getRealWidth();if(q&&o!=null){$fly(q).width(o);var p=q.offsetWidth-n._doms.buttonRight.offsetWidth-parseInt($fly(n._doms.buttonLeft).css("margin-left"),10);if(p>0){$fly(n._doms.buttonLeft).outerWidth(p)}}},createDom:function(){var p=this,n=p._className,s={},r=p._action||{};var t=$DomUtils.xCreateElement({tagName:"span",className:n,content:[{tagName:"span",className:"button-left",contextKey:"buttonLeft",content:{tagName:"span",className:"caption",content:p._caption||r._caption,contextKey:"caption"}},{tagName:"span",className:"button-right",contextKey:"buttonRight"}]},null,s);p._doms=s;$fly(s.buttonLeft).hover(function(){var v=p._action||{},u=p._disabled||v._disabled;if(!u&&!p._toggled){$fly(t).addClass(n+(d(p)?c:m))}},function(){$fly(t).removeClass(n+m).removeClass(n+c)}).mousedown(function(){var w=p._action||{},v=p._disabled||w._disabled;
if(!v){var u=n+(d(p)?e:a);$fly(t).addClass(u);$fly(document).one("mouseup",function(){$fly(t).removeClass(u)})}});$fly(s.buttonRight).hover(function(){var v=p._action||{},u=p._disabled||v._disabled;if(!u){$fly(t).addClass(n+(d(p)?h:m))}},function(){$fly(t).removeClass(n+m).removeClass(n+h)}).mousedown(function(){var w=p._action||{},v=p._disabled||w._disabled;if(!v){var u=n+(d(p)?j:a);$fly(t).addClass(u);$fly(document).one("mouseup",function(){$fly(t).removeClass(u)})}}).click(function(v){var w=p._action||{},u=p._disabled||w._disabled;if(!u){p.fireEvent("onTriggerClick",p);if(p._menu){p.doShowMenu()}else{if(p.onClick(v)===false){return false}p.fireEvent("onClick",p,{button:v.button,event:v})}}v.stopImmediatePropagation()});if(p._toggleable){if(p._toggled){$fly(t).addClass(n+(d(p)?k:l))}else{$fly(t).removeClass(n+l).removeClass(n+k)}}$fly(t).toggleClass(n+f,p._showTrigger===true||(!!p._menu&&p._showTrigger!==false)).toggleClass(n+"-disabled",!!(p._disabled||r._disabled));var q=p._icon||r._icon,o=p._iconClass||r._iconClass;
if(q||o){p._createIconSpan(t)}return t},refreshDom:function(u){$invokeSuper.call(this,arguments);var p=this,n=p._className,t=p._doms,s=p._action||{},r=p._disabled||s._disabled;$fly(p._doms.caption).html(p._caption||s._caption);p._dom.disabled=r;if(p._toggleable){if(p._toggled){$fly(u).addClass(n+(d(p)?k:l))}else{$fly(u).removeClass(n+l).removeClass(n+k)}}$fly(u).toggleClass(n+f,p._showTrigger===true||(!!p._menu&&p._showTrigger!==false)).toggleClass(n+(d(p)?i:l),!!p._triggerToggled).toggleClass(n+"-disabled",!!(p._disabled||s._disabled));var q=p._icon||s._icon,o=p._iconClass||s._iconClass;if(!q&&!o&&t.icon){$fly(t.icon).css("display","none")}else{$fly(t.icon).attr("className",b).css("display","");if((q||o)&&!t.icon){p._createIconSpan()}if(q){$DomUtils.setBackgroundImage(t.icon,q)}else{if(t.icon){$fly(t.icon).css("background","")}}if(o){$fly(t.icon).addClass(o)}}p.onResize()}})})();(function(){function b(i,g){var f=$fly(i).width(),d=$fly(i).height(),h=g.loadingCoverImg,e=$fly(h).outerWidth(),c=$fly(h).outerHeight();
$fly(h).left((f-e)/2).top((d-c)/2)}var a="about:blank";dorado.widget.IFrame=$extend(dorado.widget.Control,{$className:"dorado.widget.IFrame",ATTRIBUTES:{className:{defaultValue:"d-iframe"},path:{skipRefresh:true,setter:function(c,e){var g=this,f=g._dom,d=g._doms;if(f){$fly(d.loadingCover).css("display","block");$fly(d.iframe).attr("src",e||a).addClass("hidden");b(f,d)}g._path=e}},iFrameWindow:{readOnly:true,getter:function(){return this.getIFrameWindow()}}},EVENTS:{onLoad:{}},createDom:function(){var g=this,d={},f=$DomUtils.xCreateElement({tagName:"div",className:g._className,content:[{tagName:"iframe",contextKey:"iframe",frameBorder:0,className:"hidden"},{tagName:"div",contextKey:"loadingCover",className:"frame-loading-cover",content:{tagName:"div",className:"frame-loading-image",contextKey:"loadingCoverImg"}}]},null,d);g._doms=d;var c=d.iframe,e=d.loadingCoverImg;$fly(c).attr("src",$url(g._path||a)).load(function(){$fly(d.loadingCover).css("display","none");if(!(dorado.Browser.msie&&dorado.Browser.version==6)){$fly(c).removeClass("hidden")
}g.fireEvent("onLoad",g)});return f},refreshDom:function(c){$invokeSuper.call(this,arguments);b(c,this._doms)},getIFrameWindow:function(){var d=this,c=d._doms||{};if(c.iframe){return c.iframe.contentWindow}return null}})})();(function(){var d="-closeable",c="-disabled",b="icon";dorado.widget.tab={};function a(e,g,f){var h=$DomUtils.xCreateElement({tagName:"span",className:"close",contextKey:"close"},null,f);f.tabLeft.appendChild(h);jQuery(h).click(function(i){if(!e._disabled){e.close()}i.stopImmediatePropagation()}).addClassOnHover("close-hover",null,function(){return !e._disabled}).addClassOnClick("close-click",null,function(){return !e._disabled});$fly(g).addClass(e._className+d)}dorado.widget.tab.Tab=$extend(dorado.RenderableElement,{$className:"dorado.widget.tab.Tab",ATTRIBUTES:{className:{defaultValue:"tab"},name:{},caption:{},closeable:{},icon:{},iconClass:{},disabled:{setter:function(e,h){var g=this,f=g._parent;if(f){if(h){f.disableTab(g)}else{f.enableTab(g)}}else{g._disabled=h}}},visible:{defaultValue:true,skipRefresh:true,setter:function(e,h){var g=this,f=g._parent;
if(f&&g){f.doSetTabVisible(g,h)}g._visible=h}},parent:{},userData:{}},constructor:function(e){$invokeSuper.call(this,arguments);if(e){this.set(e)}},_createIconSpan:function(){var f=this,g=f._doms;var e=document.createElement("span");e.className="icon";g.icon=e;$fly(e).prependTo(g.tabLeft);$DomUtils.setBackgroundImage(e,f._icon)},refreshDom:function(l){var i=this,f=i._closeable,m=i._disabled,k=i._visible,g=i._doms,r=g.caption,n=g.close,e=i._width,h=i._parent,o;$DomUtils.disableUserSelection(l);$fly(r).text(i._caption);if(f){if(!n){a(i,l,g)}}else{if(n){$fly(n).remove();$fly(l).removeClass(i._className+d)}}$fly(l).css("display",k?"":"none");if(m){$fly(l).addClass(i._className+c)}else{$fly(l).removeClass(i._className+c)}jQuery(l).addClassOnHover(i._className+"-hover",null,function(){return !i._disabled});if(h&&!e){o=h._tabMinWidth;if(l.offsetWidth<o){e=i._width=o}}if(e){$fly(l).outerWidth(e);var j=$fly(g.tabLeft);j.width(jQuery(l).width()-(parseInt(j.css("margin-left"),10)||0)-(parseInt(j.css("margin-right"),10)||0)-(parseInt(j.css("padding-left"),10)||0)-(parseInt(j.css("padding-right"),10)||0))
}var p=i._icon,q=i._iconClass;if(!p&&!q&&g.icon){$fly(g.icon).css("display","none")}else{$fly(g.icon).attr("className",b).css("display","");if((p||q)&&!g.icon){i._createIconSpan()}if(p){$DomUtils.setBackgroundImage(g.icon,p)}else{if(g.icon){$fly(g.icon).css("background-image","none")}}if(q){$fly(g.icon).addClass(q)}}},close:function(){var f=this,e=f._parent;if(e){e.removeTab(f)}},getDom:function(){if(!this._dom){this._dom=this.createDom()}return this._dom},render:function(g,f){var h=this.getDom();if(!h){return}if(!g){g=document.body}if(h.parentNode!=g){if(f!=null){var e=g.childNodes[f];if(!e){g.appendChild(h)}else{g.insertBefore(h,e)}}else{g.appendChild(h)}}this._rendered=true},createDom:function(){var e=this,f={},g=$DomUtils.xCreateElement({tagName:"li",className:e._className,content:[{tagName:"span",className:"tab-left",contextKey:"tabLeft",content:{tagName:"span",className:"caption",content:e._caption,contextKey:"caption"}},{tagName:"span",className:"tab-right",contextKey:"tabRight"}]},null,f);
e._doms=f;$fly(g).click(function(){var h=e._parent,i=e._disabled;if(h){if(!i){h.doChangeCurrentTab(e)}}});if(e._closeable){a(e,g,f)}jQuery(g).addClassOnHover(e._className+"-hover",null,function(){return !e._disabled}).bind("contextmenu",function(j){j=jQuery.event.fix(j||window.event);j.preventDefault();j.returnValue=false;var i=e._parent,h={tab:e,event:j};i._contextMenuTab=e;i.fireEvent("onTabContextMenu",i,h);return false});if(e._icon||e._iconClass){e._createIconSpan()}return g},getControl:function(){return(this.doGetControl)?this.doGetControl():null}});dorado.widget.tab.ControlTab=$extend(dorado.widget.tab.Tab,{$className:"dorado.widget.tab.ControlTab",ATTRIBUTES:{control:{setter:function(e,f){if(f&&f.constructor==Object.prototype.constructor){f=dorado.Toolkits.createInstance("widget",f)}this._control=f}}},doGetControl:function(){var e=this._control;if(!e){e=this._control=new dorado.widget.Control()}return e}});dorado.widget.tab.IFrameTab=$extend(dorado.widget.tab.ControlTab,{$className:"dorado.widget.tab.IFrameTab",ATTRIBUTES:{path:{path:"_control.path"}},doGetControl:function(){var f=this,e=this._control;
if(!e){e=this._control=new dorado.widget.IFrame({path:f._path})}return e}})})();(function(){var a="d-tabbar",i="tabs",h="tabs-wrap",g="left-button",e="right-button",c="menu-button";function d(l,o){if(!o||!l){return}var m=l._doms,k=m.tabbar,n,j;n=l._leftButton=new dorado.widget.SimpleButton({className:g,listener:{onClick:function(){l.doScrollLeft(true)}}});j=l._rightButton=new dorado.widget.SimpleButton({className:e,listener:{onClick:function(){l.doScrollRight(true)}}});l.registerInnerControl(n);l.registerInnerControl(j);n.render(k);k.insertBefore(n._dom,k.firstChild);j.render(k);k.insertBefore(j._dom,m.tabsWrap);m.leftButton=n._dom;m.rightButton=j._dom;$fly(m.leftButton).repeatOnClick(function(){l.doScrollLeft(false,12)},30);$fly(m.rightButton).repeatOnClick(function(){l.doScrollRight(false,12)},30)}function f(k,l,m,j){m.insertItem({caption:l._caption,disabled:l._disabled,visible:l._visible,listener:{onClick:function(){k.set("currentTab",l)}}},j)}function b(l,r){if(!r){return}var v=r.lastChild,k=l._doms,t=k.rightButton,n=v;
if(t){n=t}var p=l._navmenu=new dorado.widget.Menu({listener:{beforeShow:function(j,w){if(l._tabPlacement=="top"){dorado.Object.apply(w,{anchorTarget:o,align:"innerright",vAlign:"bottom"})}else{dorado.Object.apply(w,{anchorTarget:o,align:"innerright",vAlign:"top"})}}}}),u=l._tabs,m;for(var s=0,q=u.size;s<q;s++){m=u.get(s);f(l,m,p,null)}var o=l._menuButton=new dorado.widget.SimpleButton({className:c,menu:p});o.render(r);r.insertBefore(o._dom,n);k.menuButton=o._dom}dorado.widget.TabBar=$extend(dorado.widget.Control,{$className:"dorado.widget.TabBar",focusable:true,ATTRIBUTES:{className:{defaultValue:a},currentTab:{setter:function(j,n){var l=this,k=l._tabs,m=n;if(typeof n=="number"||typeof n=="string"){m=k.get(m)}if(m&&!m._disabled){l.doChangeCurrentTab(m)}}},tabs:{setter:function(k,p){var n=this._tabs;if(p&&p instanceof Array){for(var m=0,l=p.length;m<l;m++){var o=p[m];if(!(o instanceof dorado.widget.tab.Tab)){o=dorado.Toolkits.createInstance("tab",o)}o._parent=this;n.insert(o)}}}},alwaysShowNavButtons:{skipRefresh:true,setter:function(j,l){var k=this;
k._alwaysShowNavButtons=l;if(l){k.showNavButtons();k.refreshButtons()}else{k.hideNavButtons()}}},showMenuButton:{skipRefresh:true,setter:function(j,m){var k=this,n=k._dom,l=k._doms;if(n){if(m){if(!l.menuButton){b(k,n)}else{$fly(l.menuButton).css("display","")}}else{if(l.menuButton){$fly(l.menuButton).css("display","none")}}k.refreshButtons();k.onToolButtonVisibleChange()}k._showMenuButton=m}},tabMinWidth:{writeOnce:true},tabPlacement:{skipRefresh:true,defaultValue:"top",setter:function(j,k){if(this._rendered){this.doChangeTabPlacement(k)}else{this._tabPlacement=k}}},contextMenuTab:{readOnly:true},height:{independent:true,readOnly:true}},EVENTS:{beforeTabChange:{},onTabChange:{},onTabContextMenu:{}},constructor:function(){this._tabs=new dorado.util.KeyedArray(function(j){return j._name});$invokeSuper.call(this,arguments)},disableTab:function(n){var m=this,k,p=m._navmenu,l=m._tabs,j;n=m.getTab(n);j=l.indexOf(n);k=n._dom;n._disabled=true;if(k){$fly(k).addClass("tab-disabled");if(n==m._currentTab){var o=m.getAvialableTab(n);
m.doChangeCurrentTab(o)}}if(p){p.getItem(j).set("disabled",true)}},enableTab:function(n){var m=this,k,o=m._navmenu,l=m._tabs,j;n=m.getTab(n);j=l.indexOf(n);k=n._dom;n._disabled=false;if(k){$fly(k).removeClass("tab-disabled")}if(o){o.getItem(j).set("disabled",false)}},doSetTabVisible:function(n,q){var m=this,k,p=m._navmenu,l=m._tabs,j;n=m.getTab(n);j=l.indexOf(n);k=n._dom;if(n._visible==q){return}if(k){if(q){k.style.display=""}else{k.style.display="none";if(n==m._currentTab){var o=m.getAvialableTab(n);m.doChangeCurrentTab(o)}}m.refreshButtons()}if(p){p.getItem(j).set("visible",q)}},getTab:function(l){var k=this,j=k._tabs;if(typeof l=="number"||typeof l=="string"){return j.get(l)}else{return l}},insertTab:function(m,j,n){if(!m){throw new dorado.ResourceException("dorado.base.TabUndefined")}var l=this,k=l._tabs;if(k){if(!(m instanceof dorado.widget.tab.Tab)){m=dorado.Toolkits.createInstance("tab",m);m._parent=l}l.doInsertTab(m,j,n);return m}return null},doInsertTab:function(m,j,p){var l=this,k=l._tabs,n=l._doms,o=l._navmenu;
if(j!=null){k.insert(m,j)}else{j=k.size;k.insert(m)}if(o){f(l,m,o,j)}if(l._rendered){m.render(n.tabs,j);m.refreshDom(m._dom)}l.doRefreshGap();if(p!==false){l.doChangeCurrentTab(m)}},removeTab:function(m){var l=this,k=l._tabs,n=l._navmenu,j;if(k){m=l.getTab(m);if(n){j=k.indexOf(m);n.removeItem(j)}l.doRemoveTab(m)}},doRemoveTab:function(l){var k=this,j=k._tabs;if(l!=k._currentTab){j.remove(l);$fly(l._dom).remove()}else{var m=k.getAvialableTab(l);j.removeAt(j.indexOf(l));$fly(l._dom).remove();k.doChangeCurrentTab(m)}k.doRefreshGap();k.refreshButtons()},getAvialableTab:function(q){var p=this,o=p._tabs,m,k,n,l;if(o){if(!q){m=-1}else{m=o.indexOf(q)}for(n=m-1;n>=0;n--){k=o.get(n);if(!k._disabled&&k._visible){return k}}for(n=m+1,l=o.size;n<l;n++){k=o.get(n);if(!k._disabled&&k._visible){return k}}}return null},removeAllTabs:function(){var n=this,m=n._tabs;for(var l=0,k=m.size;l<k;l++){n.removeTab(m.get(0))}},createDom:function(){var m=this,r=m._tabs,l={},p=$DomUtils.xCreateElement({tagName:"div",className:m._className,contextKey:"tabbar",content:[{tagName:"div",className:h,contextKey:"tabsWrap",content:{tagName:"ul",className:i,contextKey:"tabs"}}]},null,l),s=jQuery(p);
m._doms=l;s.addClass(m._className+(m._tabPlacement=="top"?"-top":"-bottom"));if(m._alwaysShowNavButtons){d(m,p)}if(m._showMenuButton){b(m,p)}var t=l.tabs,k;if(r){for(var q=0,o=r.size;q<o;q++){var n=r.get(q);if(n._current){k=n}n.render(t)}if(!k){k=m.getAvialableTab()}if(k){m.doChangeCurrentTab(k)}}$fly(l.tabsWrap).mousewheel(function(j,u){if(m._overflowing){if(u<0){m.doScrollRight(false)}else{if(u>0){m.doScrollLeft(false)}}}});return p},refreshDom:function(q){$invokeSuper.call(this,arguments);var o=this,n=o._tabs;o.doRefreshGap();if(n){var r=o._currentTab,m=-1;if(r){m=n.indexOf(r)}for(var l=0,k=n.size;l<k;l++){var p=n.get(l);p.refreshDom(p._dom)}}o.onToolButtonVisibleChange();o.refreshButtons()},doFilterTabs:function(n){var k=new dorado.util.KeyedArray(function(j){return j._name});for(var m=0,l=n.size;m<l;m++){var o=n.get(m);if(o._visible){k.append(o)}}return k},doRefreshGap:function(){var o=this,n=o.doFilterTabs(o._tabs);if(n){var r=o._currentTab,m=-1;if(r){m=n.indexOf(r)}for(var l=0,k=n.size;
l<k;l++){var q=n.get(l),p=false;if($fly(q._dom).hasClass("last-tab")||$fly(q._dom).hasClass("first-tab")){p=true}$fly(q._dom).removeClass("first-tab").removeClass("last-tab").removeClass("current-prev-tab").removeClass("current-next-tab");if(l==0){$fly(q._dom).addClass("first-tab");p=true}if(l==k-1){$fly(q._dom).addClass("last-tab");p=true}if(p){q.refresh()}if(m!=-1){if(l==m-1){$fly(q._dom).addClass("current-prev-tab")}else{if(l==m+1){$fly(q._dom).addClass("current-next-tab")}}}}}},doScrollLeft:function(n,k){var j=this,m=j._doms,l=m.tabs,o=parseInt(l.style.left,10)+(k>0?k:100);if(n){$fly(l).animate({left:o>0?0:o},300,null,function(){j.refreshButtons()})}else{$fly(l).left(o>0?0:o);j.refreshButtons()}},doScrollRight:function(o,l){var m=this,j=m._doms,r=m._tabs,t=j.tabs,k=parseInt(t.style.left,10);l=l>0?l:100;if(r){var n=m.getTabsWidth(),p=$fly(j.tabsWrap).innerWidth(),s=k-l,q=n+k-p;if(q<=0){return false}else{if(q<l){s=k-q}}}if(o){$fly(t).animate({left:s},300,null,function(){m.refreshButtons()
})}else{$fly(t).left(s);m.refreshButtons()}},doChangeCurrentTab:function(n){var m=this,l=m._doms,j=m._currentTab;if(n==j){return false}var k={newTab:n,currentTab:j};m.fireEvent("beforeTabChange",m,k);if(k.processDefault===false){return}if(j){$fly(j._dom).removeClass("tab-selected")}if(n){var t=n._dom,s=l.tabs,p=t.offsetLeft,r=t.offsetWidth,o=(parseInt(s.style.left,10)||0)*-1,q=$fly(l.tabsWrap).width();m._currentTab=n;$fly(t).addClass("tab-selected");m.doRefreshGap();if(o>p){$fly(s).animate({left:-1*p},300,null,function(){m.refreshButtons()})}else{if((o+q)<(p+r)){$fly(s).animate({left:-1*(p+r-q)},300,null,function(){m.refreshButtons()})}else{m.refreshButtons()}}}else{m._currentTab=null}m.fireEvent("onTabChange",m,{tab:n});return true},doChangeTabPlacement:function(o){var m=this,k=m._className,n=m._doms,j=n.tabbar;if(j){var l=m._tabPlacement;$fly(j).addClass(k+"-"+o);if(l){$fly(j).removeClass(k+"-"+l)}}m._tabPlacement=o;return true},getTabsWidth:function(){var l=this,k=l._tabs,j,m;if(k){j=k.get(k.size-1);
if(j){m=j._dom;if(m){return m.offsetLeft+$fly(m).outerWidth()}}}return 0},refreshButtons:function(){var l=this,o=l._dom,r=l._tabs,k=l._doms;if(!o||!r){return}var n=l._leftButton,q=l._rightButton;var m=l.getTabsWidth(),s=k.tabs,j=parseInt(s.style.left,10);var p=$fly(k.tabsWrap).width();if(m>0){if(l._alwaysShowNavButtons!==true&&p>m){l._overflowing=false;if(q){q.set("disabled",true);if(m+j<=p){$fly(s).left(0);if(!l._alwaysShowNavButtons){l.hideNavButtons()}}}}else{l._overflowing=true;if(!l._alwaysShowNavButtons){l.showNavButtons();p=$fly(k.tabsWrap).innerWidth();j=parseInt(s.style.left,10)}if(!q){q=l._rightButton;n=l._leftButton}if(m+j>p){q.set("disabled",false)}else{if(m+j<p){$fly(s).left(p-m);q.set("disabled",true)}else{if(m+j==p){q.set("disabled",true)}}}if(parseInt(s.style.left,10)<0){n.set("disabled",false)}else{n.set("disabled",true)}if(n._disabled&&q._disabled){$fly(s).left(0)}}}},showNavButtons:function(){var l=this,q=l._dom,j=true,o=l._doms;if(q){if(!o.leftButton){d(l,q)}else{if($fly(o.leftButton).css("display")=="none"){$fly([o.leftButton,o.rightButton]).css("display","block")
}else{j=false}}if(j){var n=o.tabs,p=parseInt(n.style.left,10)||0,m=$fly(o.leftButton).outerWidth(true),k=$fly(o.rightButton).outerWidth(true);$fly(n).left(p-m-k)}l.onToolButtonVisibleChange()}},hideNavButtons:function(p){var m=this,q=m._dom,o=m._doms;if(!q){return}var j=o.leftButton,l=o.rightButton;if(j&&l){var n=m.getTabsWidth(),k=$fly(o.tabsWrap).innerWidth();if((n<k)||p){$fly(j).css("display","none");$fly(l).css("display","none");m.onToolButtonVisibleChange()}}},onToolButtonVisibleChange:function(){var k=this,n=k._dom,j=k._doms;if(!n){return}var l=j.leftButton,o=j.rightButton,q=j.menuButton;var m=0,p=0;if(l&&l.style.display!="none"){m+=$fly(l).outerWidth(true)}if(o&&o.style.display!="none"){p+=$fly(o).outerWidth(true)}if(q){var r=q.style.display!="none",s=r?$fly(q).outerWidth(true):0;if(p>0&&s>0){$fly(o).css("right",s)}else{if(o){$fly(o).css("right","")}}p+=s}$fly(j.tabsWrap).css({"margin-left":m,"margin-right":p})}});dorado.Toolkits.registerPrototype("tab",{Default:dorado.widget.tab.Tab,Tab:dorado.widget.tab.Tab,IFrame:dorado.widget.tab.IFrameTab,Control:dorado.widget.tab.ControlTab})
})();dorado.widget.AbstractPanel=$extend(dorado.widget.Container,{$className:"dorado.widget.AbstractPanel",ATTRIBUTES:{caption:{skipRefresh:true,path:"_captionBar.caption"},buttons:{writeBeforeReady:true,innerComponent:"Button"},buttonAlign:{defaultValue:"center",skipRefresh:true,setter:function(a,e){var b=this,d=b._doms,c=b._buttonAlign;if(d){if(c&&c!="center"){$fly(d.buttonPanel).removeClass("button-panel-"+c)}if(e&&e!="center"){$fly(d.buttonPanel).addClass("button-panel-"+e)}}b._buttonAlign=e}},collapseable:{},visible_todelete:{setter:function(a,c){var b=this._visible;this._visible=c;if(b!=c&&c&&this._rendered){this.onResize()}}},collapsed:{getter:function(a,c){var b=this;if(b._parent instanceof dorado.widget.SplitPanel&&b._parent._sideControl==b&&b._parent._collpaseable){return b._parent._collapsed}else{return b._collapsed}},setter:function(a,c){var b=this;if(b._rendered){b.doSetCollapsed(c)}else{b._collapsed=c}}}},EVENTS:{beforeCollapse:{},onCollapse:{}},toggleCollapsed:function(){var a=this,b=a.get("collapsed");
a.doSetCollapsed(!b)},doSetCollapsed:function(f){var a=this,e=a._dom,c=a._doms,b=a._collapseButton,g={};a.fireEvent("beforeCollapse",a,g);if(g.processDefault===false){return}if(a._parent instanceof dorado.widget.SplitPanel&&a._parent._sideControl==a&&a._parent._collpaseable){var d=a._parent._direction;if(b){b.set("iconClass",f?("expand-icon-"+d):("collapse-icon-"+d))}a._parent.doSetCollapsed(f,function(){a.fireEvent("onCollapse",a);a.onResize(f);a.notifySizeChange()},true)}else{a._collapsed=f;if(f){if(a._rendered){$fly(c.body).safeSlideOut({direction:"b2t",start:function(){},step:function(){},complete:function(){$fly(e).addClass(a._className+"-collapsed");if(b){b.set("iconClass","expand-icon")}a.fireEvent("onCollapse",a);a.onResize(f);a.notifySizeChange()}})}}else{a._collapsed=f;if(a._rendered){$fly(c.body).safeSlideIn({direction:"t2b",start:function(){$fly(e).removeClass(a._className+"-collapsed")},step:function(){},complete:function(){if(b){b.set("iconClass","collapse-icon")}a.fireEvent("onCollapse",a);
a.onResize(f);a.notifySizeChange()}})}}}},_createButtonPanel:function(d){var a=this,c=a._doms,b=document.createElement("div");b.className="button-panel";c.buttonPanel=b;if(c.body){$fly(c.body).append(b)}else{$fly(d).append(b)}return b},onResize:function(a){this.doOnResize&&this.doOnResize(a);$invokeSuper.call(this,arguments)},initButtons:function(d){var a=this,b=a._doms;if(a._buttons){var k=a._buttons,g,h;h=a._createButtonPanel(d);for(var f=0,e=k.length;f<e;f++){g=k[f];a.registerInnerControl(g);g.render(h)}var c=a._buttonAlign;if(c&&c!="center"){$fly(b.buttonPanel).addClass("button-panel-"+c)}}}});dorado.widget.Panel=$extend(dorado.widget.AbstractPanel,{$className:"dorado.widget.Panel",ATTRIBUTES:{className:{defaultValue:"d-panel"},width:{defaultValue:300},border:{writeOnce:true,defaultValue:"normal"},background:{},showCaptionBar:{writeBeforeReady:true},icon:{skipRefresh:true,path:"_captionBar.icon"},iconClass:{skipRefresh:true,path:"_captionBar.iconClass"},tools:{innerComponent:"SimpleIconButton"}},createDom:function(){var a=this,b={},c=a._border,e;
if((dorado.Browser.msie||!$setting["widget.panel.useCssCurveBorder"])&&c=="curve"){e=$DomUtils.xCreateElement({tagName:"div",className:a._className,content:[{tagName:"div",className:"panel-header-left",contextKey:"header",content:{tagName:"div",className:"panel-header-right"}},{tagName:"div",className:"panel-body-left",contextKey:"body",content:{tagName:"div",className:"panel-body-right",content:[{tagName:"div",className:"panel-body",contextKey:"body",content:{tagName:"div",className:"content-panel",contextKey:"contentPanel"}}]}},{tagName:"div",className:"panel-footer-left",contextKey:"footer",content:{tagName:"div",className:"panel-footer-right"}}]},null,b);a._doms=b}else{e=$DomUtils.xCreateElement({tagName:"div",className:a._className,content:{tagName:"div",className:"panel-body",contextKey:"body",content:{tagName:"div",className:"content-panel",contextKey:"contentPanel"}}},null,b);a._doms=b}var m=a._caption,l=a._showCaptionBar;if(l!==false&&(m||l)){$fly(e).addClass(a._className+"-showcaptionbar");
var g=a._tools,n=[];if(g instanceof Array){for(var f=0,d=g.length;f<d;f++){var h=g[f];if(h){n.push(h)}}}var k=a._captionBar=new dorado.widget.CaptionBar({caption:a._caption,icon:a._icon,buttons:n});if(b.body){k.render(b.body.parentNode,b.body)}else{k.render(e,b.contentPanel)}b.captionBar=k._dom;a.registerInnerControl(k);if(a._collapseable){a._createCollapseButton();if(a._collapsed){$fly(b.body).css("display","none")}}}a.initButtons(e);$fly(e).toggleClass(a._className+"-normalborder",c=="normal").toggleClass(a._className+"-curveborder",c=="curve");if(a._collapsed){$fly(e).addClass(a._className+"-collapsed")}return e},_createCollapseButton:function(){var a=this;var b=a._collapseButton=new dorado.widget.SimpleIconButton({iconClass:a._collapsed?"expand-icon":"collapse-icon",onClick:function(){a.toggleCollapsed()}});if(a._parent instanceof dorado.widget.SplitPanel&&a._parent._sideControl==a&&a._parent._collpaseable){var c=a._parent._direction;b.set("iconClass",a._collapsed?"expand-icon-"+c:"collapse-icon-"+c)
}a._captionBar.addButton(b,0)},doOnResize:function(h){var b=this,c=b._border,g=b._dom,e=b._doms,a=b.getRealHeight();if(typeof a=="number"&&a>0){if(h==undefined){h=b._collapsed}if(h){if(c=="curve"){if(b._parent instanceof dorado.widget.SplitPanel&&b._parent._sideControl==b&&b._parent._collpaseable){$fly(e.body).height("auto")}}$fly(g).height("auto")}else{var d=0,f=0;if(e.buttonPanel){d=$fly(e.buttonPanel).outerHeight(true)}if(e.captionBar){f=$fly(e.captionBar).outerHeight(true)}if(c=="curve"){$fly(e.body).outerHeight(jQuery(g).height()-jQuery(e.header).outerHeight()-jQuery(e.footer).outerHeight()-f);$fly(e.contentPanel).outerHeight(jQuery(e.body).height()-d)}else{$fly(e.contentPanel).outerHeight(jQuery(g).height()-f-d)}$fly(g).height("auto")}}},refreshDom:function(d){var a=this,c=a._doms,b=a._border;$invokeSuper.call(this,arguments);if(this._background){c.contentPanel.style.background=this._background}$fly(d).toggleClass(this._className+"-normalborder",b=="normal").toggleClass(this._className+"-curveborder",b=="curve")
},getContentContainer:function(){var a=this,b=a._doms;return b.contentPanel}});dorado.widget.FieldSet=$extend(dorado.widget.AbstractPanel,{ATTRIBUTES:{className:{defaultValue:"d-field-set"}},createDom:function(){var a=this,b={},c=$DomUtils.xCreateElement({tagName:"fieldset",className:a._className,content:[{tagName:"legend",className:"field-set-legend",contextKey:"captionContainer",content:[{contextKey:"icon",tagName:"div",className:"field-set-button"},{tagName:"span",contextKey:"caption",content:a._caption}]},{tagName:"div",className:"body",contextKey:"body",content:{contextKey:"contentPanel",tagName:"div",className:"content-panel"}}]},null,b);a._doms=b;jQuery(b.icon).click(function(){a.toggleCollapsed()}).addClassOnHover("field-set-button-hover").addClassOnClick("field-set-button-click");a.initButtons(c);return c},refreshDom:function(b){$invokeSuper.call(this,arguments);var a=this;$fly(b)[a._collapsed?"addClass":"removeClass"](a._className+"-collapsed");$fly(a._doms.caption).text(a._caption)
},doOnResize:function(g){var c=this,f=c._dom,e=c._doms,b=c._height;if(typeof b=="number"&&b>0){if(g==undefined){g=c._collapsed}if(g){$fly(f).height("auto")}else{var d=0,a=0;if(e.buttonPanel){d=$fly(e.buttonPanel).outerHeight(true)}if(e.captionContainer){a=$fly(e.captionContainer).outerHeight(true)}$fly(e.contentPanel).outerHeight(jQuery(f).height()-a-d);$fly(f).height("auto")}}},getContentContainer:function(){return this._doms.contentPanel}});dorado.widget.GroupBox=$extend(dorado.widget.AbstractPanel,{ATTRIBUTES:{className:{defaultValue:"d-group-box"}},createDom:function(){var a=this,b={},c=$DomUtils.xCreateElement({tagName:"div",className:a._className,content:[{tagName:"div",className:"group-box-bar",contextKey:"captionContainer",content:[{tagName:"div",className:"bar-right"},{contextKey:"icon",tagName:"div",className:"group-box-button"},{tagName:"div",className:"bar-caption",content:a._caption,contextKey:"caption"}]},{tagName:"div",className:"body",contextKey:"body",content:{contextKey:"contentPanel",tagName:"div",className:"content-panel"}}]},null,b);
a._doms=b;jQuery(b.icon).click(function(){a.toggleCollapsed()}).addClassOnHover("group-box-button-hover").addClassOnClick("group-box-button-click");a.initButtons(c);return c},refreshDom:function(b){$invokeSuper.call(this,arguments);var a=this;$fly(b)[a._collapsed?"addClass":"removeClass"](a._className+"-collapsed");$fly(a._doms.caption).text(a._caption)},doOnResize:function(g){var c=this,f=c._dom,e=c._doms,b=c._height;if(typeof b=="number"&&b>0){if(g==undefined){g=c._collapsed}if(g){$fly(f).height("auto")}else{var d=0,a=0;if(e.buttonPanel){d=$fly(e.buttonPanel).outerHeight(true)}if(e.captionContainer){a=$fly(e.captionContainer).outerHeight(true)}$fly(e.contentPanel).outerHeight(jQuery(f).height()-a-d)}}},getContentContainer:function(){return this._doms.contentPanel}});dorado.widget.CardBook=$extend(dorado.widget.Control,{$className:"dorado.widget.CardBook",ATTRIBUTES:{className:{defaultValue:"d-cardbook"},currentControl:{skipRefresh:true,setter:function(a,f){var b=this,d=b._controls;if(f!=null){if(typeof f=="string"||typeof f=="number"){f=d.get(f)
}}var e=b._currentControl;var h={oldValue:e};b.fireEvent("beforeCurrentChange",this,h);if(h.processDefault===false){return}if(e){var c=e._dom;if(c){c.style.display="none"}}b._currentControl=f;var g=b._dom;if(g&&f){f.set("width",$fly(g).innerWidth());f.set("height",$fly(g).innerHeight());if(!f._rendered){f.render(g);b.registerInnerControl(f)}else{$fly(f._dom).css("display","block")}}b.fireEvent("onCurrentChange",this,f)}},controls:{writeOnce:true,innerComponent:"",setter:function(a,e){if(e){var c=this._controls,b=(c.size==0);if(e instanceof Array){for(var d=0;d<e.length;d++){c.insert(e[d]);e[d]._parent=e[d]._focusParent=this;if(d==0&&b){this.set("currentControl",e[d])}}}else{if(e.constructor==Object.prototype.constructor){c.insert(e);e._parent=e._focusParent=this;this.set("currentControl",e)}}}}}},EVENTS:{beforeCurrentChange:{},onCurrentChange:{}},constructor:function(){this._controls=new dorado.util.KeyedArray(function(a){return a._id});$invokeSuper.call(this,arguments)},addControl:function(e,c,d){if(!e){throw new dorado.ResourceException("dorado.base.CardControlUndefined")
}var b=this,a=b._controls;a.insert(e,c);b.registerInnerControl(e);if(d!==false){b.set("currentControl",e)}return e},removeControl:function(c){var b=this,a=b._controls;c=b.getControl(c);if(c){c.destroy&&c.destroy();a.remove(c);return c}return null},removeAllControls:function(){var c=this,a=c._controls;for(var d=0,b=a.size;d<b;d++){var e=a.get(0);c.removeControl(e)}},getControl:function(c){var b=this,a=b._controls;if(a){if(typeof c=="number"||typeof c=="string"){return a.get(c)}else{return c}}return null},createDom:function(){var a=$invokeSuper.call(this,arguments);a.className=this._className;return a},refreshDom:function(c){$invokeSuper.call(this,arguments);var a=this,b=a._currentControl;if(b){b.set("width",$fly(c).innerWidth());b.set("height",$fly(c).innerHeight());if(!b._rendered){b.render(c);a.registerInnerControl(b)}else{$fly(b._dom).css("display","block")}}}});dorado.widget.TabControl=$extend(dorado.widget.TabBar,{$className:"dorado.widget.TabControl",ATTRIBUTES:{height:{defaultValue:200,independent:false,readOnly:false}},constructor:function(){$invokeSuper.call(this,arguments);
this._cardBook=new dorado.widget.CardBook();this.registerInnerControl(this._cardBook)},doChangeCurrentTab:function(f){var a=$invokeSuper.call(this,arguments);if(!a){return false}var d=this,e=d._tabs,c=typeof f=="number"?f:e.indexOf(f),b=d._cardBook;if(b){b.set("currentControl",c)}return true},doChangeTabPlacement:function(e){var a=$invokeSuper.call(this,arguments);if(!a){return false}var d=this,f=d._dom;if(f){var b=d._tabbarDom,c=d._cardBook._dom;if(dorado.Browser.msie&&dorado.Browser.version==6){if(e=="top"){f.appendChild(c)}else{f.insertBefore(c,b)}}else{if(e=="top"){f.insertBefore(b,c)}else{f.appendChild(b)}}}return true},doRemoveTab:function(e){var c=this,d=c._tabs,b=typeof e=="number"?e:d.indexOf(e),a=c._cardBook;if(a){a.removeControl(b)}$invokeSuper.call(this,arguments)},doInsertTab:function(e,c,f){$invokeSuper.call(this,arguments);var b=this,a=b._cardBook,d=b._tabs;if(c==null){c=d.indexOf(e)}if(a){a.addControl(e.getControl(),c,f)}},createDom:function(){var k=this,d=k._cardBook,f=document.createElement("div"),a=$invokeSuper.call(this,arguments),b=k._tabPlacement;
if(b=="top"){f.appendChild(a)}k._tabbarDom=a;var l=[],h=k._tabs;for(var g=0,e=h.size;g<e;g++){var c=h.get(g);l.push(c.getControl())}d.set("controls",l);d.render(f);k.registerInnerControl(d);if(b=="bottom"){f.appendChild(a)}return f},refreshDom:function(g){var d=this,c=d._cardBook,a=d._tabbarDom,b=d._cardBook._dom;$invokeSuper.call(this,[a]);$fly(a).css("height","auto");if(d._height!=null){jQuery(c._dom).height(d.getRealHeight()-$fly(a).height()).width(d.getRealWidth())}var e=d._tabs,h=d._currentTab,f=e.indexOf(h);if(f!=-1){c._currentControl=c._controls.get(f)}c.refreshDom(b)},setFocus:function(){var a=this._tabbarDom;if(a){setTimeout(function(){try{a.focus()}catch(b){}},0)}}});dorado.widget.CaptionBar=$extend(dorado.widget.Control,{$className:"dorado.widget.CaptionBar",ATTRIBUTES:{className:{defaultValue:"d-caption-bar"},caption:{},icon:{},iconClass:{},buttons:{innerComponent:"SimpleIconButton",setter:function(a,f){var e=this,c=e._buttons;if(c){e.clearButtons()}if(!e._buttons){e._buttons=new dorado.util.KeyedArray(function(g){return g._id
})}if(f instanceof Array){for(var d=0,b=f.length;d<b;d++){e._buttons.insert(f[d])}}else{if(f instanceof dorado.util.KeyedArray){for(var d=0,b=f.size;d<b;d++){e._buttons.insert(f.get(d))}}}}},height:{independent:true,readOnly:true}},addButton:function(c,b){var e=this,d=e._buttons,f=e._doms,a,g=e._dom;if(!e._buttons){d=e._buttons=new dorado.util.KeyedArray(function(h){return h._id})}if(b==null){d.insert(c)}else{if(typeof b=="number"){a=d.get(b);d.insert(c,b)}else{if(typeof b=="string"){a=d.get(b);if(!a){d.insert(c)}else{d.insert(c,"before",a)}}}}e.registerInnerControl(c);if(g){if(!f.buttonGroup){e._createButtonGroup()}c.render(f.buttonGroup,a?a._dom:null)}},getButton:function(a){var c=this,b=c._buttons;if(b&&(typeof a=="number"||typeof a=="string")){return b.get(a)}else{return a}},removeButton:function(a){var c=this,b=c._buttons;if(typeof a=="string"||typeof a=="number"){a=b.get(a)}if(a){c.unregisterInnerControl(a);a.destroy();b.remove(a)}},clearButtons:function(){var e=this,d=e._buttons;
if(d){for(var c=0,a=d.size;c<a;c++){var b=d.get(c);e.unregisterInnerControl(b);b.destroy();d.removeAt(0)}}},_createIcon:function(d){var b=this,c=b._doms;d=d?d:b._dom;var a=document.createElement("div");a.className="caption-bar-icon";$fly(a).insertBefore(c.caption);c.icon=a},_createButtonGroup:function(d){var b=this,c=b._doms;d=d?d:b._dom;var a=document.createElement("div");a.className="button-group";$fly(d).prepend(a);c.buttonGroup=a},createDom:function(){var f=this,g=f._buttons,a={},b=$DomUtils.xCreateElement({tagName:"div",className:f._className,content:[{tagName:"div",className:"caption",content:f._caption,contextKey:"caption"}]},null,a);f._doms=a;if(g){f._createButtonGroup(b);for(var d=0,c=g.size;d<c;d++){var e=g.get(d);f.registerInnerControl(e);e.render(a.buttonGroup)}}var h=f._icon,k=f._iconClass;if(h||k){f._createIcon(b);$fly(a.icon).addClass(k);$DomUtils.setBackgroundImage(a.icon,h)}return b},refreshDom:function(){var c=this,d=c._doms;$fly(d.caption).text(c._caption);var b=c._icon,a=c._iconClass;
if(!b&&!a&&d.icon){$fly(d.icon).css("display","none")}else{$fly(d.icon).attr("className","caption-bar-icon").css("display","");if((b||a)&&!d.icon){c._createIcon()}if(b){$DomUtils.setBackgroundImage(d.icon,b)}else{if(d.icon){$fly(d.icon).css("background-image","none")}}if(a){$fly(d.icon).addClass(a)}}}});dorado.MessageBox={_runStack:[],defaultTitle:"",minWidth:300,maxWidth:800,OK:["ok"],CANCEL:["cancel"],OKCANCEL:["ok","cancel"],YESNO:["yes","no"],YESNOCANCEL:["yes","no","cancel"],WARNING_ICON:"warning-icon",ERROR_ICON:"error-icon",INFO_ICON:"info-icon",QUESTION_ICON:"question-icon",SINGLE_EDITOR:null,buttonText:{ok:"dorado.baseWidget.MessageBoxButtonOK",cancel:"dorado.baseWidget.MessageBoxButtonCancel",yes:"dorado.baseWidget.MessageBoxButtonYes",no:"dorado.baseWidget.MessageBoxButtonNo"},onButtonClick:function(c){var b;if(dorado.MessageBox._runStack.length>0){var a=dorado.MessageBox._runStack[0];if(c=="close"){if(a.closeAction){b=a.closeAction}else{c=a.buttons[a.buttons.length-1]}}if(typeof a.detailCallback=="function"||typeof a.callback=="function"){if(!b){b=a.buttons[c]
}var d=null;if(a.editor!="none"){if(b!="ok"){d=""}else{switch(a.editor){case"single":d=dorado.MessageBox.SINGLE_EDITOR.get("value");break;case"multiple":d=dorado.MessageBox.TEXTAREA.get("value");break}}}if(typeof a.callback=="function"&&(b=="yes"||b=="ok")){a.callback.apply(null,[d])}if(typeof a.detailCallback=="function"){a.detailCallback.apply(null,[b,d])}}dorado.MessageBox._runStack.splice(0,1)}dorado.MessageBox._dialog.hide()},getDialog:function(){if(!dorado.MessageBox._dialog){dorado.MessageBox.defaultTitle=$resource("dorado.baseWidget.MessageBoxDefaultTitle");dorado.MessageBox._dialog=new dorado.widget.Dialog({focusAfterShow:false,anchorTarget:window,align:"center",vAlign:"center",width:dorado.MessageBox.maxWidth,resizeable:false,exClassName:"d-message-box",modal:true,modalType:$setting["widget.messageBox.defaultModalType"]||"transparent",closeAction:"hide",buttons:[{width:60,listener:{onClick:function(){dorado.MessageBox.onButtonClick(0)}}},{width:60,listener:{onClick:function(){dorado.MessageBox.onButtonClick(1)
}}},{width:60,listener:{onClick:function(){dorado.MessageBox.onButtonClick(2)}}}]});dorado.MessageBox._dialog.doOnAttachToDocument=function(){var c=this,h=c.getContentContainer(),f=c._doms;dorado.widget.Dialog.prototype.doOnAttachToDocument.apply(c,[]);if(h){var e=dorado.MessageBox._lastIcon||"";h.appendChild($DomUtils.xCreateElement({tagName:"div",className:"msg-content",contextKey:"msgContent",content:[{tagName:"span",className:"msg-icon "+e,contextKey:"msgIcon"},{tagName:"span",className:"msg-text",contextKey:"msgText",content:dorado.MessageBox._lastText}]},null,f));var a=$DomUtils.xCreateElement({tagName:"div",className:"editor-wrap"});f.editorWrap=a;var d=new dorado.widget.TextEditor();d.render(a);$fly(d._dom).css("display","none");dorado.MessageBox.SINGLE_EDITOR=d;c.registerInnerControl(d);h.appendChild(a);var g=$DomUtils.xCreateElement({tagName:"div",className:"textarea-wrap"});f.textareaWrap=g;var b=new dorado.widget.TextArea();b.render(g);$fly(b._dom).css("display","none");dorado.MessageBox.TEXTAREA=b;
c.registerInnerControl(b);h.appendChild(g);dorado.MessageBox.updateText(dorado.MessageBox._lastText,dorado.MessageBox._lastIcon,dorado.MessageBox._lastEditor,dorado.MessageBox._lastValue)}c.addListener("beforeShow",function(j){var n=j._dom;$fly(n).width(dorado.MessageBox.maxWidth);var k=j._doms,i=$fly(k.msgText).outerWidth(true)+$fly(k.msgIcon).outerWidth(true);if(i<dorado.MessageBox.minWidth){i=dorado.MessageBox.minWidth}else{if(i>dorado.MessageBox.maxWidth){i=dorado.MessageBox.maxWidth}}var l=$fly(n).width(),m=$fly(k.contentPanel).width();j._width=i+l-m;$fly(n).width(j._width);j._height=null;j.onResize()});c.addListener("onShow",function(j){var k=j._buttons,i;if(k){i=k[0];if(i&&i._dom.display!="none"){dorado.widget.setFocusedControl(i)}}});c.addListener("beforeHide",function(j,i){if(dorado.MessageBox._runStack.length>0){i.processDefault=false;dorado.MessageBox.doShow(dorado.MessageBox._runStack[0])}});c.addListener("beforeClose",function(j,i){dorado.MessageBox.onButtonClick("close");i.processDefault=false
})}}return dorado.MessageBox._dialog},alert:function(b,a){if(typeof a=="function"){var c=a;a={callback:c}}else{a=a||{}}a.message=b;a.buttons=dorado.MessageBox.OK;a.closeAction="ok";dorado.MessageBox.show(a)},confirm:function(b,a){if(typeof a=="function"){var c=a;a={callback:c}}else{a=a||{}}a.message=b;a.buttons=dorado.MessageBox.YESNO;a.closeAction="no";dorado.MessageBox.show(a)},prompt:function(b,a){if(typeof a=="function"){var c=a;a={callback:c}}else{a=a||{}}a.message=b;a.buttons=dorado.MessageBox.OKCANCEL;a.closeAction="cancel";a.editor="single";dorado.MessageBox.show(a)},promptMultiline:function(b,a){if(typeof a=="function"){var c=a;a={callback:c}}else{a=a||{}}a.message=b;a.buttons=dorado.MessageBox.OKCANCEL;a.closeAction="cancel";a.editor="multiple";dorado.MessageBox.show(a)},resetEditorWidth:function(c){var a=dorado.MessageBox.getDialog(),d=a._doms,b;if(c=="multiple"&&dorado.MessageBox.TEXTAREA){b=$fly(d.textareaWrap).outerWidth();dorado.MessageBox.TEXTAREA.set("width",b)}else{if(c=="single"&&dorado.MessageBox.SINGLE_EDITOR){b=$fly(d.editorWrap).outerWidth();
dorado.MessageBox.SINGLE_EDITOR.set("width",b)}}},updateText:function(f,c,b,e){var a=dorado.MessageBox.getDialog(),d=a._doms;dorado.MessageBox._lastText=f;dorado.MessageBox._lastIcon=c;dorado.MessageBox._lastEditor=b;dorado.MessageBox._lastValue=e;if(!d){return}f+="";if(f){f=f.replace(/&/g,"&amp;").replace(/[<>\"\n]/g,function(g){switch(g){case"<":return"&lt;";case">":return"&gt;";case"\n":return"<br/>";case'"':return"&quot;"}})}$fly(d.msgText).html(f||"&nbsp;");$fly(d.msgIcon).attr("className","msg-icon");if(c){$fly(d.msgIcon).addClass(c);$fly(d.msgContent).addClass("msg-content-hasicon")}else{$fly(d.msgContent).removeClass("msg-content-hasicon")}if(dorado.MessageBox.SINGLE_EDITOR){switch(b){case"none":$fly(dorado.MessageBox.SINGLE_EDITOR._dom).css("display","none");$fly(dorado.MessageBox.TEXTAREA._dom).css("display","none");break;case"single":$fly(dorado.MessageBox.SINGLE_EDITOR._dom).css("display","");$fly(dorado.MessageBox.TEXTAREA._dom).css("display","none");dorado.MessageBox.SINGLE_EDITOR.set("value",e||"");
break;case"multiple":$fly(dorado.MessageBox.SINGLE_EDITOR._dom).css("display","none");$fly(dorado.MessageBox.TEXTAREA._dom).css("display","");dorado.MessageBox.TEXTAREA.set("value",e||"");break}}},show:function(a){dorado.MessageBox._runStack.push(a);if(dorado.MessageBox._runStack.length>1){return}dorado.MessageBox.doShow(a)},doShow:function(n){n=n||{};dorado.widget.setFocusedControl(null);var g=dorado.MessageBox.getDialog(),b=n.message,k=n.defaultText,l=n.title||dorado.MessageBox.defaultTitle,j=n.icon,h=n.buttons||[],a=h.length,f=n.editor||"none",e=g._buttons;dorado.MessageBox.updateText(b,j,f,k);g.set({caption:l});g.show({overflowHandler:function(i){g._height=i;g.onResize()}});if(f!="none"){dorado.MessageBox.resetEditorWidth(f)}for(var c=0;c<3;c++){var d=h[c];if(c>=a){$fly(e[c]._dom).css("display","none")}else{var m;if(dorado.MessageBox.buttonText[d]){m=$resource(dorado.MessageBox.buttonText[d])}else{m=d}e[c].set("caption",m);$fly(e[c]._dom).css("display","")}}}};(function(){var c={left:"right",right:"left",top:"bottom",bottom:"top"};
var d=function(f){var e=f.data.panel;if(e._hidePreviewTimer){clearTimeout(e._hidePreviewTimer)}};var a=function(f){var e=f.data.panel;e._delayHidePreview()};var b=function(f){$fly(document).unbind("click",b);var e=f.data.panel;e._closePreview()};dorado.widget.SplitPanel=$extend(dorado.widget.Control,{$className:"dorado.widget.SplitPanel",ATTRIBUTES:{className:{defaultValue:"d-split-panel"},direction:{defaultValue:"left"},maxPosition:{},minPosition:{},position:{defaultValue:100},sideControl:{writeBeforeReady:true,writeOnce:true,innerComponent:""},mainControl:{writeBeforeReady:true,writeOnce:true,innerComponent:""},resizeable:{defaultValue:true},collapsed:{},collpaseable:{defaultValue:true},previewable:{defaultValue:false}},EVENTS:{},_openPreview:function(){var e=this,i=e._dom,g=e._doms,l=e._direction,k={},n,h=$fly(i).innerWidth(),m=$fly(i).innerHeight(),f=$fly(g.collapseBar).outerWidth(),j=$fly(g.collapseBar).outerHeight();if(e._previewOpened){return}e._previewOpened=true;switch(l){case"left":n={left:f};
k.left=e._position*-1;break;case"top":n={top:j};k.top=e._position*-1;break;case"right":n={left:h-e._position-f};k.left=h;break;case"bottom":n={top:m-e._position-j};k.top=m;break}$fly(g.sidePanel).css(k).bringToFront().animate(n,{complete:function(){}});$fly(document).bind("click",{panel:e},b);$fly([g.sidePanel,g.collapseBar]).bind("mouseenter",{panel:e},d).bind("mouseleave",{panel:e},a)},_closePreview:function(){var e=this,i=e._dom,g=e._doms,k=e._direction,m,h=$fly(i).innerWidth(),l=$fly(i).innerHeight(),f=$fly(g.collapseBar).outerWidth(),j=$fly(g.collapseBar).outerHeight();if(!e._previewOpened){return}e._previewOpened=false;switch(k){case"left":m={left:e._position*-1+f};break;case"top":m={top:e._position*-1+j};break;case"right":m={left:h-f};break;case"bottom":m={top:l-j};break}$fly(g.sidePanel).animate(m,{complete:function(){$fly(g.sidePanel).css("z-index","")}});$fly([g.sidePanel,g.collapseBar]).unbind("mouseenter",d).unbind("mouseleave",a)},_togglePreview:function(){var e=this;if(e._previewOpened){e._closePreview()
}else{e._openPreview()}},_delayHidePreview:function(){var e=this;if(e._hidePreviewTimer){clearTimeout(e._hidePreviewTimer)}e._hidePreviewTimer=setTimeout(function(){e._hidePreviewTimer=null;e._closePreview();$fly(document).unbind("click",b)},500)},_createCollapseBar:function(){var e=this,g=e._doms,f=$DomUtils.xCreateElement({tagName:"div",className:"collapse-bar",contextKey:"collapseBar",content:{tagName:"div",className:"button",contextKey:"collapseBarButton"}},null,g);jQuery(g.collapseBar).addClass("collapse-bar-"+e._direction).addClassOnHover("collapse-bar-hover").click(function(h){e._togglePreview();h.stopImmediatePropagation()});jQuery(g.collapseBarButton).click(function(h){e.doSetCollapsed(false);h.stopImmediatePropagation()}).addClassOnHover("button-hover");$fly(e._dom).append(g.collapseBar);return f},createDom:function(){var e=this,g={},i=$DomUtils.xCreateElement({tagName:"div",className:e._className,content:[{tagName:"div",className:"side-panel",contextKey:"sidePanel"},{tagName:"div",className:"splitter",content:{tagName:"div",className:"button",contextKey:"button"},contextKey:"splitter"},{tagName:"div",className:"main-panel",contextKey:"mainPanel"}]},null,g),h=e._direction,f=(h=="left"||h=="right")?"x":"y";
e._doms=g;$DomUtils.disableUserSelection(g.splitter);$fly(g.splitter).addClass("splitter-"+e._direction).draggable({addClasses:false,containment:"parent",axis:f,helper:"clone",iframeFix:true,start:function(k,l){var j=l.helper;if(j){j.addClass("splitter-dragging").find("> .button").css("display","none")}},stop:function(k,l){var j=l.position;switch(e._direction){case"left":e.set("position",j.left);break;case"right":e.set("position",$fly(i).width()-j.left);break;case"top":e.set("position",j.top);break;case"bottom":e.set("position",$fly(i).height()-j.top);break}}});$fly(g.button).click(function(){e.doSetCollapsed(!e._collapsed)});$fly(g.sidePanel).click(function(j){j.stopImmediatePropagation()});return i},doSetCollapsed:function(j,n,i){var e=this,k=e._dom,f=e._doms;if(k){var g=$fly(k).width(),o=$fly(k).height(),m=e._direction,h;var p;if(j){switch(m){case"left":p={left:e._position*-1};break;case"top":p={top:e._position*-1};break;case"right":p={left:g};break;case"bottom":p={top:o};break}$fly(f.sidePanel).animate(p,{complete:function(){e._collapsed=j;
e.refresh();if(typeof n=="function"){n.apply(null,[])}}})}else{if(e._previewOpened){$fly([f.sidePanel,f.collapseBar]).unbind("mouseenter",d).unbind("mouseleave",a);$fly(document).unbind("click",b);$fly(f.sidePanel).css("z-index","");e._previewOpened=false;e._collapsed=j;e.refresh()}else{var l={};switch(m){case"left":p={left:0};l.left=e._position*-1;break;case"top":p={top:0};l.top=e._position*-1;break;case"right":p={left:g-e._position};l.left=g;break;case"bottom":p={top:o-e._position};l.top=o;break}$fly(f.sidePanel).css(l).bringToFront().animate(p,{complete:function(){e._collapsed=j;e.refresh();$fly(f.sidePanel).css("z-index","");if(typeof n=="function"){n.apply(null,[])}}})}}}else{e._collapsed=j;e.refresh()}if(!i){if(e._sideControl instanceof dorado.widget.AbstractPanel){e._sideControl.set("collapsed",j)}}},doOnAttachToDocument:function(){var e=this,g=e._sideControl,f=e._mainControl,h=e._doms;if(g){e.registerInnerControl(g);g.render(h.sidePanel)}if(f){e.registerInnerControl(f);f.render(h.mainPanel)
}},refreshDom:function(B){$invokeSuper.call(this,arguments);var k=this,D=k._doms,t=$fly(B).width(),q=$fly(B).height(),j=$fly(D.splitter).width(),g=$fly(D.splitter).height(),C=k._direction,i=k._previewable&&k._collpaseable,f=C=="top"||C=="bottom";if(k._collpaseable){if(k._collapsed){$fly(B).addClass(k._className+"-collapsed");$fly(D.splitter).draggable("disable")}else{$fly(B).removeClass(k._className+"-collapsed");$fly(D.splitter).draggable("enable")}}if(k._collpaseable){$fly(D.button).css("display","")}else{$fly(D.button).css("display","none")}if(k._resizeable){$fly(D.splitter).addClass(f?"splitter-v-resizeable":"splitter-h-resizeable")}else{$fly(D.splitter).removeClass("splitter-h-resizeable").removeClass("splitter-v-resizeable")}var r,o,s,e,A,u,l=0,p=0;if(k._collpaseable&&k._collapsed){if(i){if(!D.collapseBar){k._createCollapseBar()}$fly(D.collapseBar).css("display","");l=$fly(D.collapseBar).outerWidth();p=$fly(D.collapseBar).outerHeight()}switch(C){case"left":r={left:k._position*-1,top:0,height:q};
o={left:l,top:0};s={left:j+l,top:0,width:t-j-l,height:q};e={width:t-j-l,height:q};u={left:0,top:0,height:q};A={width:k._position,height:q};break;case"right":r={left:t,top:0,height:q};o={left:t-j-l,top:0};s={left:0,top:0,width:t-j-l,height:q};e={width:t-j-l,height:q};u={left:t-l,top:0,height:q};A={width:k._position,height:q};break;case"top":r={top:k._position*-1,left:0,width:t};o={top:p,left:0};s={top:g+p,left:0,width:t,height:q-g-p};e={width:t,height:q-g-p};u={left:0,top:0,width:t};A={width:t,height:k._position};break;case"bottom":r={top:q,left:0,width:t};o={top:q-g-p,left:0};s={top:0,left:0,width:t,height:q-g-p};e={width:t,height:q-g-p};u={top:q-p,left:0,width:t};A={width:t,height:k._position};break}if(i){var n=u.width,x=u.height;if(t){$fly(D.collapseBar).outerWidth(n);delete u.width}if(q){$fly(D.collapseBar).outerHeight(x);delete u.height}$fly(D.collapseBar).css(u)}$fly(D.sidePanel).css(r);$fly(D.splitter).css(o).removeClass("splitter-"+C).addClass("splitter-"+c[C]);$fly(D.mainPanel).css(s);
if(k._sideControl){k._sideControl.set(A)}if(k._mainControl){k._mainControl.set(e)}}else{if(i){$fly(D.collapseBar).css("display","none")}switch(k._direction){case"left":r={left:0,top:0,width:k._position,height:q};A={width:k._position,height:q};o={left:k._position,top:0};s={left:k._position+j,top:0,width:t-k._position-j,height:q};e={width:t-k._position-j,height:q};break;case"right":r={left:t-k._position,top:0,width:k._position,height:q};A={width:k._position,height:q};o={left:t-k._position-j,top:0};s={left:0,top:0,width:t-k._position-j,height:q};e={width:t-k._position-j,height:q};break;case"top":r={top:0,left:0,width:t,height:k._position};A={width:t,height:k._position};o={top:k._position,left:0};s={top:k._position+g,left:0,width:t,height:q-k._position-g};e={width:t,height:q-k._position-g};break;case"bottom":r={top:q-k._position,left:0,width:t,height:k._position};A={width:t,height:k._position};o={top:q-k._position-g,left:0};s={top:0,left:0,width:t,height:q-k._position-g};e={width:t,height:q-k._position-g};
break}$fly(D.sidePanel).css(r);$fly(D.mainPanel).css(s);$fly(D.splitter).css(o).removeClass("splitter-"+c[C]).addClass("splitter-"+C);if(k._sideControl){k._sideControl.set(A);k._sideControl.refresh()}if(k._mainControl){k._mainControl.set(e);k._mainControl.refresh()}}if(k._resizeable){if(k._maxPosition!=null||k._minPosition!=null){var h=$fly(B).offset(),w=k._minPosition||50,z,v,y,m;if(f){z=k._maxPosition||q-50}else{z=k._maxPosition||t-50}if(k._direction=="left"){v=h.left+w;y=h.left+z}else{if(k._direction=="right"){v=h.left+t-z;y=h.left+t-w}else{if(k._direction=="top"){v=h.top+w;y=h.top+z}else{if(k._direction=="bottom"){v=h.top+q-z;y=h.top+q-w}}}}if(f){m=[0,v,0,y]}else{m=[v,0,y,0]}$fly(D.splitter).draggable("option","containment",m)}}}})})();dorado.widget.ProgressBar=$extend(dorado.widget.Control,{$className:"dorado.widget.ProgressBar",selectable:false,ATTRIBUTES:{className:{defaultValue:"d-progress-bar"},height:{independent:true},minValue:{defaultValue:0},maxValue:{defaultValue:100},showText:{defaultValue:true},value:{},textPattern:{defaultValue:"${percent}%"}},createDom:function(){var a=this,b={},c=$DomUtils.xCreateElement({tagName:"div",className:a._className,content:[{tagName:"span",className:"bar",contextKey:"bar"},{tagName:"span",className:"msg",contextKey:"msg"}]},null,b);
a._doms=b;return c},refreshDom:function(b){$invokeSuper.call(this,arguments);var d=this,c=d._minValue,h=d._maxValue,i=d._value||0,a=d._doms,e=i/(h-c),g=d._showText,f=d._textPattern||"";if(e>=0&&e<=1){$fly(a.bar).css("width",e*100+"%")}if(g){$fly(a.msg).text(f.replace("${percent}",parseInt(e*100,10)))}}});dorado.widget.Slider=$extend(dorado.widget.Control,{selectable:false,ATTRIBUTES:{className:{defaultValue:"d-slider"},orientation:{defaultValue:"horizental"},minValue:{defaultValue:0},maxValue:{defaultValue:100},value:{setter:function(b,d){var c=this,a;d=c.getValidValue(d);var e={value:c._value};a=c.fireEvent("beforeValueChange",c,e);if(e.processDefault===false){return}if(!a){c.refresh();return false}c._value=d;c.fireEvent("onValueChange",c)}},precision:{defaultValue:0},step:{}},EVENTS:{beforeValueChange:{},onValueChange:{}},constructor:function(){$invokeSuper.call(this,arguments);this._value=this.getValidValue(this._value)},createDom:function(){var d=this,g,f={},a=d._orientation,c=d._className;
g=$DomUtils.xCreateElement({tagName:"div",className:d._className,content:[{tagName:"div",className:"slider-start",contextKey:"start"},{tagName:"div",className:"slider-end",contextKey:"end"},{tagName:"div",className:"slider-body",contextKey:"body"},{tagName:"div",className:"slider-current",contextKey:"current"},{tagName:"div",className:"slider-thumb",contextKey:"thumb",style:{position:"absolute"}}]},null,f);d._doms=f;var b="x";if(a=="vertical"){b="y";$fly(g).addClass(c+"-vertical")}else{$fly(g).addClass(c+"-horizental")}var e=new dorado.widget.Tip({animateType:"none",showDelay:""});jQuery(f.thumb).addClassOnHover("slider-thumb-hover").addClassOnClick("slider-thumb-click").draggable({addClasses:false,containment:"parent",axis:b,stop:function(k,m){var j=m.helper[0],l=d._minValue,n=d._maxValue,o,i,h;if(a=="horizental"){h=$fly(f.thumb).width();i=$fly(g).width()-h;o=parseInt($fly(j).css("left"),10)}else{h=$fly(f.thumb).height();i=$fly(g).height()-h;o=parseInt($fly(j).css("top"),10)}d.set("value",(n-l)*o/i);
e.hide()},drag:function(k,m){var j=m.helper[0],l=d._minValue,n=d._maxValue,o,i,h;if(a=="horizental"){h=$fly(f.thumb).width();i=$fly(g).width()-h;o=parseInt($fly(j).css("left"),10);$fly(f.current).css("width",o+h/2)}else{h=$fly(f.thumb).height();i=$fly(g).height()-h;o=parseInt($fly(j).css("top"),10);$fly(f.current).css("height",o+h/2)}e.set("text",d.getValidValue((n-l)*o/i));e.refresh();if(!e._dom){return}if(a=="horizental"){$DomUtils.dockAround(e._dom,d._doms.thumb,{align:"center",vAlign:"top",positionOffset:[0,-10]})}else{$DomUtils.dockAround(e._dom,d._doms.thumb,{align:"right",vAlign:"center",positionOffset:[10,0]})}},start:function(h,i){e.set("text",d._value);e.show({anchorTarget:i.helper[0],align:"center",vAlign:"top",showDelay:0})}});return g},getValidValue:function(h){function e(m,l){if(l==null){l=0}var k=m*Math.pow(10,l);if(k-Math.floor(k)>=0.5){return(Math.floor(k)+1)/Math.pow(10,l)}else{return Math.floor(k)/Math.pow(10,l)}}var a=this,b=a._step,j,g=a._minValue,d=a._maxValue;if(h!=undefined){j=e(h,a._precision);
if(b!=null){var f=(d-g)/b,c=Math.floor((j-g)/b),i=c+1;if(i>f){j=d}else{if(Math.abs(g+b*i-j)>Math.abs(g+b*c-j)){j=g+b*c}else{j=g+b*i}}}return j}return null},onClick:function(a){var k=a.target||a.srcElement;if(k.className.indexOf("slider-thumb")!=-1){return}var c=this,g=c._dom,b=c._doms,h=a.pageX,e=a.pageY,i=$fly(g).offset(),f,l,d;if(c._orientation=="horizental"){l=$fly(g).innerWidth();d=$fly(b.thumb).outerWidth();f=h-i.left}else{l=$fly(g).innerHeight();d=$fly(b.thumb).outerHeight();f=e-i.top}var j=(f-d/2)/(l-d);if(j<0){j=0}else{if(j>1){j=1}}c.set("value",(c._maxValue-c._minValue)*j)},onResize:function(){this.refresh()},refreshDom:function(i){$invokeSuper.call(this,arguments);var c=this,b=c._doms,d=c._orientation,j=c._maxValue,l=c._minValue,m=c._value,g,f=c._step,k=(f!=null),h;if(m==null){m=l}if(k){h=(j-l)/f;if(h-Math.floor(h)>1e-11){k=false}}if(d=="vertical"){g=$fly(b.thumb).height();var o,n,e;o=$fly(i).innerHeight();n=$fly(b.start).innerHeight();e=$fly(b.end).innerHeight();$fly(b.body).height(o-n-e);
$fly(b.thumb).css("top",(o-g)*m/(j-l));$fly(b.current).css("height",(o-g)*m/(j-l)+g/2);if(k){$fly(b.thumb).draggable("option","grid",[0,(o-g)/h])}}else{g=$fly(b.thumb).width();var a=$fly(i).innerWidth();$fly(b.thumb).css("left",(a-g)*m/(j-l));$fly(b.current).css("width",(a-g)*m/(j-l)+g/2);if(k){$fly(b.thumb).draggable("option","grid",[(a-g)/h,0])}}}});(function(){var g=5,f=15,d=5,a=5,m=3,i="dorado.tooltip",h="dorado.tip.doms";dorado.widget.Tip=$extend([dorado.widget.Control,dorado.widget.FloatControl],{$className:"dorado.widget.Tip",focusable:true,ATTRIBUTES:{className:{defaultValue:"d-tip"},visible:{defaultValue:false},shadowMode:{defaultValue:"drop",skipRefresh:true},animateType:{defaultValue:"fade",skipRefresh:true},caption:{},text:{},closeable:{},arrowDirection:{},arrowAlign:{defaultValue:"center"},arrowOffset:{},showDuration:{}},createDom:function(){var o=this,p,n={};if(dorado.Browser.msie){p=$DomUtils.xCreateElement({tagName:"div",className:o._className,content:[{tagName:"div",className:"tip-tl",content:{tagName:"div",className:"tip-tr"}},{tagName:"div",className:"tip-cl",content:{tagName:"div",className:"tip-cr",content:{tagName:"div",className:"tip-cm",contextKey:"tipCenter",content:{tagName:"div",contextKey:"tipContent"}}}},{tagName:"div",className:"tip-bl",content:{tagName:"div",className:"tip-br"}}]},null,n)
}else{p=$DomUtils.xCreateElement({tagName:"div",className:o._className,content:{tagName:"div",className:"tip-cm",contextKey:"tipCenter",content:{tagName:"div",contextKey:"tipContent"}}},null,n)}o._doms=n;$fly(p).hover(function(){if(o._showDurationTimer){clearTimeout(o._showDurationTimer);o._showDurationTimer=null}},function(){if(o._showDuration){o._showDurationTimer=setTimeout(function(){o.hide();o._showDurationTimer=null},o._showDuration*1000)}});return p},doAfterShow:function(){var n=this;$invokeSuper.call(n,arguments);if(n._showDuration){n._showDurationTimer=setTimeout(function(){n.hide();n._showDurationTimer=null},n._showDuration*1000)}},doClose:function(){this.hide()},getShowPosition:function(n){var r=this,o=r._arrowDirection,q=r._doms;if(o&&!n.positionOffset){var p=r._arrowAlign;if(p){if(o=="left"){n.positionOffset=[q.arrow.offsetWidth,0]}else{if(o=="right"){n.positionOffset=[-1*q.arrow.offsetWidth,0]}else{if(o=="top"){n.positionOffset=[0,q.arrow.offsetHeight]}else{n.positionOffset=[0,-1*q.arrow.offsetHeight]
}}}}}return $invokeSuper.call(this,arguments)},refreshDom:function(p){$invokeSuper.call(this,arguments);var s=this,w=(s._text==undefined)?"&nbsp;&nbsp;":s._text,n=s._doms,o=s._arrowDirection,x=s._className;$fly(p).attr("className",x+" d-shadow-drop");$fly(n.tipContent).html(w);if(o&&o!="none"){if(n.arrow==null){var u=document.createElement("div");u.className="arrow";$fly(p).append(u);n.arrow=u}$fly(p).addClass(x+"-arrow-"+o)}else{$fly(p).removeClass(x+"-arrow-top").removeClass(x+"-arrow-bottom").removeClass(x+"-arrow-left").removeClass(x+"-arrow-right")}var r=n.caption;if(s._caption){if(r==null){n.caption=r=document.createElement("div");r.className="caption";$fly(n.tipCenter).prepend(r);$fly(r).html(s._caption)}else{$fly(r).css("display","").html(s._caption)}}else{if(r!=null){$fly(r).css("display","none")}}if(s._closeable){if(n.close==null){var q=document.createElement("div");q.className="close";$fly(p).append(q);n.close=q;jQuery(q).click(function(){s.doClose(this)}).addClassOnHover("close-hover").addClassOnClick("close-click")
}else{$fly(n.close).css("display","")}}else{if(n.close){$fly(n.close).css("display","none")}}$fly(n.arrow).css({left:"",top:""});if(o&&!s._trackMouse){var v=s._arrowAlign,t=s._arrowOffset||0;if(v){if(o=="left"||o=="right"){if(v=="center"){$fly(n.arrow).css("top",(p.offsetHeight-n.arrow.offsetHeight)/2+t)}else{if(v=="top"){$fly(n.arrow).css("top",a+t)}else{if(v=="bottom"){$fly(n.arrow).css("top",p.offsetHeight-n.arrow.offsetHeight-a+t)}}}}else{if(v=="center"){$fly(n.arrow).css("left",(p.offsetWidth-n.arrow.offsetWidth)/2+t)}else{if(v=="left"){$fly(n.arrow).css("left",d+t)}else{if(v=="right"){$fly(n.arrow).css("left",p.offsetWidth-n.arrow.offsetWidth-d+t)}}}}}}}});dorado.widget.NotifyTip=$extend(dorado.widget.Tip,{$className:"dorado.widget.NotifyTip",ATTRIBUTES:{width:{defaultValue:300},closeable:{defaultValue:true},icon:{},iconClass:{},showDuration:{defaultValue:5}},getShowPosition:function(){return dorado.widget.NotifyTipManager.getAvialablePosition(this)},doAfterHide:function(){$invokeSuper.call(this,arguments);
dorado.NotifyTipPool.returnObject(this)}});dorado.NotifyTipPool=new dorado.util.ObjectPool({makeObject:function(){return new dorado.widget.NotifyTip()}});var l=function(o,n){return{top:Math.max(o.top,n.top),right:Math.min(o.right,n.right),bottom:Math.min(o.bottom,n.bottom),left:Math.max(o.left,n.left)}};var c=function(o,n){var r=$fly(o).region(),q;if(n.nodeType){q=$fly(n).region()}else{q=n}var p=l(r,q);return p.bottom>=p.top&&p.right>=p.left};dorado.widget.NotifyTipManager={offsetLeft:-10,offsetTop:10,padding:10,notifyWidth:300,notify:function(p,n){var o=dorado.NotifyTipPool.borrowObject();o._text=p;o._caption="dorado 7";o.show({anchorTarget:"body",align:"innerright",vAlign:"innertop",offsetLeft:-10,offsetTop:10})},nextRegion:function(p,r){var t,s;t=parseInt($fly(p._dom).css("left"),10);s=$fly(p._dom).outerHeight()+parseInt($fly(p._dom).css("top"),10)+this.padding;var u=r._dom,q=u.offsetWidth,n=u.offsetHeight,o=$fly(window).height();if(s+n>o){t=t-this.notifyWidth-this.padding;s=this.offsetTop
}return{left:t,top:s,bottom:s+n,right:t+q}},avialable:function(r,s){var t=true,q=dorado.NotifyTipPool._activePool;for(var o=0,n=q.length;o<n;o++){if(q[o]!=r){var p=c(q[o]._dom,s);if(p){t=false}}}return t},getAvialablePosition:function(x){var u=$fly(window).width(),s=x._dom,o=s.offsetWidth,y=s.offsetHeight,p,v,w;p=u+this.offsetLeft-o;v=this.offsetTop;w={left:p,top:v,bottom:v+y,right:p+o};if(this.avialable(x,w)){dorado.NotifyTipPool._activePool.remove(x);dorado.NotifyTipPool._activePool.unshift(x);$fly(s).css({left:p,top:v});return{left:p,top:v}}if(dorado.NotifyTipPool.getNumActive()>1){var n=dorado.NotifyTipPool._activePool;for(var t=0,r=n.length;t<r;t++){var q=n[t];if(q!=x){w=this.nextRegion(q,x);if(this.avialable(x,w)){dorado.NotifyTipPool._activePool.remove(x);dorado.NotifyTipPool._activePool.insert(x,dorado.NotifyTipPool._activePool.indexOf(q)+1);$fly(x._dom).css({left:w.left,top:w.top});return{left:w.left,top:w.top}}}}}}};var e=function(o){var n=this,p=dorado.TipManager.getTip(n);if(p._text&&!p._visible){dorado.TipManager.showTip(n,p._showDelay||0,o)
}o.stopImmediatePropagation()};var k=function(o){var n=this,p=dorado.TipManager.getTip(n);if(p){if(p._showTimer){p._latestEvent=o;o.stopImmediatePropagation()}if(p._trackMouse&&p._dom&&($fly(p._dom).css("display")!="none")){p._updatePosition(o)}}};var j=function(){var n=this,o=dorado.TipManager.getTip(n);if(o){if(o._showTimer){clearTimeout(o._showTimer);o._showTimer=null}if(o._autoHide){dorado.TipManager.hideTip(o,o._hideDelay||0)}}};var b=[];dorado.widget.ToolTip=$extend(dorado.widget.Tip,{$className:"dorado.widget.ToolTip",ATTRIBUTES:{mouseOffset:{defaultValue:[g,f]},anchorToTarget:{defaultValue:false,skipRefresh:true,setter:function(n,o){this._anchorToTarget=o;if(this._ready){if(o===false){this.unbindTarget()}else{this.bindTarget()}}}},anchorTarget:{skipRefresh:true,setter:function(n,p){var o=this._anchorTarget;if(o&&this._anchorTargetBinded){this.unbindTarget()}this._anchorTarget=p;if(this._ready&&p){this.bindTarget()}}},showDelay:{skipRefresh:true,defaultValue:500},hideDelay:{skipRefresh:true,defaultValue:300},autoHide:{defaultValue:true},trackMouse:{}},getShowPosition:function(n){var q=this,r=q.getDom(),o=q._latestEvent||n.event;
if(q._anchorToTarget===true){return $invokeSuper.call(this,arguments)}else{if(q._anchorToTarget!==true&&o){var p=q._mouseOffset||[g,f];$DomUtils.locateIn(r,{position:{left:o.pageX+p[0],top:o.pageY+p[1]}});q._latestEvent=null}}return{left:$fly(r).left(),top:$fly(r).top()}},doClose:function(o){var n=jQuery.data(o.parentNode,i);n.hide()},getDom:function(){var n=this._dom;if(!n){n=b.pop();if(n){this._doms=jQuery.data(n,h);this._dom=n;if(this._visible){$fly(n).css({display:"",visibility:"hidden",left:-99999,top:-99999})}else{$fly(n).css({display:"none"})}jQuery.data(n,i,this);return n}else{n=$invokeSuper.call(this,arguments);document.body.appendChild(n);jQuery.data(n,i,this);return n}}else{return n}},_updatePosition:function(n){var p=this;if(n){var o=p._mouseOffset||[g,f];$DomUtils.locateIn(p._dom,{position:{left:n.pageX+o[0],top:n.pageY+o[1]}})}},bindTarget:function(){var n=this._anchorTarget;if(n&&!this._anchorTargetBinded){$fly(n).hover(e,j).mousemove(k);this._anchorTargetBinded=true}},unbindTarget:function(){var n=this._anchorTarget;
if(n&&this._anchorTargetBinded){$fly(n).unbind("mousemove",k).unbind("mouseenter",e).unbind("mouseleave",j);this._anchorTargetBinded=false}},doShow:function(){$invokeSuper.call(this,arguments)},hide:function(){var n=this;if(n._showTimer){clearTimeout(n._showTimer);n._showTimer=null;n._visible=false;return}$invokeSuper.call(this,arguments)},show:function(){var n=this;if(n._hideTimer){clearTimeout(n._hideTimer);n._hideTimer=null;n._visible=true;return}$invokeSuper.call(this,arguments)},doAfterHide:function(){var n=this;$invokeSuper.call(n,arguments);b.push(n._dom);jQuery.data(n._dom,h,n._doms);jQuery.data(n._dom,i,null);n._rendered=false;n._dom=null;n._doms=null}});dorado.TipManager={_previousTip:null,hasTip:function(n){return !!dorado.TipManager.getTip(n)},getTip:function(o){var n;if(o){n=jQuery.data(o,i)}return n},allocTip:function(p,o){var n;o=o||{};o.anchorTarget=p;n=new dorado.widget.ToolTip(o);n.bindTarget();jQuery.data(p,i,n)},initTip:function(p,n){var o=this;if(p){if(dorado.Object.isInstanceOf(p,dorado.RenderableElement)){p=p._dom;
if(!p){return}}if(!n){o.deleteTip(p)}else{if(o.hasTip(p)){o.updateTip(p,n)}else{o.allocTip(p,n)}}}},updateTip:function(o,n){if(dorado.Object.isInstanceOf(o,dorado.RenderableElement)){o=o._dom;if(!o){return}}var p=dorado.TipManager.getTip(o);p.set(n,n)},deleteTip:function(n){if(dorado.Object.isInstanceOf(n,dorado.RenderableElement)){n=n._dom;if(!n){return}}var o=dorado.TipManager.getTip(n);if(o){o.unbindTarget();jQuery.data(n,i,null)}},showTip:function(p,n,q){var o=this,s=dorado.TipManager.getTip(p);if(s._autoHide===false&&!s._visible){if(n){s._showTimer=setTimeout(function(){s.show({element:p,event:q});s._showTimer=null},n)}else{s.show({element:p,event:q})}}else{var r=o._previousTip;if(r&&r!=s){r.hide()}if(n){s._showTimer=setTimeout(function(){s.show({element:p,event:q});s._showTimer=null},n)}else{s.show({element:p,event:q})}o._previousTip=s}return s},hideTip:function(p,n){var o=this;if(p){if(o._previousTip==p){o._previousTip=null}if(n){p._hideTimer=setTimeout(function(){p.hide();p._hideTimer=null
},n)}else{p.hide()}}}}})();dorado.widget.Section=$extend(dorado.widget.Control,{$className:"dorado.widget.Section",ATTRIBUTES:{className:{defaultValue:"d-section"},caption:{skipRefresh:true,path:"_captionBar.caption"},icon:{skipRefresh:true,path:"_captionBar.icon"},iconClass:{skipRefresh:true,path:"_captionBar.iconClass"},disabled:{setter:function(a,b){this._disabled=b;if(this._parent){if(this._parent._activeSection==this){this._parent.changeToAvialableSection();this._parent.refresh()}}}},visible:{setter:function(a,b){this._visible=b;if(this._rendered){$fly(this._dom).css("display",b?"":"none")}if(this._parent){if(this._parent._activeSection==this){this._parent.changeToAvialableSection()}this._parent.refresh()}}},expandable:{defaultValue:true,setter:function(a,b){this._expandable=b;if(this._parent){if(this._parent._activeSection==this){this._parent.changeToAvialableSection();this._parent.refresh()}}}},control:{componentReference:true,innerComponent:"",setter:function(a,c){var b=this._value;
if(b){this.unregisterInnerControl(b);b.destroy()}this._control=c}},userData:{}},EVENTS:{onCaptionClick:{}},createDom:function(){var c=this,b={},d=$DomUtils.xCreateElement({tagName:"div",className:"d-section",content:[{tagName:"div",className:"container",contextKey:"container"}]},null,b);c._doms=b;jQuery(d).addClassOnHover("hover-section");var a=c._captionBar=new dorado.widget.CaptionBar({caption:c._caption,className:"d-section-caption-bar",icon:c._icon,iconClass:c._iconClass});a.render(d,b.container);c.registerInnerControl(a);b.captionBar=a._dom;return d},doRenderControl:function(){var c=this,a=c._doms,b=c._control;if(b){c.registerInnerControl(b);b.render(a.container);b.set("visible",true)}}});dorado.widget.Accordion=$extend(dorado.widget.Control,{$className:"dorado.widget.Accordion",ATTRIBUTES:{className:{defaultValue:"d-accordion"},sections:{innerComponent:"Section",setter:function(b,f){var a=this,d=a._sections;if(d){a.clearSections()}if(typeof f=="object"&&f.constructor==Array.prototype.constructor){for(var e=0,c=f.length;
e<c;e++){a.insertSection(f[e])}}}},height:{defaultValue:400},activeSection:{setter:function(a,b){this.doSetActiveSection(b)}}},EVENTS:{beforeActiveSectionChange:{},onActiveSectionChange:{}},doSetActiveSection:function(d,b){var a=this,c=a._activeSection,e=d;if(c==e){return}var h={activeSection:d,oldActiveSection:c};a.fireEvent("beforeActiveSectionChange",a,h);if(h.processDefault===false){return}if(!a._rendered){a._activeSection=e;return}if(b){var g=c._doms.container,f=$fly(g).height();$fly(g).dockable("bottom",true);a._sliding=true;$fly(e._doms.container).safeSlideIn({direction:"t2b",complete:function(){$fly(g).height(f).css("display","").undockable(true);a._activeSection=e;a.refresh();a.fireEvent("onActiveSectionChange",a,e);a._sliding=false},step:function(j,i){$fly(g).height(dorado.Browser.chrome?Math.ceil(f-j.height):(f-j.height))}})}else{a._activeSection=e;a.refresh();a.fireEvent("onActiveSectionChange",a,e)}},changeToAvialableSection:function(){var a=this,g=a._sections;if(g){var f=-1,b=a._activeSection,d,c,e;
if(b){f=g.indexOf(b)}for(d=f+1,c=g.length;d<c;d++){e=g[d];if(e&&e._visible&&e._expandable&&!e._disabled){a.doSetActiveSection(e);return e}}for(d=f-1;d>=0;d--){e=g[d];if(e&&e._visible&&e._expandable&&!e._disabled){a.doSetActiveSection(e);return e}}}return null},getVisibleSectionCount:function(){var b=this,f=b._sections,a=0;if(f){var e;for(var d=0,c=f.length;d<c;d++){e=f[d];if(e&&e._visible){a++}}}return a},insertSection:function(d,b){var a=this,e=a._sections,c;if(!e){a._sections=e=[]}if(typeof d=="object"&&d.constructor==Object.prototype.constructor){d=new dorado.widget.Section(d)}if(typeof b=="number"){c=e[b]._dom;e.insert(d,b)}else{e.push(d)}if(a._rendered){d.render(a._dom,c);a.registerInnerControl(d);a.bindAction(d);a.refresh()}},appendSection:function(a){this.insertSection(a)},removeSection:function(b){var a=this,c=a._sections;if(c){if(typeof b=="number"){b=c[b]}if(b instanceof dorado.widget.Section){if(a._rendered){a.unregisterInnerControl(b);b.destroy();if(b==a._activeSection){a.changeToAvialableSection()
}c.remove(b);a.refresh()}else{c.remove(b)}}}},clearSections:function(){var a=this,e=a._sections,d;if(e){for(var c=0,b=e.length;c<b;c++){d=e[c];a.unregisterInnerControl(d);d.destroy()}a._activeSection=null;a._sections=[]}},bindAction:function(b){var a=this;b._captionBar.addListener("onClick",function(){if(a._sliding||b._disabled){return}b.fireEvent("onCaptionClick",b);if(b._expandable){a.doSetActiveSection(b,true)}})},createDom:function(){var a=this,e=document.createElement("div"),f=a._sections,d;if(f){for(var c=0,b=f.length;c<b;c++){d=f[c];d.render(e);a.registerInnerControl(d);a.bindAction(d)}}return e},refreshDom:function(d){$invokeSuper.call(this,arguments);var g=this,n=g._sections,m=g._activeSection;if(n&&!m){m=g.changeToAvialableSection()}if(m){$fly(m._dom).addClass("active-section")}var o,a,h=$fly(d).height(),l=g.getVisibleSectionCount();if(n){var k,f,b;for(var e=0,c=n.length;e<c;e++){k=n[e];b=k._doms.container;if(m!=k){$fly(k._dom).removeClass("active-section")}if(typeof o!="number"){o=$fly(k._dom).outerHeight(true)-b.offsetHeight;
a=h-o*l}$fly(b).outerHeight(a,true);f=k._control;if(f){f.set({width:$fly(d).width(),height:a})}}}if(m&&m._control&&!m._control._rendered){m.doRenderControl()}}});dorado.widget.toolbar={};dorado.widget.ToolBar=$extend(dorado.widget.Control,{$className:"dorado.widget.ToolBar",ATTRIBUTES:{className:{defaultValue:"d-toolbar"},height:{independent:true,readOnly:true},items:{setter:function(a,g){var f=this,c=f._items,h=f._rendered,d,b,e;if(c){f.clearItems()}if(!c){f._items=c=new dorado.util.KeyedArray(function(i){return i._id})}if(g){if(g.constructor==Array.prototype.constructor){for(d=0,b=g.length;d<b;d++){e=f.createItem(g[d]);c.insert(e)}if(h){f.doRenderItems()}}else{if(g instanceof dorado.util.KeyedArray){for(d=0,b=g.size;d<b;d++){e=f.createItem(g.get(d));c.append(e)}if(h){f.doRenderItems()}}}}}},fixRight:{defaultValue:false}},createDom:function(){var a=this,b={},c=$DomUtils.xCreateElement({tagName:"div",className:a._className,content:[{tagName:"div",className:"toolbar-left-wrap",contextKey:"toolbarLeftWrap",content:[{tagName:"div",className:"toolbar-left",contextKey:"toolbarLeft"}]},{tagName:"div",className:"toolbar-right",contextKey:"toolbarRight"}]},null,b);
a._doms=b;if(a._fixRight){$fly(c).addClass(a._className+"-fixright")}a.doRenderItems();return c},createItem:function(b){if(!b){return null}if(typeof b=="string"||b.constructor==Object.prototype.constructor){var a=dorado.Toolkits.createInstance("toolbar,widget",b);a._parent=a._focusParent=this;return a}else{b._parent=b._focusParent=this;return b}},insertItem:function(f,c){var e=this,b=e._items;if(!f){return null}if(!b){b=e._items=new dorado.util.KeyedArray(function(h){return h._id})}f=e.createItem(f);if(e._rendered){var d=null,g=e._doms;if(typeof c=="number"){var a=b[c];d=a._dom}b.insert(f,c);f.render(g.toolbarLeft);e.registerInnerControl(f);$fly(f._dom).addClass("d-toolbar-item")}else{b.insert(f,c)}return f},removeItem:function(d){var c=this,a=c._items;if(a&&d!==undefined){var b=d;if(typeof d=="number"){b=a.get(d);a.removeAt(d)}else{a.remove(d)}b.destroy();c.unregisterInnerControl(b)}},clearItems:function(){var e=this,a=e._items,f=false;for(var c=0,b=a.size;c<b;c++){var d=a.get(c);if(!(d instanceof dorado.widget.toolbar.Fill)){e.unregisterInnerControl(d);
d.destroy()}}a.clear()},doRenderItems:function(){var e=this,f=e._doms,a=e._items||{},g=false;for(var c=0,b=a.size;c<b;c++){var d=a.get(c);if(d instanceof dorado.widget.toolbar.Fill){g=true}else{e.registerInnerControl(d);if(!g){d.render(f.toolbarLeft)}else{d.render(f.toolbarRight)}$fly(d._dom).addClass("d-toolbar-item")}}},convertItem:function(b,a){if(b instanceof dorado.widget.toolbar.Button){a.insertItem({caption:b._caption,submenu:b._menu,listener:{onClick:function(){b.fireEvent("onClick",b)}}})}else{if(b instanceof dorado.widget.toolbar.Separator){a.insertItem("-")}}b._visible=false;$fly(b._dom).css("visibility","hidden")},refreshDom:function(a){$invokeSuper.call(this,arguments)},onResize:function(){$invokeSuper.call(this,arguments);var o=this,f=o._dom,b=o._doms,k=o._overflowMenu,n=o._overflowButton,l=o._items,c=b.toolbarLeft.lastChild,d=false;if(l&&c){var a=c.offsetWidth+c.offsetLeft,h=f.offsetWidth-b.toolbarRight.offsetWidth;d=a>h}if(d){$fly(f).addClass(o._className+"-overflow");if(!k){k=o._overflowMenu=new dorado.widget.Menu();
n=o._overflowButton=new dorado.widget.SimpleButton({className:"overflow-button",menu:k});n.render(b.toolbarRight);o.registerInnerControl(n)}else{k.clearItems()}var m=0,p=-1,r,g,e,q;if(o._fixRight){h=f.offsetWidth-b.toolbarRight.offsetWidth;for(g=0,e=l.size;g<e;g++){r=l.get(g);if(r instanceof dorado.widget.toolbar.Fill){break}r._visible=true;$fly(r._dom).css("visibility","");m+=$fly(r._dom).outerWidth(true);if(m>=h){p=g;break}}if(p>-1){for(g=p,e=l.size;g<e;g++){r=l.get(g);if(r instanceof dorado.widget.toolbar.Fill){break}o.convertItem(r,k)}}}else{q=false;for(g=0,e=l.size;g<e;g++){r=l.get(g);if(q){if(r._dom&&(r._dom.parentNode==b.toolbarRight)){b.toolbarLeft.appendChild(r._dom)}}if(r instanceof dorado.widget.toolbar.Fill){q=true}}h=f.offsetWidth-b.toolbarRight.offsetWidth;for(g=0,e=l.size;g<e;g++){r=l.get(g);r._visible=true;$fly(r._dom).css("visibility","");m+=$fly(r._dom).outerWidth(true);if(m>=h){p=g;break}}if(p>-1){for(g=p,e=l.size;g<e;g++){r=l.get(g);if(r instanceof dorado.widget.toolbar.Fill){break
}o.convertItem(r,k)}}}}else{$fly(f).removeClass(o._className+"-overflow");if(!l){return}if(!o._fixRight){q=false;for(g=0,e=l.size;g<e;g++){r=l.get(g);if(q){if(r._dom&&(r._dom.parentNode==b.toolbarLeft)){b.toolbarRight.appendChild(r._dom)}}if(r instanceof dorado.widget.toolbar.Fill){q=true}}}for(g=0,e=l.size;g<e;g++){r=l.get(g);r._visible=true;$fly(r._dom).css("visibility","")}}}});dorado.widget.toolbar.Separator=$extend(dorado.widget.Control,{$className:"dorado.widget.toolbar.Separator",ATTRIBUTES:{className:{defaultValue:"d-toolbar-sep"}},createDom:function(){var a=this,b;b=document.createElement("span");b.className=a._className;return b}});dorado.widget.toolbar.Button=$extend(dorado.widget.Button,{$className:"dorado.widget.toolbar.Button",ATTRIBUTES:{className:{defaultValue:"d-toolbar-button"},items:{getter:function(){if(this._menu){return this._menu.get("items")}return null},setter:function(a,b){if(b.constructor==Array.prototype.constructor){this._menu=new dorado.widget.Menu({items:b})
}}}},createDom:function(){var a=this,b=$invokeSuper.call(a,arguments);$fly(b).mouseenter(function(){var e=a._menu,d=a._parent;if(e&&d){var c=d._activeMenuButton;if(c&&c!=a){d._ignoreMenuHide=true;c._menu.hide(true);a.doShowMenu()}}});return b},doShowMenu:function(){$invokeSuper.call(this,arguments);var a=this,c=a._menu;if(c){var b=a._parent;b._activeMenuButton=a}},doAfterMenuHide:function(){var a=this,b=a._parent;if(b&&!b._ignoreMenuHide){b._activeMenuButton=null}$invokeSuper.call(this,arguments)}});dorado.widget.toolbar.Fill=$extend(dorado.widget.Control,{$className:"dorado.widget.toolbar.Fill"});dorado.widget.toolbar.Label=$extend(dorado.widget.Control,{$className:"dorado.widget.toolbar.Label",ATTRIBUTES:{className:{defaultValue:"d-toolbar-label"},text:{}},createDom:function(){var a=this,b=document.createElement("div");b.className=a._className;$fly(b).text(a._text);return b},refreshDom:function(b){$invokeSuper.call(this,arguments);var a=this;$fly(b).text(a._text)}});dorado.Toolkits.registerPrototype("toolbar",{Default:dorado.widget.toolbar.Button,ToolBarButton:dorado.widget.toolbar.Button,"->":dorado.widget.toolbar.Fill,Fill:dorado.widget.toolbar.Fill,ToolBarLabel:dorado.widget.toolbar.Label,"-":dorado.widget.toolbar.Separator,"|":dorado.widget.toolbar.Separator,Separator:dorado.widget.toolbar.Separator});
dorado.widget.FloatContainer=$extend([dorado.widget.Container,dorado.widget.FloatControl],{$className:"dorado.widget.FloatContainer",focusable:true,ATTRIBUTES:{visible:{defaultValue:false}}});dorado.widget.FloatPanel=$extend([dorado.widget.Panel,dorado.widget.FloatControl],{$className:"dorado.widget.FloatPanel",focusable:true,ATTRIBUTES:{className:{defaultValue:"d-float-panel"},closeable:{defaultValue:true,setter:function(a,e){var b=this,d=b._captionBar,c;b._closeable=e;if(d){if(e){c=d.getButton(b._id+"_close");if(c){$fly(c._dom).css("display","")}else{b._createCloseButton()}}else{c=d.getButton(b._id+"_close");if(c){$fly(c._dom).css("display","none")}}}}},closeAction:{defaultValue:"hide"},visible:{defaultValue:false}},EVENTS:{beforeClose:{},onClose:{}},createDom:function(){var a=this,b=$invokeSuper.call(this,arguments);if(a._closeable){a._createCloseButton()}return b},_createCloseButton:function(){var a=this,b=a._captionBar;if(b){b.addButton(new dorado.widget.SimpleButton({id:a._id+"_close",listener:{onClick:function(){a.close()
}},className:"d-close-button"}))}},close:function(){var a=this,b={};a.fireEvent("beforeClose",a,b);if(b.processDefault===false){return}a.hide();a.fireEvent("onClose",a);if(a._closeAction=="close"){a.destroy()}},doShow:function(){var a=this,b=a._doms;$fly([b.contentPanel,b.buttonPanel]).css("display","");$invokeSuper.call(this,arguments)},doAfterShow:function(){var a=this;a._minimized=false;$invokeSuper.call(this,arguments)}});(function(){var a={"dialog-header-left":{cursor:"nw-resize",horiStyle:"left width",vertStyle:"top height",widthRatio:-1,heightRatio:-1},"dialog-header-right":{cursor:"ne-resize",horiStyle:"width",vertStyle:"top height",widthRatio:1,heightRatio:-1},"dialog-header-center":{cursor:"n-resize",horiStyle:"",vertStyle:"top height",widthRatio:1,heightRatio:-1},"dialog-body-left":{cursor:"w-resize",horiStyle:"left width",vertStyle:"",widthRatio:-1,heightRatio:1},"dialog-body-right":{cursor:"e-resize",horiStyle:"width",vertStyle:"",widthRatio:1,heightRatio:1},"dialog-footer-left":{cursor:"sw-resize",horiStyle:"left width",vertStyle:"height",widthRatio:-1,heightRatio:1},"dialog-footer-right":{cursor:"se-resize",horiStyle:"width",vertStyle:"height",widthRatio:1,heightRatio:1},"dialog-footer-center":{cursor:"s-resize",horiStyle:"",vertStyle:"height",widthRatio:1,heightRatio:1}};
dorado.widget.DialogGroup=$class({$className:"dorado.widget.DialogGroup",constructor:function(){this._dialogCollection=new dorado.util.KeyedArray(function(b){return b._id});this._activeDialog=null},bringToFront:function(b){this._activeDialog=b},sendToBack:function(b){if(b==this._activeDialog){this._activeDialog=null}},getActiveDialog:function(){return this._activeDialog},getDialog:function(b){return this._dialogCollection.get(b)},register:function(b){this._dialogCollection.insert(b)},unregister:function(b){this._dialogCollection.remove(b)},hideAll:function(){var e=this._dialogCollection;for(var d=0,b=e.size;d<b;d++){var c=e.get(d);c.minimize()}}});dorado.widget.DialogManager=new dorado.widget.DialogGroup();dorado.widget.Dialog=$extend(dorado.widget.FloatPanel,{$className:"dorado.widget.Dialog",focusable:true,ATTRIBUTES:{className:{defaultValue:"d-dialog"},minWidth:{defaultValue:200},minHeight:{defaultValue:100},draggable:{defaultValue:true},resizeable:{defaultValue:true},maximizeable:{defaultValue:false,setter:function(b,f){var d=this,e=d._captionBar,c;
d._maximizeable=f;if(e){if(f){c=e.getButton(d._id+"_maximize");if(c){$fly(c._dom).css("display","")}else{d._createMaximizeButton()}}else{c=e.getButton(d._id+"_maximize");if(c){$fly(c._dom).css("display","none")}}}}},maximized:{},maximizeTarget:{},minimizeable:{defaultValue:false,setter:function(b,f){var d=this,e=d._captionBar,c;d._minimizeable=f;if(e){if(f){c=e.getButton(d._id+"_minimize");if(c){$fly(c._dom).css("display","")}else{d._createMinimizeButton()}}else{c=e.getButton(d._id+"_minimize");if(c){$fly(c._dom).css("display","none")}}}}},minimized:{},shadowMode:{defaultValue:"frame",skipRefresh:true}},EVENTS:{beforeMaximize:{},onMaximize:{},beforeMinimize:{},onMinimize:{}},setFocus:function(){var b=this;if(b._rendered){b._dom.focus()}},applyDraggable:function(){},maximizeRestore:function(){var c=this,e=c._dom,d=c._doms;if(e){$fly(d.contentPanel).css("display","");if(c._maximized){c._maximized=false;c._width=c._originalWidth;c._height=c._originalHeight;c._left=c._originalLeft;c._top=c._originalTop;
c.resetDimension();c.refresh();var b=$fly(e);if(c._resizeable){b.addClass("d-dialog-resizeable").find(".dialog-resize-handle").draggable("enable")}if(c._draggable){b.addClass("d-dialog-draggable").draggable("enable")}}}},maximize:function(){var d=this,f=d._dom;if(f){var g={};d.fireEvent("beforeMaximize",d,g);if(g.processDefault===false){return}d._maximized=true;d._originalWidth=d._width;d._originalHeight=d._height;d._originalLeft=d._left;d._originalTop=d._top;var c=d._maximizeTarget;if(typeof c=="String"){c=jQuery(c)[0]}else{if(c&&dorado.Object.isInstanceOf(c,dorado.RenderableElement)){c=c._dom}}if(c){d._width=$fly(c).outerWidth(true);d._height=$fly(c).outerHeight(true)}else{d._width=$fly(window).width();d._height=$fly(window).height()}d.resetDimension();var e=$fly(c).offset()||{left:0,top:0};d._left=e.left;d._top=e.top;var b=$fly(f);b.css(e);if(d._resizeable){b.removeClass("d-dialog-resizeable").find(".dialog-resize-handle").draggable("disable")}if(d._draggable){b.removeClass("d-dialog-draggable").draggable("disable")
}d.fireEvent("onMaximize",d)}},minimize:function(){var b=this,c=b._dom;if(c){var d={};b.fireEvent("beforeMinimize",b,d);if(d.processDefault){return}b._minimized=true;b.hide();b.fireEvent("onMinimize",b)}},doSetCollapsed:function(c){$invokeSuper.call(this,arguments);var b=this;if(b._resizeable){if(c){$fly(b._dom).removeClass("d-dialog-resizeable").find(".dialog-resize-handle").draggable("disable")}else{$fly(b._dom).addClass("d-dialog-resizeable").find(".dialog-resize-handle").draggable("enable")}}},doOnResize:function(e){var j=this,f=j._dom,b=j._doms,l=j.getRealHeight(),c=j.getRealWidth();if(typeof c=="string"){if(c.indexOf("%")==-1){c=parseInt(c,10)}else{c=jQuery(window).width()*parseInt(c.replace("%",""),10)/100}}if(typeof l=="string"){if(l.indexOf("%")==-1){l=parseInt(l,10)}else{l=jQuery(window).height()*parseInt(l.replace("%",""),10)/100}}if(typeof l=="number"&&l>0){if(e===undefined){e=j._collapsed}if(e){$fly(f).height("auto")}else{var g,h=$fly(b.header).outerHeight(true),k=$fly(b.footer).outerHeight(true),i=$fly(b.captionBar).outerHeight(true),d=$fly(b.buttonPanel).outerHeight(true);
g=$fly(f).height();$fly(b.contentPanel).outerHeight(l-h-k-i-d);if(dorado.Browser.msie&&dorado.Browser.version==6){$fly(b.bodyWrap).css("zoom",1)}}}else{$fly(b.contentPanel).css("height","");if(dorado.Browser.msie&&dorado.Browser.version==6){$fly(b.bodyWrap).css("zoom",1)}}$fly(f).css("height","");if(typeof c=="number"&&c>0){$fly(f).outerWidth(c)}},_createMaximizeButton:function(){var b=this,c=b._captionBar;if(c){c.addButton(new dorado.widget.SimpleButton({id:b._id+"_maximize",className:"d-maximize-button",listener:{onClick:function(){if(!b._maximized){b.maximize()}else{b.maximizeRestore()}}}}),b._id+"_close")}},_createMinimizeButton:function(){var b=this,c=b._captionBar;if(c){c.addButton(new dorado.widget.SimpleButton({id:b._id+"_minimize",className:"d-minimize-button",listener:{onClick:function(){if(!b._minimized){b.minimize()}}}}),0)}},createDom:function(){var b=this,d={},g=$DomUtils.xCreateElement({tagName:"div",className:b._className,style:{visibility:b._visible?"visible":"hidden"},content:[{tagName:"div",className:"dialog-header",contextKey:"header",content:[{tagName:"div",className:"dialog-header-left dialog-resize-handle",contextKey:"headerLeft"},{tagName:"div",className:"dialog-header-right dialog-resize-handle",contextKey:"headerRight"},{tagName:"div",className:"dialog-header-center dialog-resize-handle",contextKey:"headerCenter"}]},{tagName:"div",className:"dialog-body-wrap",contextKey:"bodyWrap",content:[{tagName:"div",className:"dialog-body-left dialog-resize-handle",contextKey:"bodyLeft"},{tagName:"div",className:"dialog-body-right dialog-resize-handle",contextKey:"bodyRight"},{tagName:"div",className:"dialog-body",contextKey:"body",content:{tagName:"div",className:"content-panel",contextKey:"contentPanel"}}]},{tagName:"div",className:"dialog-footer",contextKey:"footer",content:[{tagName:"div",className:"dialog-footer-left dialog-resize-handle",contextKey:"footerLeft"},{tagName:"div",className:"dialog-footer-right dialog-resize-handle",contextKey:"footerRight"},{tagName:"div",className:"dialog-footer-center dialog-resize-handle",contextKey:"footerCenter"}]}]},null,d);
b._doms=d;var c=b._captionBar=new dorado.widget.CaptionBar({className:"d-dialog-caption-bar",caption:b._caption,icon:b._icon});b.registerInnerControl(c);c.render(d.body.parentNode,d.body);d.captionBar=c._dom;$DomUtils.disableUserSelection(d.captionBar);b.initButtons();if(b._minimizeable){b._createMinimizeButton()}if(b._maximizeable){b._createMaximizeButton()}if(b._closeable){b._createCloseButton()}if(b._collapseable){b._createCollapseButton()}if(b._draggable){$fly(g).addClass("d-dialog-draggable").css("position","absolute").draggable({addClasses:false,handle:".d-dialog-caption-bar",cursor:"move",containment:"parent",start:function(){$fly(g).addClass("d-dialog-dragging").disableShadow()},stop:function(){$fly(g).removeClass("d-dialog-dragging").enableShadow();b._left=parseInt($fly(g).css("left"),10);b._top=parseInt($fly(g).css("top"),10)}})}if(b._resizeable){var f,e;$fly(g).addClass("d-dialog-resizeable").find(".dialog-resize-handle").each(function(i,k){var j=k.className.split(" ")[0],h=a[j];
if(!h){return}$fly(k).draggable({cursor:h.cursor,addClasses:false,containment:"window",helper:function(){var l=document.createElement("div");l.className="d-dialog-drag-proxy";l.style.position="absolute";$fly(l).bringToFront();document.body.appendChild(l);return l},start:function(m,n){var l=$fly(g);f=l.offset();e=[l.width(),l.height()];jQuery(n.helper).outerWidth(e[0]).outerHeight(e[1]).css("cursor",h.cursor)},drag:function(m,u){var l=h.horiStyle,p=h.vertStyle,s=h.heightRatio,t=h.widthRatio,n=b._minWidth||200,w=b._minHeight||100;u.position={left:$fly(g).offset().left,top:$fly(g).offset().top};var r=jQuery.data(this,"draggable"),x=m.pageX-r.originalPageX,q=m.pageY-r.originalPageY,o,v;if(l.indexOf("width")!=-1){o=e[0]+t*x;if(o>=n){jQuery(u.helper).width(o)}}if(p.indexOf("height")!=-1){v=e[1]+s*q;if(v>=w){jQuery(u.helper).height(v)}}if(l.indexOf("left")!=-1){if(o>=n){u.position.left=f.left+x}else{u.position.left=jQuery(u.helper).offset().left}}if(p.indexOf("top")!=-1){if(v>=w){u.position.top=f.top+q
}else{u.position.top=jQuery(u.helper).offset().top}}},stop:function(n,o){var m=o.helper,l=jQuery(m),p=l.offset();b._left=p.left;b._top=p.top;b._width=l.width();b._height=l.height();b.resetDimension();$fly(b._dom).css(p)}})})}return g},getShowPosition:function(c){var b=this;if(b._maximized){return{left:0,top:0}}else{return $invokeSuper.call(b,arguments)}},refreshDom:function(c){var b=this;$invokeSuper.call(b,arguments);if(!b._maximized){$fly(c).css({left:b._left||0,top:b._top||0})}}})})();(function(){var e="menu-item-disabled",c="checked-icon",b="unchecked-icon",a="has-subgroup",d="menu-item-hover";dorado.widget.menu={};dorado.widget.menu.AbstractMenuItem=$extend([dorado.RenderableElement,dorado.EventSupport],{$className:"dorado.widget.menu.AbstractMenuItem",ATTRIBUTES:{parent:{},name:{},visible:{defaultValue:true,setter:function(f,h){var g=this,i=g._dom;g._visible=h;if(i){i.style.display=h?"":"none"}}},userData:{}},constructor:function(f){$invokeSuper.call(this,arguments);if(f){this.set(f)
}},getListenerScope:function(){if(this._parent&&this._parent._view){return this._parent._view}return this}});dorado.widget.menu.Separator=$extend(dorado.widget.menu.AbstractMenuItem,{$className:"dorado.widget.menu.Separator",ATTRIBUTES:{className:{defaultValue:"menu-item-separator"}},createDom:function(){var f=this,g=document.createElement("li");g.className=f._className;g.style.display=f._visible?"":"none";return g},refreshDom:function(g){var f=this;if(g){g.style.display=f._visible?"":"none"}}});dorado.widget.menu.TextMenuItem=$extend([dorado.widget.menu.AbstractMenuItem,dorado.widget.ActionSupport],{$className:"dorado.widget.menu.TextMenuItem",ATTRIBUTES:{hideOnClick:{defaultValue:true},className:{defaultValue:"menu-item"},disabled:{},caption:{},icon:{},iconClass:{}},EVENTS:{onClick:{}},refreshDom:function(l){var i=this,k=i._action||{},h=i._disabled||k._disabled,g=i._icon||k._icon,f=i._iconClass||k._iconClass,j=i._doms;$fly(l)[h?"addClass":"removeClass"](e).css("display",i._visible?"":"none");
$fly(j.caption).text(i._caption||k._caption);if(g){$DomUtils.setBackgroundImage(j.icon,g)}else{$fly(j.icon).css("background-image","")}$fly(j.icon).attr("className","icon");if(f){$fly(j.icon).addClass(f)}},createDom:function(){var h=this,j=h._action||{},i={},k=$DomUtils.xCreateElement({tagName:"li",className:"menu-item",content:{tagName:"span",className:"menu-item-content",contextKey:"itemContent",content:[{tagName:"span",className:"icon",contextKey:"icon",content:"&nbsp;"},{tagName:"span",className:"caption",content:h._caption||j._caption,contextKey:"caption"}]}},null,i),g=h._disabled||j._disabled,f=h._icon||j._icon;h._doms=i;$fly(k).css("display",h._visible?"":"none").addClass(g?e:"").hover(function(){h._parent.focusItem(h,true)},dorado._NULL_FUNCTION);if(f){$DomUtils.setBackgroundImage(i.icon,f)}else{$fly(i.icon).css("background-image","")}return k},hideTopMenu:function(){var f=this;if(f._parent){f._parent.hideTopMenu()}}});dorado.widget.menu.ControlMenuItem=$extend(dorado.widget.menu.TextMenuItem,{$className:"dorado.widget.menu.ControlMenuItem",focusable:true,ATTRIBUTES:{control:{}},createDom:function(){var f=this,g=$invokeSuper.call(this,arguments);
$fly(g).click(function(h){f.onClick(h)}).addClass(f._control?a:"");return g},hideControl:function(){var f=this;if(f._control){f._control.hide()}},onSelect:function(){var f=this;f.hideControl();f.hideTopMenu()},onClick:function(){},onFocus:function(){var f=this,g=f._dom;$fly(g).addClass(d);if(f._control){f._control.show({anchorTarget:f,align:"right",vAlign:"innertop",delay:300,onHide:function(h){h.opener=null}});f._control._focusParent=f._parent;f._control.opener=f}},onBlur:function(){var f=this,g=f._dom;$fly(g).removeClass(d);if(f._control){f._control.hide()}}});dorado.widget.menu.MenuItem=$extend(dorado.widget.menu.TextMenuItem,{$className:"dorado.widget.menu.MenuItem",focusable:true,ATTRIBUTES:{submenu:{setter:function(f,g){if(!g){this._submenu=null}else{if(g.constructor==Object.prototype.constructor){this._submenu=new dorado.widget.Menu(g)}else{if(g instanceof dorado.widget.Menu){this._submenu=g}}}var h=this._dom;if(h){$fly(h)[this._submenu?"addClass":"removeClass"](a)}}},items:{getter:function(){if(this._submenu){return this._submenu.get("items")
}return null},setter:function(f,g){if(g.constructor==Array.prototype.constructor){this._submenu=new dorado.widget.Menu({items:g})}}}},hasSubmenu:function(){return !!this._submenu},insertItem:function(i,f){var h=this,g=h._submenu;if(i){if(!g){this._submenu=g=new dorado.widget.Menu()}g.insertItem(i,f)}},removeItem:function(h){var g=this,f=g._submenu;if(h!=null&&f){f.removeItem(h)}},clearItems:function(){var g=this,f=g._submenu;if(f){f.clearItems()}},onFocus:function(f){var g=this,h=g._dom;$fly(h).addClass(d);if(g._submenu&&f){g.showSubmenu()}},onBlur:function(){var f=this,g=f._dom;$fly(g).removeClass(d);if(f._submenu){f.hideSubmenu()}},showSubmenu:function(h){var g=this,f=g._submenu;if(f){f.show({anchorTarget:g,align:"right",vAlign:"innertop",delay:300,focusFirst:h});f._focusParent=g._parent}},onClick:function(h){var g=this,i=g._action||{},f=g._disabled||i._disabled;if(!f){if(g.hasSubmenu()){i.execute&&i.execute();g.fireEvent("onClick",g);h.stopImmediatePropagation()}else{i.execute&&i.execute();
g.fireEvent("onClick",g);if(g._hideOnClick){g._parent.hideTopMenu()}}}},hideSubmenu:function(){var f=this._submenu;if(f){f.hide()}},createDom:function(){var f=this,g=$invokeSuper.call(this,arguments);$fly(g).click(function(h){f.onClick(h)}).addClass(f.hasSubmenu()?a:"");return g}});dorado.widget.menu.CheckGroupManager={groups:{},addCheckItem:function(j,h){if(!j||!h){return}var g=this,f=g.groups,i=f[j];if(!i){i=f[j]={current:null,items:[]}}i.items.push(h);if(h._checked){dorado.widget.menu.CheckGroupManager.setGroupCurrent(j,h)}},removeCheckItem:function(j,h){if(!j||!h){return}var g=this,f=g.groups,i=f[j];if(i){if(i.current==h){i.current=null}i.items.remove(h)}},setGroupCurrent:function(k,h){if(!k||!h){return}var g=this,f=g.groups,j=f[k];if(j){var i=j.current;if(i==h){return}if(i instanceof dorado.widget.menu.CheckableMenuItem){i.set("checked",false)}j.current=h}}};dorado.widget.menu.CheckableMenuItem=$extend(dorado.widget.menu.MenuItem,{$className:"dorado.widget.menu.CheckableMenuItem",ATTRIBUTES:{checked:{setter:function(f,h){var g=this;
if(h&&g._group){dorado.widget.menu.CheckGroupManager.setGroupCurrent(g._group,g)}g._checked=h}},group:{setter:function(f,i){var h=this,g=h._group;if(g){dorado.widget.menu.CheckGroupManager.removeCheckItem(g,h)}if(i){dorado.widget.menu.CheckGroupManager.addCheckItem(i,h)}h._group=i}}},EVENTS:{onCheckedChange:{}},refreshDom:function(g){$invokeSuper.call(this,arguments);var f=this;if(f._dom){if(f._checked){$fly(f._doms.icon).removeClass(b).addClass(c)}else{$fly(f._doms.icon).removeClass(c).addClass(b)}}},onClick:function(){var h=this,g=h._parent,i=h._action||{},f=h._disabled||i._disabled;if(!f){if(h.hasSubmenu()){h.fireEvent("onClick",h)}else{h.fireEvent("onClick",h);if(h._hideOnClick){g.hideTopMenu()}}h.set("checked",!h._checked);h.fireEvent("onCheckedChange",h)}},createDom:function(){var f=this,g=$invokeSuper.call(this,arguments);$fly(f._doms.icon).addClass(f._checked?c:b);$fly(g).hover(function(){f._parent.focusItem(f,true)},dorado._NULL_FUNCTION);return g}});dorado.Toolkits.registerPrototype("menu",{"-":dorado.widget.menu.Separator,Separator:dorado.widget.menu.Separator,Checkable:dorado.widget.menu.CheckableMenuItem,Text:dorado.widget.menu.TextMenuItem,Control:dorado.widget.menu.ControlMenuItem,Default:dorado.widget.menu.MenuItem})
})();(function(){var a="group-content",b="d-menu-item-group-overflow";dorado.widget.Menu=$extend([dorado.widget.Control,dorado.widget.FloatControl],{$className:"dorado.widget.Menu",focusable:true,selectable:false,ATTRIBUTES:{className:{defaultValue:"d-menu-item-group"},floatingClassName:{defaultValue:"d-menu-floating"},visible:{defaultValue:false},animateType:{defaultValue:"slide",skipRefresh:true},hideAnimateType:{defaultValue:"fade",skipRefresh:true},iconPosition:{defaultValue:"left"},iconSize:{defaultValue:"normal"},items:{setter:function(g,j){var k=this,h=k._items,c=k._doms,d=k._rendered,m,f,e;if(h){k.clearItems()}if(j){if(!h){k._items=h=new dorado.util.KeyedArray(function(i){return i._name})}if(j.constructor==Array.prototype.constructor){for(f=0,e=j.length;f<e;f++){m=k.createMenuItem(j[f]);h.insert(m);if(d){m.render(c.groupContent)}}}else{if(j instanceof dorado.util.KeyedArray){for(f=0,e=j.size;f<e;f++){m=k.createMenuItem(j.get(f));h.append(m);if(d){m.render(c.groupContent)}}}}}}}},EVENTS:{onHideTopMenu:{}},createMenuItem:function(c){if(!c){return null
}var e=this,d;if(c instanceof dorado.widget.menu.AbstractMenuItem){c._parent=e;d=c}else{d=dorado.Toolkits.createInstance("menu",c);d._parent=e}return d},createOverflowarrow:function(){var f=this,g=f._dom,d=f._doms;if(g){var e=$DomUtils.xCreateElement({tagName:"div",className:"overflow-top-arrow"});var c=$DomUtils.xCreateElement({tagName:"div",className:"overflow-bottom-arrow"});$fly(g).prepend(e);g.appendChild(c);jQuery(e).repeatOnClick(function(){f.doScrollUp()},120).addClassOnHover("overflow-top-arrow-hover");jQuery(c).repeatOnClick(function(){f.doScrollDown()},120).addClassOnHover("overflow-bottom-arrow-hover");d.overflowTopArrow=e;d.overflowBottomArrow=c}},clearOverflow:function(){var d=this,e=d._dom,c=d._doms;if(e){d._overflowing=false;if(dorado.Browser.msie&&dorado.Browser.version==6){$fly(e).css("width","")}$fly(e).css("height","").removeClass(b);$fly(c.groupContent).scrollTop(0).css("height","")}},handleOverflow:function(d){var g=this,h=g._dom,f=g._doms;if(h){$fly(h).addClass(b).outerHeight(d);
if(!f.overflowTopArrow){g.createOverflowarrow()}g._overflowing=true;var e=$fly(h).innerHeight()-$fly(f.overflowTopArrow).outerHeight()-$fly(f.overflowBottomArrow).outerHeight(),c=$fly(h).width();if(dorado.Browser.msie&&dorado.Browser.version==6){$fly(h).width(c);$fly(f.groupContent).outerHeight(e)}else{$fly(f.groupContent).outerHeight(e)}$fly([f.overflowTopArrow,f.overflowBottomArrow]).outerWidth(c)}},clearFocusItem:function(){var c=this,d=c._focusItem;if(d&&d.focusable){d.onBlur()}c._focusItem=null},getFocusableItem:function(g){var k=this,h=k._items,c=k._focusItem,d=-1,m=null,f,e,l;if(!h){return null}g=g||"next";if(c){d=h.indexOf(c)}if(g=="next"){for(f=d+1,e=h.size;f<e;f++){l=h.get(f);if(!l._disabled&&l._visible&&!(l instanceof dorado.widget.menu.Separator)){m=l;break}}if(m==null){g="first"}else{return m}}else{if(g=="prev"){for(f=d-1;f>=0;f--){l=h.get(f);if(!l._disabled&&l._visible&&!(l instanceof dorado.widget.menu.Separator)){m=l;break}}if(m==null){g="last"}else{return m}}}if(g=="first"){for(f=0,e=h.size;
f<e;f++){l=h.get(f);if(!l._disabled&&l._visible&&!(l instanceof dorado.widget.menu.Separator)){m=l;break}}return m}else{if(g=="last"){for(f=h.size-1;f>=0;f--){l=h.get(f);if(!l._disabled&&l._visible&&!(l instanceof dorado.widget.menu.Separator)){m=l;break}}return m}}},focusItem:function(n,l){var k=this,c=k._focusItem;if(n&&c!==n){k._focusItem=n;if(k._overflowing){var i=n._dom,d=k._doms,e=$fly(d.groupContent).attr("scrollTop"),m=$fly(d.groupContent).attr("offsetTop"),o=i.offsetTop,f=i.offsetHeight,h=o+f,j=$fly(d.groupContent).innerHeight(),g=j+e;if(!dorado.Browser.msie){o=o-m;h=o+f}if(o<e){$fly(d.groupContent).attr("scrollTop",o)}else{if(h>g){$fly(d.groupContent).attr("scrollTop",h-j)}}}if(c&&c.focusable){c.onBlur()}if(!n._disabled){n.onFocus(l)}}},insertItem:function(f,e){var h=this,d=h._items,g=h._doms,c;d=h._items=d?h._items:new dorado.util.KeyedArray(function(i){return i._name});if(f.constructor==Object.prototype.constructor||typeof f=="string"){f=h.createMenuItem(f)}else{f._parent=h}if(typeof e=="number"){d.insert(f,e);
c=d.get(e+1)}else{if(e instanceof dorado.widget.menu.AbstractMenuItem){c=d.indexOf(e);if(e!=-1){d.insert(f,e)}else{throw new dorado.ResourceException("dorado.base.ItemNotInGroup")}}else{d.insert(f)}}if(h._rendered){f.render(g.groupContent,c?c._dom:null)}h.refresh()},getItem:function(d){var e=this,c=e._items;if(c){if(typeof d=="number"||typeof d=="string"){return c.get(d)}else{return d}}return null},findItem:function(n){var l=this,g=l._items,m,h,d,c;if(!g){return null}if(typeof n=="string"){var f=n.indexOf("/"),e,k;if(f!=-1){e=n.substring(0,f);k=n.substring(f+1)}else{e=n}if(k){for(d=0,c=g.size;d<c;d++){m=g.get(d);if(m._name==e){h=m._submenu;if(h){return h.findItem(k)}}}}else{for(d=0,c=g.size;d<c;d++){m=g.get(d);if(m._name==e){return m}}return null}}return null},removeItem:function(d){var e=this,c=e._items,f;if(c){if(typeof d=="number"||typeof d=="string"){d=c.get(d)}if(d){c.remove(d);f=d._dom;if(f){$fly(f).remove()}return d}}e.refresh();return null},clearItems:function(l){var k=this,h=k._items,d;
if(h){var c=h.items;for(var f=0,e=c.length;f<e;f++){var m=c[0];d=m._dom;if(l&&m instanceof dorado.widget.menu.MenuItem){var g=m._submenu;if(g){g.clearItems(l);g.destroy()}}if(d){$fly(d).remove()}h.removeAt(0)}k.refresh()}},hideTopMenu:function(){var e=this,d=e.opener,c;if(e._floating){e.hide();e.fireEvent("onHideTopMenu",e);if(d){c=d._parent;c.hideTopMenu()}}},doScrollUp:function(){var g=this,e=g._doms,d=e.groupContent,c=$fly(d).scrollTop(),f=c-22;if(f>=0){$fly(d).scrollTop(f)}else{$fly(d).scrollTop(0)}},doScrollDown:function(){var h=this,f=h._doms,e=f.groupContent,c=$fly(e).scrollTop(),g=c+22,d=$fly(e).attr("scrollHeight");if(g<=d){$fly(e).scrollTop(g)}else{$fly(e).scrollTop(d-$fly(e).innerHeight())}},doOnBlur:function(){if(this._floating){this.hide()}else{this.clearFocusItem()}},doOnKeyDown:function(d){var e=this,c,f;switch(d.keyCode){case 37:if(e){c=e.opener;if(c){c.hideSubmenu&&c.hideSubmenu()}}break;case 38:e.focusItem(e.getFocusableItem("prev"));break;case 39:if(e._focusItem){e._focusItem.showSubmenu&&e._focusItem.showSubmenu(true)
}break;case 40:e.focusItem(e.getFocusableItem("next"));break;case 13:f=e._focusItem;if(f){f.onClick&&f.onClick()}return false;case 27:e.hideTopMenu();break}},createDom:function(){var f=this,e={},g=$DomUtils.xCreateElement({tagName:"div",className:f._className,content:{tagName:"ul",className:"group-content",contextKey:"groupContent"}},null,e),c=f._items;f._doms=e;var d=e.groupContent;if(c){c.each(function(h){h.render(d)})}$fly(g).hover(dorado._NULL_FUNCTION,function(){var h=f._focusItem;if(h){if(h instanceof dorado.widget.menu.MenuItem){if(!h._submenu){f.clearFocusItem()}}else{if(h instanceof dorado.widget.menu.ControlMenuItem){if(!h._control){f.clearFocusItem()}}else{f.clearFocusItem()}}}}).click(function(h){h.stopImmediatePropagation()});$fly(d).mousewheel(function(h,i){if(f._overflowing){if(i<0){f.doScrollDown()}else{if(i>0){f.doScrollUp()}}}});if(f._iconPosition=="top"){$fly(g).addClass(f._className+"-icon-top")}return g},refreshDom:function(e){$invokeSuper.call(this,arguments);var l=this,c=l._doms,h=$fly(c.groupContent).outerHeight();
if(h>e.offsetHeight){l.handleOverflow()}else{}var k=l._items||{},d=0;for(var g=0,f=k.size;g<f;g++){var m=k.get(g);if(m._visible===false){continue}d++}if(d==0){if(!l._noContentEl){l._noContentEl=document.createElement("div");l._noContentEl.className="no-content-group";l._noContentEl.innerHTML="&lt;empty panel&gt;";e.appendChild(l._noContentEl)}$fly(e).addClass(l._className+"-no-content")}else{if(l._noContentEl){$fly(e).removeClass(l._className+"-no-content")}}},getShowPosition:function(e){var h=this,f=e.anchorTarget,g=h._dom,d,c;e=e||{};e.overflowHandler=function(i){h.handleOverflow(i)};if(f&&f instanceof dorado.widget.menu.MenuItem){d=f._dom;h.opener=f;h._focusParent=f._parent;c=$DomUtils.dockAround(g,d,e);return c}else{return $invokeSuper.call(this,arguments)}},doAfterShow:function(c){var e=this,f=(c||{}).focusFirst;if(f){var d=e.getFocusableItem("first");if(d){e.focusItem(d)}}$invokeSuper.call(this,arguments)},doAfterHide:function(){var d=this,c=d._dom;if(!c){return}d.clearFocusItem();
if(c){if(d._overflowing){d.clearOverflow()}}d.opener=null;$invokeSuper.call(this,arguments)}})})();(function(){var a=["|<","<",">",">|","goto","+","-","x","|"];var b=["goto","+","-","x"];dorado.widget.DataPilot=$extend([dorado.widget.Control,dorado.widget.DataControl],{$className:"dorado.widget.DataPilot",ATTRIBUTES:{className:{defaultValue:"d-data-pilot"},itemCodes:{defaultValue:"pages",setter:function(g,f){if(this._itemCodes!=f){this._itemCodes=f;this.compileItemCodes(f)}}},height:{independent:true,readOnly:true}},EVENTS:{onSubControlRefresh:{},onSubControlAction:{}},filterDataSetMessage:function(h,g,i){var f=true;switch(h){case dorado.widget.DataSet.MESSAGE_DATA_CHANGED:case dorado.widget.DataSet.MESSAGE_DELETED:case dorado.widget.DataSet.MESSAGE_INSERTED:f=false;break}return f},processDataSetMessage:function(g,f,h){switch(g){case dorado.widget.DataSet.MESSAGE_REFRESH:this.refresh(true);break;case dorado.widget.DataSet.MESSAGE_CURRENT_CHANGED:this.refresh(true);break;case dorado.widget.DataSet.MESSAGE_REFRESH_ENTITY:case dorado.widget.DataSet.MESSAGE_ENTITY_STATE_CHANGED:this.refresh(true);
break}},getBindingData:function(g){var f={firstResultOnly:true,acceptAggregation:true};if(typeof g=="String"){f.loadMode=g}else{dorado.Object.apply(f,g)}return $invokeSuper.call(this,[f])},refreshDom:function(m){$invokeSuper.call(this,arguments);if(this._currentItemCodeExpression===undefined){this.compileItemCodes()}if(this._itemCodeExpression!=this._currentItemCodeExpression){this._currentItemCodeExpression=this._itemCodeExpression||null;var j=this._itemObjects,l=j;if(j){for(var k in j){var h=j[k];h.unrender();this.unregisterInnerControl(h)}}this._itemObjects=j={};var g=this._compiledItemCodes;if(g){for(var f=0;f<g.length;f++){var n=g[f];var h=l?l[n.key]:null;if(!h){h=this.createItem(n)}h.render(m);this.registerInnerControl(h);j[n.key]=h}}}this.refreshItems()},createItem:function(i){function g(j,k){var l={code:j,control:k,processDefault:true};this.fireEvent("onSubControlAction",this,l);return l.processDefault}var f,h=this;switch(i.code){case"|<":f=new d({icon:i.showIcon?"url(>skin>common/icons.gif) 0px -220px":null,caption:i.showCaption?$resource("dorado.baseWidget.DataPilotFirstPage"):null,onClick:function(j){if(!g.call(h,i.code,j)){return
}var k=h.getBindingData();if(k instanceof dorado.EntityList){k.firstPage(dorado._NULL_FUNCTION)}}});break;case"<":f=new d({icon:i.showIcon?"url(>skin>common/icons.gif) -40px -220px":null,caption:i.showCaption?$resource("dorado.baseWidget.DataPilotPrevousPage"):null,onClick:function(){if(!g.call(h,i.code,self)){return}var j=h.getBindingData();if(j instanceof dorado.EntityList){j.previousPage(dorado._NULL_FUNCTION)}}});break;case">":f=new d({icon:i.showIcon?"url(>skin>common/icons.gif) -60px -220px":null,caption:i.showCaption?$resource("dorado.baseWidget.DataPilotNextPage"):null,onClick:function(){if(!g.call(h,i.code,self)){return}var j=h.getBindingData();if(j instanceof dorado.EntityList){j.nextPage(dorado._NULL_FUNCTION)}}});break;case">|":f=new d({icon:i.showIcon?"url(>skin>common/icons.gif) -100px -220px":null,caption:i.showCaption?$resource("dorado.baseWidget.DataPilotLastPage"):null,onClick:function(){if(!g.call(h,i.code,self)){return}var j=h.getBindingData();if(j instanceof dorado.EntityList){j.lastPage(dorado._NULL_FUNCTION)
}}});break;case"goto":f=new e({onAction:function(k,j){if(!g.call(h,i.code,k)){return}var l=h.getBindingData();if(l instanceof dorado.EntityList){l.gotoPage(j.pageNo,dorado._NULL_FUNCTION)}}});break;case"+":f=new c({icon:i.showIcon?"url(>skin>common/icons.gif) -120px 0px":null,caption:i.showCaption?$resource("dorado.baseWidget.DataPilotInsert"):null,onClick:function(){if(!g.call(h,i.code,self)){return}var j=h.getBindingData();if(j instanceof dorado.EntityList){j.createChild()}}});break;case"-":f=new c({icon:i.showIcon?"url(>skin>common/icons.gif) -140px 0px":null,caption:i.showCaption?$resource("dorado.baseWidget.DataPilotDelete"):null,onClick:function(){if(!g.call(h,i.code,self)){return}dorado.MessageBox.confirm($resource("dorado.baseWidget.DataPilotDeleteConfirm"),function(){var j=h.getBindingData();if(j instanceof dorado.EntityList&&j.current){j.current.remove()}})}});break;case"x":f=new c({icon:i.showIcon?"url(>skin>common/icons.gif) -280px -220px":null,caption:i.showCaption?$resource("dorado.baseWidget.DataPilotCancel"):null,onClick:function(){if(!g.call(h,i.code,self)){return
}dorado.MessageBox.confirm($resource("dorado.baseWidget.DataPilotCancelConfirm"),function(){var j=h.getBindingData();if(j instanceof dorado.EntityList&&j.current){j.current.cancel()}})}});break;case"|":f=new dorado.widget.toolbar.Separator();break}if(f){f.set("style","float: left")}return f},compileItemCodes:function(){var l=this._itemCodes;if(l&&l.indexOf("pages")>=0){l=l.replace("pages","|<,<,goto,>,>|")}l=(l||"").split(",");var n=this._compiledItemCodes=[],h="";for(var j=0;j<l.length;j++){var f=l[j],m=f.indexOf("/");var g,k=true,o,p=null;if(m>0){g=f.substring(0,m);var p=f.substring(m+1);k=(p.indexOf("i")>=0);o=(p.indexOf("c")>=0)}else{g=f;o=(b.indexOf(g)>=0)}if(a.indexOf(g)>=0){f={code:g,showIcon:k,showCaption:o,key:g+"/"+(k?"i":"")+(o?"c":"")+j};n.push(f);if(h.length>0){h+=","}h+=f.key}}this._itemCodeExpression=h},refreshItems:function(){if(this._itemObjects){var g=this._compiledItemCodes;if(g){for(var f=0;f<g.length;f++){this.refreshItem(g[f])}}}},refreshItem:function(l){var h=this._itemObjects[l.key];
if(!h){return}var k={code:l.code,control:h,processDefault:true};this.fireEvent("onSubControlRefresh",this,k);if(!k.processDefault){return}var i=this.getBindingData();if(!(i instanceof dorado.EntityList)){i=null}var f=i?i.pageNo:1,g=i?i.pageCount:1;var j=i?i.current:null;switch(l.code){case"|<":h.set("disabled",f<=1);break;case"<":h.set("disabled",f<=1);break;case">":h.set("disabled",f>=g);break;case">|":h.set("disabled",f>=g);break;case"goto":h.set({disabled:g==1,pageNo:f,pageCount:g});break;case"+":h.set("disabled",this._dataSet?this._dataSet._readOnly:true);break;case"-":h.set("disabled",!j||this._dataSet._readOnly);break;case"x":h.set("disabled",!j||(j.state!=dorado.Entity.STATE_MODIFIED&&j.state!=dorado.Entity.STATE_NEW)||this._dataSet._readOnly);break}}});var d=dorado.widget.SimpleIconButton;var c=dorado.widget.toolbar.Button;var e=$extend(dorado.widget.Control,{ATTRIBUTES:{className:{defaultValue:"d-goto-page"},pageNo:{defaultValue:1},pageCount:{defaultValue:1},disabled:{}},EVENTS:{onAction:{interceptor:function(h,g,f){this._pageNo=f.pageNo;
return h(g,f)}}},createDom:function(h){var h=document.createElement("SPAN");var f=this;this._labelPrefix=$DomUtils.xCreateElement({tagName:"SPAN",className:"text",style:"float: left"});h.appendChild(this._labelPrefix);var g=this._spinner=new dorado.widget.NumberSpinner({min:1,max:1,value:1,showSpinTrigger:false,trigger:{$type:"Trigger",icon:">skin>base/goto-page.gif",onExecute:function(j,i){g.post();f.fireEvent("onAction",f,{pageNo:g.get("value")})}},onKeyDown:function(j,i){if(i.keyCode==13){g.post();f.fireEvent("onAction",f,{pageNo:g.get("value")})}i.returnValue=true},width:60,style:"float: left; margin-top: 1px"});g.render(h);this.registerInnerControl(g);this._labelSuffix=$DomUtils.xCreateElement({tagName:"SPAN",className:"text",style:"float: left"});h.appendChild(this._labelSuffix);return h},refreshDom:function(h){$invokeSuper.call(this,arguments);var g=this._spinner,f=false;if(this._pageCount!=this._currentPageCount){$fly(this._labelPrefix).text($resource("dorado.baseWidget.DataPilotGotoPagePrefix",this._pageCount));
$fly(this._labelSuffix).text($resource("dorado.baseWidget.DataPilotGotoPageSuffix",this._pageCount));this._currentPageCount=this._pageCount;g.set("max",this._pageCount);f=true}g.set("value",this._pageNo);g.set("readOnly",this._disabled)}})})();dorado.widget.LabelRenderer=$extend(dorado.Renderer,{render:function(b,a){b.innerText=a.text}});dorado.widget.Label=$extend(dorado.widget.Control,{$className:"dorado.widget.Label",ATTRIBUTES:{className:{defaultValue:"d-label"},text:{},renderer:{}},refreshDom:function(a){$invokeSuper.call(this,arguments);(this._renderer||$singleton(dorado.widget.LabelRenderer)).render(a,{text:this._text})}});dorado.widget.DataLabelRenderer=$extend(dorado.Renderer,{render:function(c,a){var b=(a.property&&a.entity!=null)?a.entity.getText(a.property):"";c.innerText=b}});dorado.widget.DataLabel=$extend([dorado.widget.Control,dorado.widget.PropertyDataControl],{$className:"dorado.widget.DataLabel",ATTRIBUTES:{className:{defaultValue:"d-data-label"},width:{defaultValue:100},renderer:{}},processDataSetMessage:function(b,a,c){switch(b){case dorado.widget.DataSet.MESSAGE_REFRESH:case dorado.widget.DataSet.MESSAGE_DATA_CHANGED:case dorado.widget.DataSet.MESSAGE_CURRENT_CHANGED:this.refresh(true);
break}},refreshDom:function(c){$invokeSuper.call(this,arguments);var a=this.getBindingData(true),b;if(a){b=a.timestamp}if(b!=this._timestamp){(this._renderer||$singleton(dorado.widget.DataLabelRenderer)).render(c,{entity:a,property:this._property});this._timestamp=b}}});dorado.widget.AbstractEditor=$extend(dorado.widget.Control,{$className:"dorado.widget.AbstractEditor",focusable:true,ATTRIBUTES:{value:{},entity:{setter:function(b,a){this._entity=a;this.refreshData()}},property:{setter:function(b,a){this._property=a;this.refreshData()}},readOnly:{},supportsDirtyFlag:{defaultValue:true},modified:{readOnly:true}},EVENTS:{beforePost:{},onPost:{},onPostFailed:{}},post:function(a){return this.doPost?this.doPost():false},refreshData:function(){if(this._property&&this._entity){if(this.doRefreshData){this.doRefreshData()}}},doRefreshData:function(){var b=this._property,a=this._entity;this.set("value",(a instanceof dorado.Entity)?a.get(b):a[b]);this.setDirty(false)},doPost:function(){var c=this._property,b=this._entity;
if(c&&b){var a=this.get("value");if(b instanceof dorado.Entity){b.set(c,a);this.setDirty(b.isDirty(c))}else{b[c]=a;this.setDirty(true)}}return true},setDirty:function(a){if(!this._supportsDirtyFlag){return}$fly(this.getDom()).toggleClass(this._className+"-dirty",!!a)}});dorado.widget.AbstractDataEditor=$extend([dorado.widget.AbstractEditor,dorado.widget.PropertyDataControl],{$className:"dorado.widget.AbstractDataEditor",filterDataSetMessage:function(d,c,e){var a=true;switch(d){case dorado.widget.DataSet.MESSAGE_ENTITY_STATE_CHANGED:a=false;break;default:a=$invokeSuper.call(this,arguments)}return a},processDataSetMessage:function(b,a,c){switch(b){case dorado.widget.DataSet.MESSAGE_REFRESH:case dorado.widget.DataSet.MESSAGE_DATA_CHANGED:case dorado.widget.DataSet.MESSAGE_CURRENT_CHANGED:case dorado.widget.DataSet.MESSAGE_ENTITY_STATE_CHANGED:this.refresh(true);break}},getBindingInfo:function(){if(this._bindingInfoCache&&(new Date().getTime()-this._bindingInfoCache.cacheTimestamp)<50){return this._bindingInfoCache
}var c={};var b;var a=c.entity=this.getBindingData("auto");if(a!=null){b=a.dataType;c.timestamp=a.timestamp}if(!b){b=this.getBindingDataType()}c.entityDataType=b;if(b){c.propertyDef=b.getPropertyDef(this._property);c.dataType=c.propertyDef?c.propertyDef.get("dataType"):null}if(c.timestamp==null){c.timestamp=0}c.cacheTimestamp=new Date().getTime();this._bindingInfoCache=c;return c},doPost:function(){var a=false;if(this._property){var c=this.getBindingData(true);if(c){c.set(this._property,this.get("value"));this.timestamp=c.timestamp;a=true}}return a}});dorado.widget.Trigger=$extend(dorado.widget.Component,{$className:"dorado.widget.Trigger",focusable:true,ATTRIBUTES:{className:{writeBeforeReady:true},icon:{writeBeforeReady:true},iconClass:{writeBeforeReady:true,defaultValue:"d-trigger-icon-custom"}},EVENTS:{onExecute:{}},createTriggerButton:function(b){var a=this;var c=new dorado.widget.SimpleIconButton({exClassName:"d-trigger "+(a._className||""),icon:a._icon,iconClass:a._iconClass,onClick:function(){b.onTriggerClick(a)
}});jQuery(c.getDom()).addClassOnClick("d-trigger-down",null,function(){return !b.get("readOnly")});return c},execute:function(a){this.fireEvent("onExecute",this,{editor:a})}});dorado.widget.DropDown=$extend(dorado.widget.Trigger,{$className:"dorado.widget.DropDown",focusable:true,ATTRIBUTES:{iconClass:{defaultValue:"d-trigger-icon-drop"},width:{},minWidth:{defaultValue:20},maxWidth:{},height:{},minHeight:{defaultValue:10},maxHeight:{defaultValue:400},autoOpen:{},postValueOnSelect:{defaultValue:true},opened:{readOnly:true,getter:function(){return !!this._box}},editor:{readOnly:true},box:{readOnly:true}},EVENTS:{onOpen:{},onClose:{},onValueSelect:{}},createDropDownBox:function(a,b){return new dorado.widget.DropDownBox({editor:a,dropDown:b,hideAnimateType:"none"})},initDropDownBox:dorado._NULL_FUNCTION,onEditorFocus:function(a){if(this._autoOpen){$setTimeout(this,function(){this.execute(a)},50)}},onEditorKeyDown:function(b,a){dorado.widget.disableKeyBubble=this._editor;try{return this.doOnEditorKeyPress?this.doOnEditorKeyPress(a):true
}finally{dorado.widget.disableKeyBubble=null}},doOnEditorKeyPress:function(a){var b=true;if(this.get("opened")){switch(a.keyCode){case 27:this.close();b=false;break}}return b},execute:function(a){if(this._skipExecute){return}this._skipExecute=true;$setTimeout(this,function(){delete this._skipExecute},300);(this.get("opened"))?this.close():this.open(a);$invokeSuper.call(this,arguments)},open:function(editor){function getBoxCache(win){var boxCache;try{if(win.dorado){boxCache=win.dorado._DROPDOWN_BOX_CACHE;if(!boxCache){win.dorado._DROPDOWN_BOX_CACHE=boxCache={}}}}catch(e){}return boxCache}if(this._box){this._box.hide()}this._editor=editor;this.fireEvent("onOpen",this,{editor:editor});var dropdown=this,editorDom=editor.getDom();var win=$DomUtils.getOwnerWindow(editorDom)||window;var boxCache=getBoxCache(win);var box=boxCache?boxCache[dorado.id+"$"+this._id]:null;if(!box){box=this.createDropDownBox(editor,dropdown);box.addListener("onDropDownBoxShow",function(){if(dropdown.onDropDownBoxShow){dropdown.onDropDownBoxShow()
}});box.render(win.document.body);if(boxCache){boxCache[dorado.id+"$"+this._id]=box}}this._box=box;box._onBlurListener=function(){dropdown.close()};editor.addListener("onBlur",box._onBlurListener,{once:true});box._focusParent=editor;var boxWidth=this._width||$fly(editorDom).outerWidth();if(boxWidth>this._maxWidth){boxWidth=this._maxWidth}if(boxWidth<this._minWidth){boxWidth=this._minWidth}var boxHeight=this._height||0;if(boxHeight>this._maxHeight){boxHeight=this._maxHeight}if(boxHeight<this._minHeight){boxHeight=this._minHeight}var boxDom=box.getDom(),containerElement=box.getContainerElement();with(boxDom.style){left=-screen.availWidth+"px";top=0;width=boxWidth+"px";height=boxHeight+"px";visibility="hidden";display=""}this.initDropDownBox(box,editor);box.init(editor);if(!this._width){boxWidth=(dorado.Browser.mozilla)?containerElement.firstChild.offsetWidth:containerElement.scrollWidth;if(boxWidth>this._maxWidth){boxWidth=this._maxWidth}if(boxWidth<this._minWidth){boxWidth=this._minWidth
}}if(!this._height){boxHeight=containerElement.scrollHeight;if(boxHeight>this._maxHeight){boxHeight=this._maxHeight}if(boxHeight<this._minHeight){boxHeight=this._minHeight}}boxDom.style.width=boxWidth+"px";boxDom.style.height=boxHeight+"px";box.show({anchorTarget:editor,editor:editor,align:"innerright",vAlign:"bottom"})},close:function(c){var d=this._editor;var f={editor:d,selectedValue:c,processDefault:true};this.fireEvent("onClose",this,f);var e=this._box;if(!e){return}this._box=null;this._editor=null;var a=this;d.removeListener("onBlur",e._onBlurListener);e.hide();if(f.selectedValue!==undefined){this.fireEvent("onValueSelect",this,f);if(f.processDefault&&f.selectedValue!==undefined){var b=d._lastPost;try{c=f.selectedValue;if(c instanceof dorado.Entity||c instanceof dorado.EntityList){c=dorado.Core.clone(c)}d.set("value",c)}finally{d._lastPost=b}if(this._postValueOnSelect){d.post()}}}}});dorado.widget.DropDown.findDropDown=function(b){var a=b.findParent(dorado.widget.DropDownBox);return a?a.get("dropDown"):null
};dorado.widget.DropDownBox=$extend([dorado.widget.Control,dorado.widget.FloatControl],{$className:"dorado.widget.DropDownBox",ATTRIBUTES:{className:{defaultValue:"d-drop-down-box"},showAnimateType:{defaultValue:"safeSlide"},hideAnimateType:{defaultValue:"safeSlide"},visible:{defaultValue:false},editor:{},dropDown:{},control:{writeOnce:true,setter:function(b,a){if(this._control==a){return}this._control=a;if(a){this.registerInnerControl(a)}}}},EVENTS:{onDropDownBoxShow:{}},createDom:function(){return $DomUtils.xCreateElement({tagName:"DIV",style:{position:"absolute",display:"none"},content:{tagName:"DIV",style:{overflow:"visible"}}})},init:function(a){if(this._control){this._control.render(this.getContainerElement())}},getContainerElement:function(){return this.getDom().firstChild},doBeforeShow:function(a){$invokeSuper.call(this,arguments);this.refresh()},doAfterShow:function(a){$invokeSuper.call(this,arguments);this.fireEvent("onDropDownBoxShow",this)},doBeforeHide:function(){$invokeSuper.call(this,arguments);
this._closed=true}});dorado.widget.View.registerDefaultComponent("triggerClear",function(){return new dorado.widget.Trigger({className:"d-trigger-clear",iconClass:"d-trigger-icon-clear",onExecute:function(b,a){a.editor.set("text","")}})});(function(){DropDownFilterTrigger=$extend(dorado.widget.Trigger,{$className:"dorado.widget.DropDownFilterTrigger",ATTRIBUTES:{iconClass:{defaultValue:"d-trigger-icon-filter"}},execute:function(e){var f=this._dropDown;if(f){f.onFilterItems(e.get("text"))}}});DropDownResetFilterTrigger=$extend(dorado.widget.Trigger,{$className:"dorado.widget.DropDownResetFilterTrigger",ATTRIBUTES:{iconClass:{defaultValue:"d-trigger-icon-reset"}},execute:function(e){var f=this._dropDown;if(f){f.onFilterItems()}}});var d;function a(){if(!d){d=new DropDownFilterTrigger()}return d}var b;function c(){if(!b){b=new DropDownResetFilterTrigger()}return b}dorado.widget.RowListDropDown=$extend(dorado.widget.DropDown,{$className:"dorado.widget.RowListDropDown",ATTRIBUTES:{property:{},displayProperty:{},columns:{writeBeforeReady:true},dynaFilter:{},filterOnOpen:{},filterOnTyping:{defaultValue:true},minFilterInterval:{defaultValue:300}},EVENTS:{onFilterItems:{},onFilterItem:{}},getSelectedValue:function(f){var e=f.getCurrentItem();
if(e&&this._property){if(e instanceof dorado.Entity){e=e.get(this._property)}else{e=e[this._property]}}return e},createDropDownBox:function(e,h){var f=$invokeSuper.call(this,arguments);f.set("style",{overflow:"hidden"});var h=this,g;if(this._columns){g=new dorado.widget.Grid({stretchColumnsMode:"stretchableColumns",columns:this._columns,readOnly:true,style:"border: none",onDataRowClick:function(i){h.close(h.getSelectedValue(i))}})}else{g=new dorado.widget.ListBox({width:"100%",property:this._displayProperty||this._property,style:"border: none",onDataRowClick:function(i){h.close(h.getSelectedValue(i))}})}f.set("control",g);return f},initDropDownData:function(k,h){var m=k.get("control");var f=this.getDropDownItems()||[];m.set("items",f);var l=h.get("value"),e=-1;if(f&&l){if(f instanceof Array){if(!this._property){e=f.indexOf(l)}else{for(var g=0;g<f.length;g++){var j=f[g];if(j instanceof dorado.Entity){if(j.get(this._property)==l){e=g;break}}else{if(j[this._property]==l){e=g;break}}}}}}if(e>=0){m.set("currentIndex",e)
}},initDropDownBox:function(h,f){$invokeSuper.call(this,arguments);if(this.initDropDownData){this.initDropDownData(h,f)}var i=h.get("control");if(!this._height){var k=true,g=false,j=i._itemModel.getItemCount();if(this._maxHeight&&(!j||(this._maxHeight/(i._rowHeight+2)>(j+1)))){i.set({scrollMode:"simple"});i.refresh();g=true;var e=$fly(i._dom).outerHeight();if(e<this._maxHeight){k=false}}if(k){i.set({height:this._maxHeight,scrollMode:"viewport"});i.refresh();g=true}if(!g){i.refresh()}}else{i.set({height:this._height,scrollMode:"viewport"});i.refresh()}},onDropDownBoxShow:function(){var g=this.get("box.control");var e=this._editor;if(this._dynaFilter&&e instanceof dorado.widget.AbstractTextEditor){var f=this;var h=this._box._onTextEditedListener=function(){dorado.Toolkits.setDelayedAction(f,"$filterTimeId",function(){delete f._filterTimeId;f.onFilterItems(e.get("text"))},f._minFilterInterval)};var i=e.get("text");if(i&&i.length>0&&this._filterOnOpen){h()}e.addListener("onTextEdit",function(){if(f._filterOnTyping){h()
}})}},open:function(g){$invokeSuper.call(this,arguments);if(this._dynaFilter&&!this._filterOnTyping){var f=g.get("trigger");if(!(f instanceof Array)){f=[f]}var e=c();var h=a();f.insert(e);f.insert(h);e._dropDown=this;h._dropDown=this;g.set("trigger",f)}},close:function(f){var h=this._editor;if(this._dynaFilter&&!this._filterOnTyping){var g=h.get("trigger");if(!(g instanceof Array)){g=[g]}var e=c();var i=a();g.remove(i);g.remove(e);i._dropDown=null;e._dropDown=null;h.set("trigger",g)}if(h instanceof dorado.widget.AbstractTextEditor){h.removeListener("onTextEdit",this._box._onTextEditedListener)}$invokeSuper.call(this,arguments)},onFilterItems:function(h){if(!this._items){return}var e=this.get("box.control");if(!e){return}var m={filterValue:h,processDefault:true};this.fireEvent("onFilterItems",this,m);if(!m.processDefault){e.set("items",this._items);return}h+="";var g;if(h&&h.length>0){g=[];h=h.toUpperCase();var i=this._items,j=this._displayProperty||this._property,k=h.length;var l=this;function f(o){var q;
if(j){q=(o instanceof dorado.Entity)?o.get(j):o[j]}else{q=o}var p=(q&&(q+"").toUpperCase().substring(0,k)==h);var n={item:o,accept:p};l.fireEvent("onFilterItem",l,n);p=n.accept;if(p){g.push(o)}}if(i instanceof dorado.EntityList){i.each(function(n){f(n)})}else{jQuery.each(i,function(o,n){f(n)})}}else{g=this._items}e.set("items",g)},doOnEditorKeyPress:function(e){var g=true;if(this.get("opened")){var f=this.get("box.control");switch(e.keyCode){case 13:this.close(this.getSelectedValue(f));g=false;break;default:g=f.onKeyDown(e)}}if(g){g=$invokeSuper.call(this,arguments)}return g}});dorado.widget.ListDropDown=$extend(dorado.widget.RowListDropDown,{$className:"dorado.widget.ListDropDown",ATTRIBUTES:{items:{}},getDropDownItems:function(){return this._items}});dorado.widget.AutoMappingDropDown=$extend(dorado.widget.RowListDropDown,{$className:"dorado.widget.AutoMappingDropDown",ATTRIBUTES:{useEmptyItem:{},property:{defaultValue:"value"}},getDropDownItems:function(){var g=this._items,h=this._editor,f=h._propertyDef;
if(!f){if(dorado.Object.isInstanceOf(h,dorado.widget.PropertyDataControl)){var e=h.getBindingDataType();if(e){f=e.getPropertyDef(h.get("property"))}}}if(f){g=f.get("mapping")}else{g=$invokeSuper.call(this,arguments)}if(this._useEmptyItem){g=new dorado.EntityList(g);g.insert({key:null,value:null},"begin")}return g}});dorado.widget.View.registerDefaultComponent("autoMappingDropDown1",function(){return new dorado.widget.AutoMappingDropDown()});dorado.widget.View.registerDefaultComponent("autoMappingDropDown2",function(){return new dorado.widget.AutoMappingDropDown({useEmptyItem:true})})})();dorado.widget.DataSetDropDown=$extend(dorado.widget.RowListDropDown,{$className:"dorado.widget.DataSetDropDown",ATTRIBUTES:{height:{defaultValue:230},dataSet:{componentReference:true},dataPath:{},useDataBinding:{defaultValue:true},reloadDataOnOpen:{},dynaFilter:{},filterOnTyping:{defaultValue:false}},EVENTS:{onSetFilterParameter:{}},open:function(c){var a=this,b=$getSuperClass();var d=function(){a._dataSet.getDataAsync(a._dataPath,function(f){if(!a._useDataBinding){a._items=f
}b.prototype.open.call(a,c)},"auto")};if(this._useDataBinding&&(this._filterOnOpen||this._reloadDataOnOpen||this._lastFilterValue)){var e=(this._reloadDataOnOpen||this._lastFilterValue)?undefined:c.get("text");this.onFilterItems(e,d);this._lastFilterValue=e}else{d()}},createDropDownBox:function(a,d){if(this._useDataBinding){var b=new dorado.widget.DropDownBox({editor:a,dropDown:d,style:{overflow:"hidden"}});var d=this,c;if(this._columns){c=new dorado.widget.DataGrid({dataSet:this._dataSet,dataPath:this._dataPath,stretchColumnsMode:"stretchableColumns",columns:this._columns,readOnly:true,style:"border: none",onDataRowClick:function(e){d.close(d.getSelectedValue(e))}})}else{c=new dorado.widget.DataListBox({dataSet:this._dataSet,dataPath:this._dataPath,width:"100%",property:this._displayProperty||this._property,style:"border: none",onDataRowClick:function(e){d.close(d.getSelectedValue(e))}})}b.set("control",c);return b}else{return $invokeSuper.call(this,arguments)}},initDropDownData:function(a){if(!this._useDataBinding){$invokeSuper.call(this,arguments)
}},getDropDownItems:function(){return this._items},onFilterItems:function(d,c){if(this._useDataBinding){var a={filterValue:d,processDefault:true};this.fireEvent("onFilterItems",this,a);if(a.processDefault){var b=this._dataSet;a={dataSet:b,filterValue:d,processDefault:true};if(this.getListenerCount("onSetFilterParameter")>0){a.processDefault=false;this.fireEvent("onSetFilterParameter",this,a)}if(a.processDefault){b.set("parameter",d)}b.clear();b.loadAsync(c);this._lastFilterValue=d}}else{$invokeSuper.call(this,arguments)}},onDropDownBoxShow:function(){var a=this._filterOnOpen;this._filterOnOpen=false;$invokeSuper.call(this,arguments);this._filterOnOpen=a}});dorado.widget.CustomDropDown=$extend(dorado.widget.DropDown,{$className:"dorado.widget.CustomDropDown",ATTRIBUTES:{control:{writeBeforeReady:true,innerComponent:""}},createDropDownBox:function(a,c){var b=$invokeSuper.call(this,arguments);b.set("control",this._control);return b}});(function(){function isInputOrTextArea(dom){return["input","textarea"].indexOf(dom.tagName.toLowerCase())>=0
}dorado.widget.editor={};dorado.widget.editor.PostException=$extend(dorado.Exception,{$className:"dorado.widget.editor.PostException",constructor:function(messages){$invokeSuper.call(this,[dorado.Toolkits.getTopMessage(messages).text]);this.messages=messages}});dorado.widget.AbstractTextBox=$extend(dorado.widget.AbstractDataEditor,{$className:"dorado.widget.AbstractTextBox",_triggerChanged:true,ATTRIBUTES:{className:{defaultValue:"d-text-box"},width:{defaultValue:150,independent:true},height:{independent:true,readOnly:true},text:{skipRefresh:true,getter:function(a){return this.doGetText()},setter:function(a,text){this.doSetText(text)}},value:{skipRefresh:true,getter:function(a){var text=this.doGetText();if(this._value!==undefined&&text===this._valueText){return this._value}else{return text||null}},setter:function(a,value){this._value=value;var text=this._lastPost=this._valueText=dorado.$String.toText(value);this.doSetText(text)}},editable:{defaultValue:true},readOnly:{},modified:{getter:function(){return(this._focused)?(this._lastPost==this.doGetText()):false
}},validationState:{readOnly:true,defaultValue:"none"},validationMessages:{readOnly:true},trigger:{componentReference:true,setter:function(p,v){if(v instanceof Array&&v.length==0){v=null}this._trigger=v;this._triggerChanged=true}}},EVENTS:{onTextEdit:{},onTriggerClick:{},onValidationStateChange:{}},createDom:function(){var textDom=this._textDom=this.createTextDom();textDom.style.width="100%";textDom.style.height="100%";var dom=document.createElement("DIV");with(dom.style){position="relative";whiteSpace="nowrap";overflow="hidden"}dom.appendChild(textDom);var self=this;jQuery(dom).addClassOnHover(this._className+"-hover",null,function(){return !self.get("readOnly")});if(this._text){this.doSetText(this._text)}return dom},refreshTriggerDoms:function(){var triggerButtons=this._triggerButtons,triggerButton;if(triggerButtons){for(var i=0;i<triggerButtons.length;i++){triggerButton=triggerButtons[i];triggerButton.unrender();this.unregisterInnerControl(triggerButton)}}var triggers=this.get("trigger");
if(triggers){if(!(triggers instanceof Array)){triggers=[triggers]}var trigger;this._triggerButtons=triggerButtons=[];for(var i=triggers.length-1;i>=0;i--){trigger=triggers[i];triggerButton=trigger.createTriggerButton(this);triggerButton.set("style",{position:"absolute",top:0,right:0});triggerButtons.push(triggerButton);this.registerInnerControl(triggerButton);triggerButton.render(this._dom)}this._triggersWidth=-1;this.doOnAttachToDocument=this.onResize=this.doOnResize;if(this._attached){this.onResize()}}else{this._textDom.style.width="100%";delete this.doOnAttachToDocument;delete this.onResize}},refreshDom:function(dom){$invokeSuper.call(this,arguments);if(this._dataSet){var value,dirty,timestamp=0,readOnly;this._entity=null;if(this._property){readOnly=this._dataSet._readOnly;var bindingInfo=this.getBindingInfo(),propertyDef=bindingInfo.propertyDef,state;if(propertyDef){readOnly=(bindingInfo.entity==null)||readOnly||propertyDef._readOnly;if(!this._readOnly2!=!readOnly){this._readOnly2=readOnly;
this.resetReadOnly()}if(!this._displayFormat){this._displayFormat=propertyDef._displayFormat}if(!this._inputFormat){this._inputFormat=propertyDef._inputFormat}if(!propertyDef._mapping&&!this._dataType){this._dataType=propertyDef._dataType}}timestamp=bindingInfo.timestamp;if(bindingInfo.entity instanceof dorado.Entity){var e=this._entity=bindingInfo.entity;if(this._dataType){value=e.get(this._property)}else{value=e.getText(this._property)}dirty=e.isDirty(this._property);state=e.getMessageState(this._property)}if(timestamp!=this.timestamp){this.set("value",value);this.timestamp=timestamp}this.doSetValidationState(state);this.setDirty(dirty)}else{readOnly=true}if(!this._readOnly2!=!readOnly){this._readOnly2=readOnly;this.resetReadOnly()}}else{var dom=this._dom,textDom=this._textDom,readOnly=this._readOnly||this._readOnly2;$fly(dom).toggleClass(this._className+"-readonly",!!readOnly)}if(this._triggerChanged){this._triggerChanged=false;this.refreshTriggerDoms()}},validate:function(text){if(this._skipValidate){return null
}if(this.doValidate){return this.doValidate(text)}},doSetValidationState:function(state,messages){state=state||"none";if(this._validationState==state){return}this._validationState=state;this._validationMessages=dorado.Toolkits.trimMessages(messages,"error");if(this._rendered){var dom=this._dom,warnCls=this._className+"-warn",errorCls=this._className+"-error";$fly(dom).toggleClass(warnCls,state=="warn").toggleClass(errorCls,state=="error")}this.fireEvent("onValidationStateChange",this)},doOnResize:function(){if(this._attached){if(this._triggersWidth<0){this._triggersWidth=0;var _triggerButtons=this._triggerButtons;if(_triggerButtons){for(var i=0;i<_triggerButtons.length;i++){var triggerDom=_triggerButtons[i].getDom();triggerDom.style.right=this._triggersWidth+"px";this._triggersWidth+=triggerDom.offsetWidth}}}var w=this._dom.clientWidth-this._triggersWidth+1;this._textDom.style.width=(w<0?0:w)+"px"}},setFocus:function(){if(this._textDom){this._textDom.focus()}},doOnFocus:function(){var readOnly=this._readOnly||this._readOnly2;
if(readOnly||!this._editable){this._textDom.readOnly=true}if(readOnly){return}this._focusTime=new Date();this._lastPost=this._lastObserve=this.doGetText();this._editObserverId=$setInterval(this,function(){var text=this.get("text");if(this._lastObserve!=text){this._lastObserve=text;this.textEdited()}},50);var triggers=this.get("trigger");if(triggers){if(!(triggers instanceof Array)){triggers=[triggers]}var self=this;jQuery.each(triggers,function(i,trigger){if(trigger.onEditorFocus){trigger.onEditorFocus(self)}})}},doOnBlur:function(){if(this.get("readOnly")){return}clearInterval(this._editObserverId);delete this._editObserverId;this.post()},resetReadOnly:function(){if(!this._rendered){return}var readOnly=!!(this._readOnly||this._readOnly2);if(this.get("focused")&&isInputOrTextArea(this._textDom)){this._textDom.readOnly=readOnly}$fly(this.getDom()).toggleClass(this._className+"-readonly",readOnly)},onTriggerClick:function(trigger){$setTimeout(this,function(){this._textDom.focus()},0);if(this._readOnly){return
}if(this.fireEvent("onTriggerClick",this)){trigger.execute(this)}},doOnKeyDown:function(evt){var retValue=true;var firstTrigger=this.get("trigger");if(firstTrigger&&firstTrigger instanceof Array){firstTrigger=firstTrigger[0]}switch(evt.keyCode){case 36:case 35:case 38:case 27:if(firstTrigger&&firstTrigger.onEditorKeyDown){retValue=firstTrigger.onEditorKeyDown(this,evt)}break;case 40:if(firstTrigger){if(firstTrigger.onEditorKeyDown){retValue=firstTrigger.onEditorKeyDown(this,evt)}if(evt.altKey){this.onTriggerClick(firstTrigger);retValue=false}}break;case 13:if(firstTrigger){if(firstTrigger.onEditorKeyDown){retValue=firstTrigger.onEditorKeyDown(this,evt)}}else{var b=this.post();retValue=(b===true||b==null)}break;case 113:if(firstTrigger){this.onTriggerClick(firstTrigger);retValue=false}break;default:if(firstTrigger&&firstTrigger.onEditorKeyDown){retValue=firstTrigger.onEditorKeyDown(this,evt)}}return retValue},textEdited:function(){this.fireEvent("onTextEdit",this);if(this._dataSet&&this._entity&&this._property&&!this._entity.isDirty()){this._entity.setState(dorado.Entity.STATE_MODIFIED)
}},setDirty:function(dirty){if(!this._supportsDirtyFlag){return}var dirtyFlag=this._dirtyFlag;if(dirty){if(!dirtyFlag){this._dirtyFlag=dirtyFlag=$DomUtils.xCreateElement({tagName:"LABEL",className:"dirty-flag"});this._dom.appendChild(dirtyFlag)}dirtyFlag.style.display=""}else{if(dirtyFlag){dirtyFlag.style.display="none"}}},post:function(force){var bindingMode=(this._dataSet&&this._property);try{var text=this.get("text"),state,result,modified=(this._lastPost!=text);if((force||modified||(this._validationState=="none"&&text=="")&&(new Date()-(this._focusTime||0))>300)){this._lastPost=text;var eventArg={processDefault:true};if(force||modified){this.fireEvent("beforePost",this,eventArg)}if(eventArg.processDefault===false){return false}var validationResults=this.validate(text);if(validationResults){var topValidationResult=dorado.Toolkits.getTopMessage(validationResults);if(topValidationResult){state=topValidationResult.state;if(state=="error"){throw new dorado.widget.editor.PostException(validationResults)
}}}if(force||modified){this.doPost();this.fireEvent("onPost",this);result=true}}if(result){this.doSetValidationState(state,validationResults)}return result}catch(e){if(e instanceof dorado.widget.editor.PostException){this.doSetValidationState("error",e.messages)}var eventArg={exception:e,processDefault:true};this.fireEvent("onPostFailed",this,eventArg);if(eventArg.processDefault){dorado.Exception.processException(e)}else{dorado.Exception.removeException(e)}return false}}});dorado.widget.AbstractTextEditor=$extend(dorado.widget.AbstractTextBox,{$className:"dorado.widget.AbstractTextEditor",ATTRIBUTES:{value:{skipRefresh:true,getter:function(){var text=this.get("text");if(this._value!==undefined&&text===this._valueText){return this._value}else{return text||null}},setter:function(a,value){this._value=value;var text=dorado.$String.toText(value);this._skipValidateEmpty=true;this.validate(text);this._text=this._lastPost=this._valueText=text;this.doSetText(text);this.doSetValidationState(null)
}},text:{skipRefresh:true,setter:function(a,text){this.validate(text);this._text=this._lastPost=text;this.doSetText(text);this.doSetValidationState(null)}},blankText:{},required:{},minLength:{skipRefresh:true},maxLength:{skipRefresh:true},selectTextOnFocus:{defaultValue:true},validators:{setter:function(attr,value){var validators=[];for(var i=0;i<value.length;i++){var v=value[i];if(!(v instanceof dorado.validator.Validator)){v=dorado.Toolkits.createInstance("validator",v,function(type){return dorado.util.Common.getClassType("dorado.validator."+type+"Validator",true)})}validators.push(v)}this._validators=validators}}},createDom:function(){var text=this._text,dom=$invokeSuper.call(this,arguments);if(!text){this.doSetText("")}return dom},doGetText:function(){if(this._useBlankText){return""}return(this._textDom)?this._textDom.value:this._text},doSetText:function(text){this._useBlankText=(!this._focused&&text==""&&this._blankText);if(this._textDom){if(this._useBlankText){text=this._blankText
}$fly(this._textDom).toggleClass("blank-text",!!this._useBlankText);this._textDom.value=text||""}else{this._text=text}},doValidate:function(text){var validationResults=[];var skipValidateEmpty=this._skipValidateEmpty;this._skipValidateEmpty=false;if(!skipValidateEmpty&&this._required&&text.length==0){validationResults.push({state:"error",text:$resource("dorado.data.ErrorContentRequired")})}if(text.length){var validator=$singleton(dorado.validator.LengthValidator);validator.set({minLength:this._minLength,maxLength:this._maxLength});var results=validator.validate(text);if(results){validationResults.concat(results)}if(this._validators){jQuery.each(this._validators,function(i,validator){results=validator.validate(text);if(results){validationResults.concat(results)}})}}return validationResults},doPost:function(){var p=this._property,e=this._entity;if(!p||!e){return false}if(this._dataSet){if(this._dataType){e.set(p,this.get("value"))}else{e.setText(p,this.get("value"))}this.timestamp=this._entity.timestamp
}else{if(e instanceof dorado.Entity){var v=this.get("value");if(v instanceof dorado.Entity){e.set(p,v)}else{e.setText(p,this.get("text"))}this.setDirty(e.isDirty(p))}else{e[p]=this.get("value");this.setDirty(true)}}return true},doOnFocus:function(){$invokeSuper.call(this,arguments);if(this._selectTextOnFocus){$setTimeout(this,function(){this._textDom.select()},0)}}});dorado.widget.TextEditor=$extend(dorado.widget.AbstractTextEditor,{$className:"dorado.widget.TextEditor",ATTRIBUTES:{value:{skipRefresh:true,getter:function(){var text=(this._editorFocused)?this.doGetText():this._text;if(this._value!==undefined&&text===this._valueText){return this._value}else{var dataType=this.get("dataType"),text;if(dataType){try{var value=this._value=dataType.parse(text);this._valueText=text;return value}catch(e){dorado.Exception.removeException(e);return null}}else{return text||null}}},setter:function(a,value){this._value=value;var t,text;var dataType=this.get("dataType");if(dataType){text=dataType.toText(value,this._editorFocused?this._typeFormat:this._displayFormat);
t=(this._editorFocused)?text:dataType.toText(value,this._typeFormat)}else{t=text=dorado.$String.toText(value)}this._skipValidateEmpty=true;this.validate(t);this._text=this._lastPost=this._valueText=t;this.doSetText(text);this.doSetValidationState(null)}},text:{skipRefresh:true,getter:function(a){return((!this.get("dataType")||this._editorFocused)?this.doGetText():this._text)||""},setter:function(a,text){var t=text;var dataType=this.get("dataType");if(dataType){try{if(!this._editorFocused){var value=dataType.parse(t,this._typeFormat);t=dataType.toText(value,this._displayFormat)}}catch(e){}}this.validate(t);this._text=this._lastPost=text;this.doSetText(t);this.doSetValidationState(null)}},dataType:{getter:function(){var dataType;if(this._dataType){dataType=dorado.LazyLoadDataType.dataTypeGetter.call(this)}else{if(this._property&&this._dataSet){var bindingInfo=this.getBindingInfo();if(bindingInfo&&!bindingInfo.propertyDef._mapping){dataType=bindingInfo.dataType}}}return dataType}},password:{},displayFormat:{},typeFormat:{skipRefresh:true},modified:{getter:function(){return(this._editorFocused)?(this._lastPost==this.doGetText()):false
}},trigger:{getter:function(p,v){var trigger=this._trigger;if(!trigger&&this._view){if(this.get("dataType") instanceof dorado.datatype.DateDataType){trigger=this._view.id("defaultDateDropDown")}}return trigger}}},createTextDom:function(){var textDom=document.createElement("INPUT");textDom.className="editor";if(this._password){textDom.type="password"}if(!(dorado.Browser.msie&&dorado.Browser.version<"7")){textDom.style.padding=0}if(dorado.Browser.msie&&dorado.Browser.version>"7"){textDom.style.top=0;textDom.style.position="absolute"}return textDom},doValidate:function(text){var validationResults;try{var dataType=this.get("dataType");if(dataType){dataType.parse(text,this._typeFormat)}validationResults=$invokeSuper.call(this,arguments)}catch(e){dorado.Exception.removeException(e);validationResults=[{state:"error",text:dorado.Exception.getExceptionMessage(e)}]}return validationResults},doOnFocus:function(){var dataType=this.get("dataType");if(dataType&&this._validationState!="error"){var text=dataType.toText(this.get("value"),this._typeFormat);
this._editorFocused=true;this.doSetText(text)}else{this._editorFocused=true;if(this._useBlankText){this.doSetText("")}}$invokeSuper.call(this,arguments)},doOnBlur:function(){this._textDom.readOnly=false;if(this.get("readOnly")){return}this._text=this.doGetText();try{$invokeSuper.call(this,arguments)}finally{var text,dataType=this.get("dataType");if(dataType&&this._validationState!="error"){text=dataType.toText(this.get("value"),this._displayFormat);this._editorFocused=false;this.doSetText(text)}}},doOnKeyPress:function(evt){var dataType=this.get("dataType");if(!dataType){return true}var b=true,k=(evt.keyCode||evt.which),$d=dorado.DataType;switch(dataType._code){case $d.INTEGER:case $d.PRIMITIVE_INT:b=(k==44||k==45||(k>=48&&k<=57));break;case $d.FLOAT:case $d.PRIMITIVE_FLOAT:b=(k==44||k==45||k==46||(k>=48&&k<=57));break}return b}})})();(function(){dorado.widget.TextArea=$extend(dorado.widget.AbstractTextEditor,{$className:"dorado.widget.TextArea",ATTRIBUTES:{width:{independent:false,defaultValue:150},height:{independent:false,defaultValue:60},className:{defaultValue:"d-text-area"}},createTextDom:function(){var a=document.createElement("TEXTAREA");
a.className="textarea";if(dorado.Browser.msie&&dorado.Browser.version<"8"){this.doOnAttachToDocument=this.onResize=this.doOnResize}return a},refreshTriggerDoms:function(){var a=this._triggerButtons,f,c=this._triggerPanel;if(a&&c){for(var d=0;d<a.length;d++){f=a[d];f.unrender();this.unregisterInnerControl(f)}}var e=this.get("trigger");if(e){if(!c){c=this._triggerPanel=$create("DIV");c.className="d-trigger-panel";this._dom.appendChild(c)}if(!(e instanceof Array)){e=[e]}var b;this._triggerButtons=a=[];for(var d=e.length-1;d>=0;d--){b=e[d];f=b.createTriggerButton(this);f.set("style",{position:"absolute"});a.push(f);this.registerInnerControl(f);f.render(c)}this._triggersArranged=false;this.doOnAttachToDocument=this.onResize=this.doOnResize}else{if(this._triggerPanel){this._triggerPanel.style.display="none"}this._textDom.style.width="100%";delete this.doOnAttachToDocument;delete this.onResize}},doOnResize:function(){if(this._attached){if(!this._triggersArranged){this._triggersArranged=true;var a=this._triggerButtons;
if(a){var c=0;for(var d=0;d<a.length;d++){var f=a[d],e=f.getDom();e.style.bottom=c+"px";c+=e.offsetWidth}}}var b=this._dom.clientWidth;if(this._triggerPanel){b-=this._triggerPanel.offsetWidth}this._textDom.style.width=(b<0?0:b)+"px"}},doOnKeyDown:function(a){if(a.ctrlKey){return true}if(a.keyCode==13){return}return $invokeSuper.call(this,arguments)},doOnFocus:function(){if(this._useBlankText){this.doSetText("")}$invokeSuper.call(this,arguments)},doOnBlur:function(){if(this.get("readOnly")){return}try{$invokeSuper.call(this,arguments)}finally{this.doSetText(this.doGetText())}}})})();dorado.widget.CheckBox=$extend(dorado.widget.AbstractDataEditor,{$className:"dorado.widget.CheckBox",ATTRIBUTES:{className:{defaultValue:"d-checkbox"},iconOnly:{writeBeforeReady:true},onValue:{defaultValue:true},offValue:{defaultValue:false},mixedValue:{defaultValue:"mixed"},caption:{},value:{defaultValue:false,setter:function(b,a){this._value=a;if(this._mixedValue==a){this._checked=null}else{this._checked=(this._onValue==a)
}}},checked:{defaultValue:false,getter:function(){if(this._value==this._mixedValue){return null}return this._value==this._onValue},setter:function(b,c){var a=c;if(c===true){this._value=this._onValue}else{if(c==null){this._value=this._mixedValue}else{this._value=this._offValue;a=false}}this._checked=a}},triState:{defaultValue:false}},EVENTS:{onValueChange:{}},onClick:function(){var a=this;if(a._readOnly||this._readOnly2){return}a._lastPost=a._value;if(a._triState){if(a._checked===true){a._checked=null}else{if(a._checked===false){a._checked=true}else{a._checked=false}}}else{a._checked=!a._checked}a._value=a._checked?a._onValue:(a._checked==null?a._mixedValue:a._offValue);a._dirty=true;try{a.post()}catch(b){a._value=a._lastPost;if(a._value==a._mixedValue){a._checked=null}else{a._checked=!a._checked}a._dirty=false;throw b}a.refresh();a.fireEvent("onValueChange",a)},refreshDom:function(d){var e=this,h=e._checked,l=e._caption||"";if(e._dataSet){var g,f,a;if(e._property){var c=e.getBindingInfo();
if(c.entity instanceof dorado.Entity){g=c.entity.get(e._property);a=c.entity.isDirty(e._property)}f=(c.entity==null)||c.propertyDef.get("readOnly")}else{f=true}e._checked=(e==e._onValue);e._readOnly2=f;e.setDirty(a)}$invokeSuper.call(this,arguments);if(!e._iconOnly){var i=d.firstChild,k=i.nextSibling;if(h){$fly(i).removeClass("unchecked halfchecked").addClass("checked")}else{if(h==null){$fly(i).removeClass("checked unchecked").addClass("halfchecked")}else{$fly(i).removeClass("checked halfchecked").addClass("unchecked")}}k.innerText=l}else{var b=false,j,m=$fly(d);m.removeClass("d-checkbox-checked d-checkbox-unchecked d-checkbox-halfchecked");if(m.hasClass("d-checkbox-unchecked-hover")||m.hasClass("d-checkbox-checked-hover")||m.hasClass("d-checkbox-halfchecked-hover")){m.removeClass("d-checkbox-checked-hover d-checkbox-unchecked-hover d-checkbox-halfchecked-hover");b=true}if(h){j=b?"d-checkbox-checked-hover":"d-checkbox-checked";m.addClass(j)}else{if(h==null){j=b?"d-checkbox-halfchecked-hover":"d-checkbox-halfchecked";
m.addClass(j)}else{j=b?"d-checkbox-unchecked-hover":"d-checkbox-unchecked";m.addClass(j)}}}},createDom:function(){var a=this,b;a._checked=(a._value==a._onValue);if(a._iconOnly){a._className=a._className+"-icononly";b=$DomUtils.xCreateElement({tagName:"div",className:a._className});$fly(b).hover(function(){if(!a._readOnly){if(a._checked){$fly(b).removeClass("d-checkbox-checked").addClass("d-checkbox-checked-hover")}else{if(a._checked==null){$fly(b).removeClass("d-checkbox-halfchecked").addClass("d-checkbox-halfchecked-hover")}else{$fly(b).removeClass("d-checkbox-unchecked").addClass("d-checkbox-unchecked-hover")}}}},function(){$fly(b).removeClass("d-checkbox-checked-hover d-checkbox-unchecked-hover d-checkbox-halfchecked-hover");if(a._checked){$fly(b).addClass("d-checkbox-checked")}else{if(a._checked==null){$fly(b).addClass("d-checkbox-halfchecked")}else{$fly(b).addClass("d-checkbox-unchecked")}}})}else{b=$DomUtils.xCreateElement({tagName:"div",className:a._className,content:[{tagName:"div",className:"icon"},{tagName:"div",className:"caption",content:a._caption||""}]});
jQuery(b).addClassOnHover(a._className+"-hover",null,function(){return !a._readOnly}).addClassOnClick(a._className+"-click",null,function(){return !a._readOnly})}return b},post:function(){try{if(!this._dirty){return false}var b={processDefault:true};this.fireEvent("beforePost",this,b);if(b.processDefault===false){return false}this.doPost();this._lastPost=this._checked;this._dirty=false;this.fireEvent("onPost",this);return true}catch(a){dorado.Exception.processException(a)}},doOnKeyDown:function(a){var b=true;switch(a.keyCode){case 32:this.onClick();b=false;break}return b}});dorado.widget.RadioButton=$extend(dorado.widget.Control,{$className:"dorado.widget.RadioButton",focusable:true,ATTRIBUTES:{className:{defaultValue:"d-radio"},text:{},value:{},checked:{},readOnly:{}},onClick:function(){var a=this;if(!a._readOnly&&!a._readOnly2){if(!a._checked){a._checked=true;if(a._radioGroup){a._radioGroup._valueChange(a)}}}},refreshDom:function(g){$invokeSuper.call(this,arguments);var e=this,d=e._checked,f=e._text,c;
if(g){c=jQuery(g);var a=g.firstChild,b=a.nextSibling;if(d){$fly(a).removeClass("unchecked").addClass("checked")}else{$fly(a).removeClass("checked").addClass("unchecked")}$fly(b).text(f)}},createDom:function(){var b=this,c,a=b._checked;c=$DomUtils.xCreateElement({tagName:"div",className:b._className,content:[{tagName:"div",className:"icon"},{tagName:"span",className:"text",content:b._text}]});jQuery(c).addClassOnHover(b._className+"-hover",null,function(){return !b._readOnly&&!b._readOnly2}).addClassOnClick(b._className+"-click",null,function(){return !b._readOnly&&!b._readOnly2});return c},isFocusable:function(a){return !this._readOnly&&!this._readOnly2&&$invokeSuper.call(this,arguments)}});dorado.widget.RadioGroup=$extend(dorado.widget.AbstractDataEditor,{ATTRIBUTES:{className:{defaultValue:"d-radiogroup"},layout:{defaultValue:"vertical"},radioButtons:{setter:function(f,d){var b=this,a=this._radioButtons,g=b._dom;if(a){b.clearRadioButtons()}b._radioButtons=d;if(d){for(var c=0;c<d.length;
c++){var e=d[c];if(!(e instanceof dorado.widget.RadioButton)){d[c]=e=new dorado.widget.RadioButton(e)}if(g){e._radioGroup=b;e._readOnly=b._readOnly&&b._readOnly2;if(e._value==b._value){b.activeRadioButton=e;e._checked=true}e.render(g)}b.registerInnerControl(e)}}}},value:{setter:function(a,h){var c=this,e=c._radioButtons;if(e){var g=false;for(var d=0,b=e.length;d<b;d++){var f=e[d];if((h+"")==(f._value+"")){g=true;c._setValue(f);break}}if(!g){c._setValue(null)}}c._value=h}},readOnly:{setter:function(a,g){var c=this,e=c._radioButtons;if(c._readOnly==g){return}if(e){for(var d=0,b=e.length;d<b;d++){var f=e[d];f.set("readOnly",g||c._readOnly2)}}c._readOnly=g}}},EVENTS:{onValueChange:{}},addRadioButton:function(e,b){var a=this,c=a._radioButtons,f=a._dom,d;if(!c){c=a._radioButtons=[]}if(!(e instanceof dorado.widget.RadioButton)){e=new dorado.widget.RadioButton(e)}if(typeof b=="number"){var g=c[b];if(g){d=g._dom}c.insert(e,b)}else{c.push(e)}if(f){e._radioGroup=a;e._readOnly=a._readOnly&&a._readOnly2;
if(e._value==a._value){a.activeRadioButton=e;e._checked=true}e.render(f,d)}a.registerInnerControl(e)},removeRadioButton:function(d){var b=this,c=b._radioButtons,a;if(!c){return}if(typeof d=="number"){a=d;d=c[d];b.unregisterInnerControl(d);d.destroy();c.removeAt(a);if(b.activeRadioButton==d){b.activeRadioButton=null}}else{if(d&&d.destroy){b.unregisterInnerControl(d);d.destroy();if(b.activeRadioButton==d){b.activeRadioButton=null}}}},clearRadioButtons:function(){var a=this,c=a._radioButtons||[],d;for(var b=0;b<c.length;b++){d=c[b];a.unregisterInnerControl(d);d.destroy()}a._radioButtons=null;a.activeRadioButton=null},_setValue:function(b){var a=this,c=b?b._value:null;if(a.activeRadioButton==b){return}if(a.activeRadioButton){a.activeRadioButton._checked=false;a.activeRadioButton.refresh()}if(b){b._checked=true;b.refresh()}a.activeRadioButton=b},_valueChange:function(b){var a=this,c=b?b._value:null;if(a.activeRadioButton==b||a._value==c){return}a._lastPost=a._value;a._value=c;a._dirty=true;try{a.post()
}catch(d){a._value=a._lastPost;a._dirty=false;if(b){b._checked=false;b.refresh()}throw d}this._setValue(b);a.fireEvent("onValueChange",a)},createDom:function(){var b=this,f=b._layout,d=b._radioButtons;var g=$DomUtils.xCreateElement({tagName:"div",className:b._className});if(d){for(var c=0,a=d.length;c<a;c++){var e=d[c];e._radioGroup=b;e._readOnly=b._readOnly&&b._readOnly2;if(e._value==b._value){b.activeRadioButton=e;e._checked=true}e.render(g)}}return g},refreshDom:function(d){var k=this,g=k._layout;if(k._dataSet){var j,h,b;if(k._property){var c=k.getBindingInfo();if(c.entity instanceof dorado.Entity){j=c.entity.get(k._property);b=c.entity.isDirty(k._property)}h=(c.entity==null)||c.propertyDef.get("readOnly");if(!k._radioButtons||!k._radioButtons.length){var f=[],a=c.propertyDef._mapping;if(a){for(var e=0;e<a.length;e++){var l=a[e];f.push({value:l.key,text:l.value})}}if(f.length){k.set("radioButtons",f)}}}else{h=true}k._readOnlyw=h;k.set("value",j);k.setDirty(b)}$invokeSuper.call(this,arguments);
if(g=="flow"){$fly(d).addClass(k._className+"-flow")}},doOnKeyDown:function(a){if(a.ctrlKey){return true}var g=this,d=g._radioButtons,f=g.activeRadioButton,e=f?d.indexOf(f):-1,b=d.length,h,i,c=true;switch(a.keyCode){case 38:case 37:if(e==0){h=b-1}else{if(e>0&&e<b){h=e-1}else{h=0}}c=false;break;case 39:case 40:if(e>=0&&e<b-1){h=e+1}else{h=0}c=false;break}i=d[h];if(i){g._valueChange(i)}return c},post:function(){if(!this._dirty){return false}var a={processDefault:true};this.fireEvent("beforePost",this,a);if(a.processDefault===false){return false}this.doPost();this._lastPost=this._value;this._dirty=false;this.fireEvent("onPost",this);return true}});(function(){var a=[{state:"ok"}];var b=[{state:"waiting"}];dorado.widget.DataMessage=$extend([dorado.widget.Control,dorado.widget.PropertyDataControl],{$className:"dorado.widget.DataMessage",ATTRIBUTES:{className:{defaultValue:"d-data-message"},showIconOnly:{writeBeforeReady:true},showMultiMessage:{writeBeforeReady:true},messages:{setter:function(d,c){this._messages=dorado.Toolkits.trimMessages(c,"info")
}}},processDataSetMessage:function(d,c,e){switch(d){case dorado.widget.DataSet.MESSAGE_REFRESH:case dorado.widget.DataSet.MESSAGE_DATA_CHANGED:case dorado.widget.DataSet.MESSAGE_CURRENT_CHANGED:case dorado.widget.DataSet.MESSAGE_ENTITY_STATE_CHANGED:this._messages=null;this.refresh(true);break}},createMessageDom:function(){return document.createElement("DIV")},refreshSingleMessageDom:function(f,c){var d,e;if(c){d=c.state;e=c.text}f.className="d-message d-message-"+(d||"none");if(!this._showIconOnly){f.innerText=e||" "}else{if(e){dorado.TipManager.initTip(f,{text:e})}}},refreshDom:function(g){$invokeSuper.call(this,arguments);var c,e=this._messages;if(!e&&this._dataSet){var c=this.getBindingData();if(c instanceof dorado.Entity){e=c.getMessages(this._property)}else{c=null}if(c&&this._property){var f=c.getValidateState(this._property);if(f=="validating"){e=b}else{if(!e||e.length==0){if(f=="ok"){e=a}else{var i=this.getBindingPropertyDef();if(i&&i._description){e=[{state:"info",text:i._description}]
}}}}}}if(!this._showMultiMessage){var d=dorado.Toolkits.getTopMessage(e);var h=g.firstChild;if(!h){h=this.createMessageDom();g.appendChild(h)}this.refreshSingleMessageDom(h,d)}else{}}})})();(function(){dorado.widget.YearMonthPicker=$extend(dorado.widget.Control,{_opened:false,focusable:true,ATTRIBUTES:{year:{defaultValue:(new Date).getFullYear()},month:{defaultValue:0}},EVENTS:{onPick:{},onCancel:{}},refreshYear:function(k){var g=this,l=g._year,h,a=g._doms,d=a.yearTable,n;k=k?k:l;n=k%10;h=k-(n==0?10:n)+1;for(var c=0;c<5;c++){for(var b=0;b<2;b++){var m=d.rows[c].cells[b];m.innerText=h+c*2+b}}var o=g._lastSelectedYearCell,f=k-h,e=d.rows[Math.floor(f/2)].cells[f%2];if(o){$fly(o).removeClass("selected")}if(e){$fly(e).addClass("selected")}g._lastSelectedYearCell=e},refreshMonth:function(f){var c=this,d=c._month,e=c._doms,b=e.monthTable;if(isNaN(f)){f=d?d:0}var g=c._lastSelectedMonthCell,a=b.rows[Math.floor(f/2)].cells[f%2];if(g){$fly(g).removeClass("selected")}if(a){$fly(a).addClass("selected")
}c._lastSelectedMonthCell=a},updateDate:function(b,d){var a=this,c=b;if(b instanceof Date){a.set("year",b.getFullYear());a.set("month",b.getMonth())}else{if(!isNaN(c)&&!isNaN(d)){a.set("year",c);a.set("month",d)}}},refreshDom:function(){var a=this;a.refreshYear(a._year);a.refreshMonth(a._month);$invokeSuper.call(this,arguments)},createDom:function(){var i=$resource("dorado.baseWidget.AllMonths"),b=i.split(",");var j=this,a={},h=$DomUtils.xCreateElement({tagName:"div",className:"d-year-month-picker",content:[{tagName:"table",className:"year-table",contextKey:"yearTable",content:[{tagName:"tr",className:"number-row",content:[{tagName:"td"},{tagName:"td"}]},{tagName:"tr",className:"number-row",content:[{tagName:"td"},{tagName:"td"}]},{tagName:"tr",className:"number-row",content:[{tagName:"td"},{tagName:"td"}]},{tagName:"tr",className:"number-row",content:[{tagName:"td"},{tagName:"td"}]},{tagName:"tr",className:"number-row",content:[{tagName:"td"},{tagName:"td"}]},{tagName:"tr",className:"btn-row",content:[{tagName:"td",align:"center",contextKey:"preaYearCell"},{tagName:"td",align:"center",contextKey:"nextYearCell"}]}]},{tagName:"table",className:"month-table",contextKey:"monthTable",content:[{tagName:"tr",className:"number-row",content:[{tagName:"td",content:b[0]},{tagName:"td",content:b[1]}]},{tagName:"tr",className:"number-row",content:[{tagName:"td",content:b[2]},{tagName:"td",content:b[3]}]},{tagName:"tr",className:"number-row",content:[{tagName:"td",content:b[4]},{tagName:"td",content:b[5]}]},{tagName:"tr",className:"number-row",content:[{tagName:"td",content:b[6]},{tagName:"td",content:b[7]}]},{tagName:"tr",className:"number-row",content:[{tagName:"td",content:b[8]},{tagName:"td",content:b[9]}]},{tagName:"tr",className:"number-row",content:[{tagName:"td",content:b[10]},{tagName:"td",content:b[11]}]}]},{tagName:"div",className:"btns-pane",contextKey:"buttonPanel"}]},null,a);
var c,e;j._doms=a;if(dorado.Browser.msie&&dorado.Browser.version==6){$fly(a.monthTable).mousemove(function(m){var l=$DomUtils.getCellPosition(m);if(l&&l.element&&(l.element!=c||!c)){if(c){$fly(c).removeClass("hover")}$fly(l.element).addClass("hover");c=l.element}}).mouseout(function(){if(c){$fly(c).removeClass("hover")}c=null})}$fly(a.monthTable).click(function(m){var l=$DomUtils.getCellPosition(m);if(l&&l.element){j.set("month",l.row*2+l.column)}});if(dorado.Browser.msie&&dorado.Browser.version==6){$fly(a.yearTable).mousemove(function(m){var l=$DomUtils.getCellPosition(m);if(l&&l.element&&(l.element!=e||!e)){if(l.row==5){return}if(e){$fly(e).removeClass("hover")}$fly(l.element).addClass("hover");e=l.element}}).mouseout(function(){if(e){$fly(e).removeClass("hover")}e=null})}$fly(a.yearTable).click(function(m){var l=$DomUtils.getCellPosition(m);if(l&&l.element){if(l.row==5){return}j.set("year",parseInt(l.element.innerHTML,10))}});var g=new dorado.widget.SimpleIconButton({iconClass:"prev-year-button",listener:{onClick:function(){j.set("year",j._year-10)
}}});var f=new dorado.widget.SimpleIconButton({iconClass:"next-year-button",listener:{onClick:function(){j.set("year",j._year+10)}}});g.render(a.preaYearCell);f.render(a.nextYearCell);j.registerInnerControl(g);j.registerInnerControl(f);var k=new dorado.widget.Button({caption:$resource("dorado.baseWidget.YMPickerConfirm"),listener:{onClick:function(){j.fireEvent("onPick",j)}}});k.render(a.buttonPanel);var d=new dorado.widget.Button({caption:$resource("dorado.baseWidget.YMPickerCancel"),listener:{onClick:function(){j.fireEvent("onCancel",j)}}});d.render(a.buttonPanel);j.registerInnerControl(k);j.registerInnerControl(d);j.refreshYear();j.refreshMonth();return h},doOnKeyDown:function(c){var a=this,b=a._year,d=a._month;switch(c.keyCode){case 37:if(c.ctrlKey){a.set("month",d==0?11:d-1)}break;case 38:if(c.ctrlKey){a.set("year",b-1)}break;case 39:if(c.ctrlKey){a.set("month",d==11?0:d+1)}break;case 40:if(c.ctrlKey){a.set("year",b+1)}break;case 33:a.set("year",b-10);break;case 34:a.set("year",b+10);
break;case 13:a.fireEvent("onPick",a);return false;case 27:break}}});dorado.widget.YearMonthDropDown=$extend(dorado.widget.DropDown,{ATTRIBUTES:{width:{defaultValue:260},iconClass:{defaultValue:"d-trigger-icon-date"}},EVENTS:{onValueSelected:{interceptor:function(d,b,a){var c=a.selectedValue;a.selectedValue=[c.year,c.month];return d(b,a)}}},createDropDownBox:function(b,d){var d=this,c=$invokeSuper.call(this,arguments),a=new dorado.widget.YearMonthPicker({listener:{onPick:function(e){d.close({year:e._year,month:e._month})},onCancel:function(){d.close()}}});c.set("style",{overflow:"hidden",height:190});c.set("control",a);return c},doOnKeyPress:function(c){var b=this,d=true,a=b.get("box.control");switch(c.keyCode){case 27:b.close();d=false;break;case 13:a.fireEvent("onPick",b);d=false;break;default:d=a.onKeyDown(c)}return d},initDropDownBox:function(b,a){}})})();(function(){var a={getWeekCountOfYear:function(c){var d=new Date(c.getFullYear(),0,1);var b=d.getDay();if(b==0){b=7}var e=c.getTime()-d.getTime()+(b-1)*3600*24*1000;
return Math.ceil(e/3600/24/1000/7)},getDayCountOfMonth:function(b,c){if(c==3||c==5||c==8||c==10){return 30}if(c==1){if(b%4==0&&b%100!=0||b%400==0){return 29}else{return 28}}return 31},getFirstDayOfMonth:function(c){var b=new Date(c.getTime());b.setDate(1);return b.getDay()},getDayPosition:function(c){if(c instanceof Date){var b=a.getFirstDayOfMonth(c),e=b+c.getDate(),d=e%7==0?7:e%7;return{rowIndex:(d==0?Math.floor(e/7):Math.floor(e/7)+1),columnIndex:e%7==0?7:e%7}}}};dorado.widget.DatePicker=$extend(dorado.widget.Control,{focusable:true,ATTRIBUTES:{date:{defaultValue:new Date()},showTimeSpinner:{defaultValue:false}},EVENTS:{onPick:{},onCancel:{}},setYear:function(h,g,c){var f=this,d=f._date,e=d.getDate(),j=d.getMonth(),i=d.getFullYear();var b=new Date(d.getTime());if(h=="prev"){h=i-1}else{if(h=="next"){h=i+1}}if(j==1&&e==29){var k=a.getDayCountOfMonth(h,d.getMonth());if(e>k){d.setDate(k)}}d.setFullYear(h);if(g){if(c===false){f.refresh()}else{f.doMonthAnimate(b,d)}}},getMonthAnimateType:function(e,g){if(e&&g){var b=e.getFullYear(),f=g.getFullYear(),d=e.getMonth(),c=g.getMonth();
if(b==f&&d==c){return null}if(b==f){return d>c?"r2l":"l2r"}else{return b>f?"t2b":"b2t"}}return null},doMonthAnimate:function(c,k){var j=this,e=j.getMonthAnimateType(c,k);if(j._doMonthAnimating){return}if(e==null){j.refresh();return}var h=j._doms.dateTable,l=j._doms.dateBlock,i=l.offsetWidth,f=l.offsetHeight;var b,g,d,m;switch(e){case"l2r":b=1;g=2;d={width:i*2,left:0,top:0};m={left:-1*i};break;case"r2l":b=2;g=1;d={width:i*2,left:-1*i,top:0};m={left:0};break;case"b2t":b=1;g=3;d={width:i*2,left:0,top:0};m={top:-1*f};break;case"t2b":b=3;g=1;d={width:i*2,left:0,top:-1*f};m={top:0};break}j.refreshDate(c,b);j.refreshDate(k,g);$fly(h).css(d);j._visibleDateRegion=g;j._doMonthAnimating=true;$fly(h).animate(m,{complete:function(){j._doMonthAnimating=false;j.refreshYearMonth()}})},setMonth:function(g,h,c){var f=this,d=f._date,e=d.getDate(),i=d.getFullYear(),j=d.getMonth();var b=new Date(d.getTime());if(g=="prev"){if(j!=0){g=j-1}else{f.setYear(i-1);g=11}}else{if(g=="next"){if(j!=11){g=j+1}else{f.setYear(i+1);
g=0}}}if(e>=29){var k=a.getDayCountOfMonth(i,g);if(e>k){d.setDate(k)}}d.setMonth(g);if(h){if(c===false){f.refresh()}else{f.doMonthAnimate(b,d)}}},setDate:function(b,e){var d=this,c=d._date;switch(b){case"next":c.setDate(c.getDate()+1);break;case"prev":c.setDate(c.getDate()-1);break;case"nextweek":c.setDate(c.getDate()+7);break;case"prevweek":c.setDate(c.getDate()-7);break;default:if(!isNaN(b)){c.setDate(b)}break}if(e){d.refresh()}},refreshDate:function(p,q){var o=this,d=o._doms,f=p||o._date,n=1,r=a.getFirstDayOfMonth(f),m=a.getDayCountOfMonth(f.getFullYear(),f.getMonth()),h=d.dateTable,e=f.getDate(),l=a.getDayCountOfMonth(f.getFullYear(),(f.getMonth()==0?11:f.getMonth()-1));r=(r==0?7:r);var c=0,b=0;q=q||o._visibleDateRegion;switch(q){case 2:b=7;break;case 3:c=6;break;case 4:c=6;b=7;break}for(var k=c;k<c+6;k++){for(var g=b;g<b+7;g++){var s=h.rows[k].cells[g];if(k==c){if(g-b>=r){if(n==e){s.className="selected-date"}else{s.className=null}s.innerHTML=n++}else{s.innerHTML=l-(r-g)+1;s.className="pre-month"
}}else{if(n<=m){if(n==e){s.className="selected-date"}else{s.className=null}s.innerHTML=n++}else{s.innerHTML=n++-m;s.className="next-month"}}}}},refreshYearMonth:function(){var c=this,d=c._doms,b=c._date;d.yearMonthLabel.innerHTML=(b.getMonth()+1)+"&nbsp;&nbsp;"+b.getFullYear()},refreshSpinner:function(){var c=this,d=c._timeSpinner,b=c._date;if(c._showTimeSpinner&&d){d.set({hours:b.getHours(),minutes:b.getMinutes(),seconds:b.getSeconds()})}},refreshDom:function(c){var b=this;b.refreshDate();b.refreshYearMonth();if(b._showTimeSpinner){b.doShowTimeSpinner();b.refreshSpinner()}else{b.doHideTimeSpinner()}$invokeSuper.call(this,arguments)},createDom:function(){var c=$resource("dorado.baseWidget.AllWeeks"),d=c.split(",");var p=[];for(var m=0;m<12;m++){p.push({tagName:"tr",content:[{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"},{tagName:"td"}]})}var o=this,e={},k=$DomUtils.xCreateElement({tagName:"div",className:"d-date-picker",content:[{tagName:"div",className:"year-month-block",content:[{tagName:"div",className:"pre-button-div",contextKey:"prevButtonDiv"},{tagName:"div",className:"next-button-div",contextKey:"nextButtonDiv"},{tagName:"div",className:"year-month-label",contextKey:"yearMonthLabel"}]},{tagName:"table",cellPadding:0,cellSpacing:0,border:0,className:"date-header",contextKey:"dateHeader",content:[{tagName:"tr",className:"header",content:[{tagName:"td",content:d[0]},{tagName:"td",content:d[1]},{tagName:"td",content:d[2]},{tagName:"td",content:d[3]},{tagName:"td",content:d[4]},{tagName:"td",content:d[5]},{tagName:"td",content:d[6]}]}]},{tagName:"div",className:"date-block",contextKey:"dateBlock",content:{tagName:"table",cellPadding:0,cellSpacing:0,border:0,className:"date-table",contextKey:"dateTable",content:p}},{tagName:"div",contextKey:"buttonBlock",className:"button-block"},{tagName:"div",contextKey:"spinnerBlock",className:"spinner-block"}]},null,e);
o._doms=e;var l=new dorado.widget.Button({caption:$resource("dorado.baseWidget.DatePickerToday"),listener:{onClick:function(){o.set("date",new Date())}}});l.render(e.buttonBlock);var h=new dorado.widget.Button({caption:$resource("dorado.baseWidget.DatePickerClear"),listener:{onClick:function(){o.fireEvent("onPick",o,null)}}});h.render(e.buttonBlock);var r=new dorado.widget.Button({caption:$resource("dorado.baseWidget.DatePickerConfirm"),listener:{onClick:function(){o.fireEvent("onPick",o,o._date)}}});r.render(e.buttonBlock);o.registerInnerControl(r);o.registerInnerControl(h);o.registerInnerControl(l);var q=null,j=e.dateTable;if(dorado.Browser.msie&&dorado.Browser.version==6){$fly(j).mousemove(function(s){var i=$DomUtils.getCellPosition(s);if(i&&i.element&&(i.element!=q||!q)){if(i.row<=0){return}if(q){$fly(q).removeClass("hover")}$fly(i.element).addClass("hover");q=i.element}}).mouseout(function(){if(q){$fly(q).removeClass("hover")}q=null})}$fly(j).click(function(v){var i=$DomUtils.getCellPosition(v),t=i.element,s=o._date;
if(i&&t){var u=t.className;if(u.indexOf("next-month")!=-1){o.setMonth(s.getMonth()+1)}else{if(u.indexOf("pre-month")!=-1){o.setMonth(s.getMonth()-1)}}o.setDate(parseInt(t.innerHTML,10),true);o.fireEvent("onPick",o,s)}});var f=new dorado.widget.SimpleIconButton({iconClass:"pre-year-button",listener:{onClick:function(){o.setYear("prev",true)}}});var n=new dorado.widget.SimpleIconButton({iconClass:"pre-month-button",listener:{onClick:function(){o.setMonth("prev",true)}}});f.render(e.prevButtonDiv);n.render(e.prevButtonDiv);var b=new dorado.widget.SimpleIconButton({iconClass:"next-month-button",listener:{onClick:function(){o.setMonth("next",true)}}});var g=new dorado.widget.SimpleIconButton({iconClass:"next-year-button",listener:{onClick:function(){o.setYear("next",true)}}});b.render(e.nextButtonDiv);g.render(e.nextButtonDiv);o.registerInnerControl(f);o.registerInnerControl(n);o.registerInnerControl(b);o.registerInnerControl(g);$fly(e.yearMonthLabel).click(function(){o.showYMPicker()});o._visibleDateRegion=1;
return k},doShowTimeSpinner:function(){var b=this,c=b._timeSpinner;if(!c){c=b._timeSpinner=new dorado.widget.DateTimeSpinner({type:"time",width:100,listener:{onPost:function(){var d=b._date;d.setHours(c.get("hours"));d.setMinutes(c.get("minutes"));d.setSeconds(c.get("seconds"))}}});c.render(b._doms.spinnerBlock);b.registerInnerControl(c)}$fly(c._dom).css("display","")},doHideTimeSpinner:function(){var b=this,c=b._timeSpinner;if(c){$fly(c._dom).css("display","none")}},showYMPicker:function(){var c=this,d=c._dom,b=c._yearMonthPicker;if(!b&&d){b=c._yearMonthPicker=new dorado.widget.YearMonthPicker({style:{display:"none"},listener:{onPick:function(){var e=c._yearMonthPicker,f=e._year,g=e._month;c.setYear(f,false,false);c.setMonth(g,true,false);c.hideYMPicker()},onCancel:function(){c.hideYMPicker()}}});b.render(d);c.registerInnerControl(b)}b.updateDate(c._date);if(!b._rendered){b.render(document.body)}b._opened=true;$fly(b._dom).css("display","").slideIn("t2b")},hideYMPicker:function(c){var d=this,b=d._yearMonthPicker;
if(b){if(c===false){$fly(b._dom).css("display","none")}else{$fly(b._dom).slideOut("b2t")}b._opened=false;dorado.widget.setFocusedControl(d)}},doOnKeyDown:function(e){var d=this,c,b=d._yearMonthPicker;if(b&&b._opened){b.onKeyDown(e)}else{c=d._date;switch(e.keyCode){case 89:if(e.ctrlKey){d.showYMPicker()}break;case 37:if(!e.ctrlKey){d.setDate("prev",true)}else{d.setMonth("prev",true)}break;case 38:if(!e.ctrlKey){d.setDate("prevweek",true)}else{d.setYear("prev",true)}break;case 39:if(!e.ctrlKey){d.setDate("next",true)}else{d.setMonth("next",true)}break;case 40:if(!e.ctrlKey){d.setDate("nextweek",true)}else{d.setYear("next",true)}break;case 13:return true;case 27:if(b&&b._opened){return false}break}}}});dorado.widget.DateDropDown=$extend(dorado.widget.DropDown,{ATTRIBUTES:{width:{defaultValue:260},iconClass:{defaultValue:"d-trigger-icon-date"}},createDropDownBox:function(c,e){var e=this,d=$invokeSuper.call(this,arguments),b=new dorado.widget.DatePicker({listener:{onPick:function(f,g){e.close(g)
},onCancel:function(){e.close()}}});d.set("style",{overflow:"hidden",height:200});d.set("control",b);return d},doOnKeyPress:function(c){var e=this,f=true,d=this.get("box.control"),b=d._yearMonthPicker;switch(c.keyCode){case 27:e.close();f=false;break;case 13:if(!b||!b._opened){d.fireEvent("onPick",d,d._date);f=false}break;default:f=d.onKeyDown(c);break}return f},initDropDownBox:function(e,c){var f=this,d=f.get("box.control");if(d){var b=c.get("value");if(b){d.set("date",b)}if(d._yearMonthPicker&&d._yearMonthPicker._opened){d.hideYMPicker(false)}}}});dorado.widget.View.registerDefaultComponent("defaultDateDropDown",function(){return new dorado.widget.DateDropDown()})})();(function(){var b=["width","height","className","exClassName"];var a=[{state:"ok"}];dorado.widget.FormConfig=$class({$className:"dorado.widget.FormConfig",ATTRIBUTES:{width:{},height:{},className:{},exClassName:{},type:{writeBeforeReady:true},trigger:{},entity:{},labelSeparator:{defaultValue:":"},showLabel:{defaultValue:true},labelWidth:{defaultValue:80},labelSpacing:{defaultValue:3},labelPosition:{writeBeforeReady:true},labelAlign:{writeBeforeReady:true},editorWidth:{},showHint:{writeBeforeReady:true,defaultValue:true},hintWidth:{defaultValue:22},hintSpacing:{defaultValue:3},showHintMessage:{writeBeforeReady:true},hintPosition:{writeBeforeReady:true},readOnly:{}}});
dorado.widget.FormProfile=$extend([dorado.widget.Component,dorado.widget.FormConfig],{$className:"dorado.widget.FormProfile",ATTRIBUTES:{entity:{defaultValue:function(){return{}}},dataSet:{componentReference:true,writeBeforeReady:true},dataPath:{writeBeforeReady:true}},constructor:function(){this._bindingElements=new dorado.ObjectGroup();$invokeSuper.call(this,arguments);this.addListener("onAttributeChange",function(e,d){var c=d.attribute;if(!dorado.widget.Control.prototype.ATTRIBUTES[c]&&dorado.widget.FormConfig.prototype.ATTRIBUTES[c]){dorado.Toolkits.setDelayedAction(e,"$profileChangeTimerId",function(){var f=d.value;e._bindingElements.invoke("onProfileChange")},20)}})}});dorado.widget.FormElement=$extend([dorado.widget.Control,dorado.widget.FormConfig],{$className:"dorado.widget.FormElement",ATTRIBUTES:{width:{defaultValue:260,writeBeforeReady:true,independent:true},height:{writeBeforeReady:true},className:{defaultValue:"d-form-element"},formProfile:{componentReference:true,setter:function(e,d){if(dorado.Object.isInstanceOf(this._formProfile,dorado.widget.FormProfile)){this._formProfile._bindingElements.objects.remove(this)
}if(d&&!dorado.Object.isInstanceOf(d,dorado.widget.FormProfile)){var c=d;d=c.view.id(c.component)}this._formProfile=d;if(d){d._bindingElements.objects.push(this)}}},dataSet:{setter:function(d,c){this._dataSet=c;delete this._propertyDef}},dataPath:{setter:function(d,c){this._dataPath=c;delete this._propertyDef}},property:{writeBeforeReady:true},label:{},hint:{setter:function(e,f){function d(g){if(!g){return null}if(typeof g=="string"){g=[{level:"info",text:g}]}else{g.level=g.level||"info";g=[g]}return g}function c(k){if(!k){return null}if(k instanceof Array){var l=[];for(var g=0;g<k.length;g++){var j=d(k[g]);if(!j){continue}l.push(j)}k=(l.length)?l:null}else{k=d(k)}return k}this._hint=c(f)}},editor:{writeBeforeReady:true,innerComponent:"TextEditor"},value:{path:"editor.value"},readOnly:{setter:function(d,c){this._readOnly=c;this.resetEditorReadOnly()}}},render:function(e,d){if(!this._ready){if(!this._formProfile){var c=this.get("view")||dorado.widget.View.TOP;this.set("formProfile",c.id("defaultFormProfile"))
}this.onProfileChange()}$invokeSuper.call(this,arguments)},destroy:function(){if(this._destroyed){return}this.set("formProfile",null);$invokeSuper.call(this,arguments)},createDom:function(){var c,d={tagName:"DIV",className:"form-editor"};if(this._labelPosition=="top"){c={tagName:"DIV",className:"form-label form-label-top",style:{position:"absolute"},};if(this._labelAlign=="right"){c.style.right=0}else{c.style.left=0}d.style={width:"100%",overflow:"hidden"}}else{c={tagName:"DIV",className:"form-label form-label-left"+((this._labelAlign=="right")?" form-label-align-right":""),style:{position:"absolute",top:0,width:this._labelWidth}};d.style={paddingLeft:this._labelWidth+this._labelSpacing+"px",height:"100%",overflow:"hidden"}}if(!this._showLabel){c.style.display="none"}if(this._showHint){var e={tagName:"DIV",className:"form-hint"};d.content=[e];if(this._hintPosition=="bottom"){e.style={width:"100%"}}else{e.style={position:"absolute",right:0,top:0}}}var f=$DomUtils.xCreateElement({tagName:"DIV",content:[c,d],style:{position:"relative",overflow:"hidden"}});
this._labelEl=f.firstChild;this._editorEl=f.lastChild;this._hintEl=this._editorEl.firstChild;return f},createEditor:function(c){switch(c){case"textArea":return new dorado.widget.TextArea();case"checkBox":return new dorado.widget.CheckBox();case"radioGroup":return new dorado.widget.RadioGroup({layout:"flow"});default:return new dorado.widget.TextEditor()}},getEditor:function(){function l(q){var o=[],m=q._mapping;if(m){for(var n=0;n<m.length;n++){var p=m[n];o.push({value:p.key,text:p.value})}}return o}var f=this._editor,c=true;if(!f){var j=this.getBindingPropertyDef();if(j){if(!this._type){var e=j.get("dataType");if(e){if(e._code==dorado.DataType.PRIMITIVE_BOOLEAN||e._code==dorado.DataType.BOOLEAN){this._type=(!j._mapping)?"checkBox":"radioGroup"}}}if(j._mapping){if((!this._type||this._type=="textEditor")){this._trigger=new dorado.widget.AutoMappingDropDown({items:j._mapping})}}}this._editor=f=this.createEditor(this._type);if(f){var d={};this.initEditorConfig(d);f.set(d,{skipUnknownAttribute:true,tryNextOnError:true})
}c=false}if(f&&!this._controlRegistered){this._controlRegistered=true;if(this._showHint&&f instanceof dorado.widget.AbstractEditor){if(f instanceof dorado.widget.AbstractTextBox){f.addListener("onValidationStateChange",$scopify(this,this.onEditorStateChange));f.addListener("onPost",$scopify(this,this.onEditorPost))}f.addListener("onPostFailed",$scopify(this,this.onEditorPostFailed))}if(c){var h={},g={},k=f.ATTRIBUTES;this.initEditorConfig(h);for(var i in h){if(!k[i]||k[i].writeOnly){continue}if(h[i]!=null){g[i]=h[i]}}f.set(g,{skipUnknownAttribute:true,tryNextOnError:true,preventOverwriting:true})}this.registerInnerControl(f)}return f},getHintControl:function(){var c=this._hintControl;if(!c){this._hintControl=c=new dorado.widget.DataMessage({dataSet:this._dataSet,dataPath:this._dataPath,property:this._property,showIconOnly:!this._showHintMessage})}if(c&&!this._hintControlRegistered){this._hintControlRegistered=true;this.registerInnerControl(c)}return c},initEditorConfig:function(c){if(this._type=="password"){c.password=true
}if(this._trigger){c.trigger=this._trigger}if(this._readOnly){c.readOnly=this._readOnly||this._realReadOnly}if(this._entity){c.entity=this._entity}if(this._dataSet){c.dataSet=this._dataSet}if(this._dataPath){c.dataPath=this._dataPath}if(this._property){c.property=this._property}},resetEditorReadOnly:function(){if(this._editor&&this._editor instanceof dorado.widget.AbstractEditor){this._editor.set("readOnly",this._readOnly||this._realReadOnly)}},onEditorStateChange:function(e,d){var c=this.getHintControl();if(c){c.set("messages",e.get("validationMessages"))}},onEditorPost:function(e,d){var c=this.getHintControl();if(c){setTimeout(function(){messages=e.get("validationMessages");c.set("messages",messages||a)},0)}},onEditorPostFailed:function(f,d){if(!this._dataSet){var e=d.exception;if(e instanceof dorado.widget.editor.PostException){var c=this.getHintControl();if(c){c.set("messages",e.messages)}}}d.processDefault=false},getBindingPropertyDef:function(){var f=this._propertyDef;if(!f){var d=this._dataSet,e=dorado.DataPath.create(this._dataPath),c;
if(d){c=e.getDataType(d.get("dataType"))}if(c){this._propertyDef=f=c.getPropertyDef(this._property)}}return f},getLabel:function(){var c=this._label;if(!c&&this._dataSet){var d=this.getBindingPropertyDef();if(d){c=d._label||d._name}}return c||this._property},isRequired:function(){var d;if(this._dataSet){d=this.getBindingPropertyDef()}var e=d?d._required:false;if(!e){var c=this.getEditor();e=(c&&c instanceof dorado.widget.TextEditor&&c.get("required"))}return e},onProfileChange:function(){var f=this._formProfile;if(dorado.Object.isInstanceOf(f,dorado.widget.FormProfile)){var e=f.ATTRIBUTES,d={};for(var c in e){if(!e.hasOwnProperty(c)||e[c].writeOnly){continue}if(b.indexOf(c)>=0&&f instanceof dorado.widget.Control){continue}var g=f.get(c);if(g!=null){d[c]=g}}this.set(d,{skipUnknownAttribute:true,tryNextOnError:true,preventOverwriting:true})}},refreshDom:function(i){var p=this._height||this._realHeight;$invokeSuper.call(this,arguments);var i=this._dom,e=this._editorEl,c=this._labelEl,k=this._hintEl,j=this.getEditor();
if(this._showLabel){c.style.display="";c.style.textAlign=this._labelAlign||"left";var m=this.getLabel();c.innerText=(m||"")+((this._labelSeparator&&m)?this._labelSeparator:"");$fly(c).toggleClass("form-label-required",!!this.isRequired())}else{if(c){c.style.display="none"}}var l=0,h=0,g=0,f=0;if(this._labelPosition=="top"){h=c.offsetHeight+this._labelSpacing;e.style.paddingTop=h+"px";g=i.offsetWidth;if(p){e.style.height=(i.offsetHeight-h)+"px"}}else{l=this._labelWidth+this._labelSpacing;g=i.offsetWidth-l;if(g>0){e.style.width=g+"px"}}if(j){var d={};if(k){var o=!j.ATTRIBUTES.height.independent;if(this._hintPosition=="bottom"){d.width=i.offsetWidth-l;if(p&&o){d.height=e.offsetHeight-h-k.offsetHeight}}else{if(o){d.height=e.offsetHeight-h}if(this._editorWidth>0){d.width=this._editorWidth}else{f=this._hintWidth+this._hintSpacing;d.width=g-f}}}else{d.width=i.offsetWidth-l;d.height=e.offsetHeight}if(d.width){j._realWidth=d.width}if(d.height){j._realHeight=d.height}if(!j.get("rendered")){j.render(e,e.firstChild)
}else{j.refresh()}}if(k){var n=this.getHintControl();if(this._hintPosition!="bottom"){if(this._labelPosition=="top"){k.style.top=h+"px"}if(this._editorWidth>0){k.style.width=(e.clientWidth-this._editorWidth-this._hintSpacing)+"px"}else{k.style.width=this._hintWidth+"px"}if(e.clientHeight){k.style.height=e.clientHeight+"px"}}if(!n.get("rendered")){n.render(k)}}}});dorado.widget.View.registerDefaultComponent("defaultFormProfile",function(){return new dorado.widget.FormProfile()})})();dorado.widget.autoform={};dorado.widget.autoform.AutoFormElement=$extend(dorado.widget.FormElement,{$className:"dorado.widget.autoform.AutoFormElement",ATTRIBUTES:{width:{independent:false},name:{writeOnce:true,setter:function(b,a){this._name=a;if(!this.getAttributeWatcher().getWritingTimes("property")){this._property=a}}}}});dorado.widget.AutoForm=$extend([dorado.widget.Control,dorado.widget.FormProfile],{$className:"dorado.widget.AutoForm",ATTRIBUTES:{className:{defaultValue:"d-auto-form"},formProfile:{componentReference:true,setter:function(c,b){if(dorado.Object.isInstanceOf(this._formProfile,dorado.widget.FormProfile)){this._formProfile._bindingElements.objects.remove(this)
}if(b&&!dorado.Object.isInstanceOf(b,dorado.widget.FormProfile)){var a=b;b=a.view.id(a.component)}this._formProfile=b;if(b){b._bindingElements.objects.push(this)}}},cols:{skipRefresh:true,setter:function(b,a){this._cols=a;if(this._rendered){this.refreshFormLayout()}}},rowHeight:{},cellSpacing:{},cellPadding:{},stretchWidth:{},padding:{},dataType:{getter:dorado.LazyLoadDataType.dataTypeGetter},autoCreateElements:{},elements:{skipRefresh:true,setter:function(e,d){if(this._rendered){var a=this._container,c;if(a){c=a.get("layout");c.disableRendering()}try{if(a){this._elements.each(function(f){a.removeChild(f)})}this._elements.clear();if(!d){return}for(var b=0;b<d.length;b++){this.addElement(d[b])}}finally{if(a){c.enableRendering();a.refresh(true)}}}else{this._elementConfigs=d}}}},addElement:function(d){var e=this._elements;if(!(d instanceof dorado.widget.Control)){if(d){var f=d._layoutConstraint;var c=dorado.Object.apply({},{layoutConstraint:f,entity:this._entity,dataSet:this._dataSet,dataPath:this._dataPath,formProfile:this},function(h,g){return(g!==undefined)
});dorado.Object.apply(c,d);if(!c.name){var b=c.property||"_unnamed";if(e.get(b)){var a=2;while(!e.get(b+"_"+a)){a++}b=b+"_"+a}c.name=b}d=dorado.Toolkits.createInstance("widget",c,function(g){if(!g){return dorado.widget.autoform.AutoFormElement}})}else{d=new dorado.widget.Control(c)}}e.append(d);if(this._container){this._container.addChild(d)}return d},removeElement:function(a){this._elements.remove(a);if(this._container){this._container.removeChild(a)}},getElement:function(a){return this._elements.get(a)},constructor:function(){this._elements=new dorado.util.KeyedArray(function(a){return(a instanceof dorado.widget.autoform.AutoFormElement)?a._name:a._id});this._container=new dorado.widget.Container({layout:"Form",contentOverflow:"visible"});this.registerInnerControl(this._container);this._bindingElements=new dorado.ObjectGroup();$invokeSuper.call(this,arguments);this.addListener("onAttributeChange",function(c,b){var a=b.attribute;if(a=="readOnly"){var g=c._readOnly,f=c._bindingElements.objects;
for(var e=0;e<f.length;e++){var d=f[e];if(d instanceof dorado.widget.FormElement){d._realReadOnly=g;d.resetEditorReadOnly()}}}else{if(!dorado.widget.Control.prototype.ATTRIBUTES[a]&&dorado.widget.FormConfig.prototype.ATTRIBUTES[a]){dorado.Toolkits.setDelayedAction(c,"$profileChangeTimerId",function(){var h=b.value;c._bindingElements.invoke("onProfileChange")},20)}}})},refreshDom:function(d){$invokeSuper.call(this,arguments);var a=this._container;if(!a._rendered){if(this._elementConfigs){var c=this._elementConfigs;for(var b=0;b<c.length;b++){this.addElement(c[b])}delete this._elementConfigs}if(this._autoCreateElements&&!this._defaultElementsGenerated){this.generateDefaultElements()}this.initLayout(a.get("layout"));a.render(d)}},onResize:function(){var b=this.getDom(),a=this._container;a._realWidth=b.offsetWidth;a._realHeight=b.offsetHeight;a.resetDimension()},refreshFormLayout:function(){var a=this._container,b=a.get("layout");a.refresh();this.initLayout(b);b.refresh()},initLayout:function(a){configs={};
if(this._cols){configs.cols=this._cols}if(this._rowHeight){configs.rowHeight=this._rowHeight}if(this._cellSpacing){configs.cellSpacing=this._cellSpacing}if(this._cellPadding){configs.cellPadding=this._cellPadding}if(this._stretchWidth){configs.stretchWidth=this._stretchWidth}if(this._padding){configs.padding=this._padding}a.set(configs)},generateDefaultElements:function(){var c=this.get("dataType");if(!c&&this._dataSet){var e=dorado.DataPath.create(this._dataPath);c=e.getDataType(this._dataSet.get("dataType"))}if(!c&&this._entity){c=this._entity.dataType}if(c&&c instanceof dorado.EntityDataType){this._defaultElementsGenerated=true;var a=this._container,f;if(a){f=a.get("layout");f.disableRendering()}var b=this,g=b._elements,d;c.get("propertyDefs").each(function(k){if(!k._visible){return}var i=k._name,j=g.get(i);if(!j){d={name:i,property:i}}else{d={property:i};b.removeElement(j);b.addElement(j)}var h=k.get("dataType");if(h instanceof dorado.EntityDataType||h instanceof dorado.AggregationDataType){return
}if(!j){j=b.addElement(d)}else{j.set(d,{tryNextOnError:true,preventOverwriting:true})}if(j instanceof dorado.widget.FormElement&&!this._dataSet&&k._readOnly){j._realReadOnly=true}});if(a){f.enableRendering();a.refresh(true)}}},validate:function(){var a=true,b=this._elements;this._elements.each(function(c){if(c instanceof dorado.widget.FormElement){var d=c.get("editor");if(d&&d instanceof dorado.widget.AbstractTextBox){if(d.get("validateState")=="none"){d.post()}if(a&&d.get("validateState")=="invalid"){a=false}}}});return a}});(function(){dorado.widget.SpinnerTrigger=$extend(dorado.widget.Trigger,{$className:"dorado.widget.SpinnerTrigger",ATTRIBUTES:{className:{defaultValue:"d-spinner-trigger"}},createTriggerButton:function(editor){var trigger=this,control=new dorado.widget.HtmlContainer({content:{tagName:"div",className:trigger._className,content:[{tagName:"div",className:"up-button",contextKey:"upButton"},{tagName:"div",className:"down-button",contextKey:"downButton"}]}});control.getDom();
jQuery(control.getSubDom("upButton")).repeatOnClick(function(){editor.doStepUp()},150).addClassOnClick("up-button-click",null,function(){return !editor.get("readOnly")});jQuery(control.getSubDom("downButton")).repeatOnClick(function(){editor.doStepDown()},150).addClassOnClick("down-button-click",null,function(){return !editor.get("readOnly")});return control}});dorado.widget.Spinner=$extend(dorado.widget.AbstractTextBox,{$className:"dorado.widget.Spinner",focusable:true,ATTRIBUTES:{trigger:{getter:function(p,v){var triggers=this._trigger;if(triggers&&!(triggers instanceof Array)){triggers=[triggers]}var spinnerTriggers=this.getSpinnerTriggers();return triggers?spinnerTriggers.concat(triggers):spinnerTriggers}},showSpinTrigger:{defaultValue:true},step:{defaultValue:1}},constructor:function(){$invokeSuper.call(this,arguments);this._triggerChanged=true},getSpinnerTriggers:function(){if(!this._showSpinTrigger){return[]}if(!this._spinTrigger){var triggers=this._spinTrigger=[],self=this;triggers.push(new dorado.widget.SpinnerTrigger({}))
}return this._spinTrigger},createDom:function(){var dom=$invokeSuper.call(this,arguments),self=this;jQuery(dom).addClassOnHover(this._className+"-hover",null,function(){return !self.get("readOnly")});return dom}});dorado.widget.NumberSpinner=$extend(dorado.widget.Spinner,{ATTRIBUTES:{min:{defaultValue:-2147483648},max:{defaultValue:2147483648},text:{defaultValue:0},value:{getter:function(){return parseInt(this.get("text"),10)}},selectTextOnFocus:{defaultValue:true}},createTextDom:function(){var textDom=document.createElement("INPUT");textDom.className="editor";if(!(dorado.Browser.msie&&dorado.Browser.version<"7")){textDom.style.padding=0}if(dorado.Browser.msie&&dorado.Browser.version>"7"){textDom.style.top=0;textDom.style.position="absolute"}return textDom},doGetText:function(){return(this._textDom)?this._textDom.value:this._text},doSetText:function(text){if(this._textDom){this._textDom.value=text}else{this._text=text}},doStepUp:function(){var spinner=this;var value=parseInt(spinner.get("value"),10);
if(!isNaN(value)){spinner.set("value",value+spinner._step)}},doStepDown:function(){var spinner=this;var value=parseInt(spinner.get("value"),10);if(!isNaN(value)){spinner.set("value",value-spinner._step)}},post:function(force){var text=this.get("text"),value=parseInt(text)||0;if(value>this._max){value=this._max}else{if(value<this._min){value=this._min}}this._value=value;this.doSetText(value+"");$invokeSuper.call(this,arguments)},doOnFocus:function(){$invokeSuper.call(this,arguments);if(this._selectTextOnFocus){$setTimeout(this,function(){this._textDom.select()},0)}}});dorado.widget.MultiSlotSpinner=$extend(dorado.widget.Spinner,{$className:"dorado.widget.MultiSlotSpinner",slotConfigs:[{}],defaultSlot:0,constructor:function(){if(this.slotConfigs){this.initSlotConfigs()}this._currentSlotIndex=0;$invokeSuper.call(this,arguments)},initSlotConfigs:function(){var slotConfigs=this.slotConfigs,slotMap=this._slotMap={},values=this._values=[];for(var i=0,j=slotConfigs.length;i<j;i++){var config=slotConfigs[i],name=config.name;
config.className=config.className||"slot";config.defaultValue=config.defaultValue||0;config.range=config.range||[null,null];slotMap[name]=config;values[i]=config.defaultValue}},createTextDom:function(){var spinner=this,doms={},dom=$DomUtils.xCreateElement({tagName:"div",className:"editor slots-container",contextKey:"editor"},null,doms);spinner._doms=doms;var slotConfigs=spinner.slotConfigs;for(var i=0,j=slotConfigs.length;i<j;i++){var config=slotConfigs[i],name=config.name;var label=document.createElement("span");label.className=config.className;label.slotIndex=i;doms["slot_"+i]=label;$fly(label).mousedown(function(){spinner.doChangeCurrentSlot(parseInt(this.slotIndex))});if(config.prefix){var spEl=document.createElement("span");$fly(spEl).text(config.prefix).attr("class","text");$fly(doms.editor).append(spEl)}$fly(doms.editor).append(label);if(config.suffix){var spEl=document.createElement("span");$fly(spEl).text(config.suffix).attr("class","text");$fly(doms.editor).append(spEl)}}return dom
},doGetSlotRange:function(slotIndex){if(typeof slotIndex=="string"){slotIndex=this.getSlotIndexByName(slotIndex)}return this.slotConfigs[slotIndex].range},getSlotIndexByName:function(name){var config=this._slotMap[name];return config?this.slotConfigs.indexOf(config):-1},doGetSlotValue:function(slotIndex){this._slotValueChanged=true;if(typeof slotIndex=="string"){slotIndex=this.getSlotIndexByName(slotIndex)}return this._values[slotIndex]},doSetSlotValue:function(slotIndex,value){var spinner=this;if(typeof slotIndex=="string"){slotIndex=spinner.getSlotIndexByName(slotIndex)}if(slotIndex<0){return}var config=spinner.slotConfigs[slotIndex],range=config.range||[],minValue=range[0],maxValue=range[1];value=parseInt(value,10);if(!isNaN(value)){if(maxValue!=null&&value>maxValue){value=maxValue}else{if(minValue!=null&&value<minValue){value=minValue}}}else{value=config.defaultValue||0}this._values[slotIndex]=value;dorado.Toolkits.setDelayedAction(spinner,"$refreshDelayTimerId",spinner.refresh,50)},doGetSlotText:function(slotIndex){var spinner=this;
if(typeof slotIndex=="string"){slotIndex=spinner.getSlotIndexByName(slotIndex)}if(slotIndex<0){return""}var config=spinner.slotConfigs[slotIndex];var text=this.doGetSlotValue(slotIndex);if(text==null){text="&nbsp;"}else{var num=text,negative=(num<0),text=Math.abs(num)+"";if(config.digit>0&&text.length<config.digit){for(var i=text.length;i<=config.digit-1;i++){text="0"+text}}text=(negative?"-":"")+text}return text},doStepUp:function(){var spinner=this,currentSlotIndex=spinner._currentSlotIndex;if(!currentSlotIndex){currentSlotIndex=spinner.doChangeCurrentSlot()}var value=spinner.doGetSlotValue(currentSlotIndex)+spinner._step;var config=spinner.slotConfigs[currentSlotIndex],range=config.range||[],minValue=range[0],maxValue=range[1];if(maxValue!=null&&minValue!=null&&value>maxValue){value=minValue}spinner.doSetSlotValue(currentSlotIndex,value)},doStepDown:function(){var spinner=this,currentSlotIndex=spinner._currentSlotIndex;if(!currentSlotIndex){currentSlotIndex=spinner.doChangeCurrentSlot()
}var value=spinner.doGetSlotValue(currentSlotIndex)-spinner._step;var config=spinner.slotConfigs[currentSlotIndex],range=config.range||[],minValue=range[0],maxValue=range[1];if(maxValue!=null&&minValue!=null&&value<minValue){value=maxValue}spinner.doSetSlotValue(currentSlotIndex,value)},doOnKeyDown:function(event){var spinner=this,retval=true;switch(event.keyCode){case 38:spinner.doStepUp();retval=false;break;case 40:spinner.doStepDown();retval=false;break;case 8:if(spinner._currentSlotIndex>=0){var currentSlotIndex=spinner._currentSlotIndex,value,range=spinner.doGetSlotRange(currentSlotIndex);if(spinner._neverEdit){value=0}else{var text=spinner.doGetSlotText(currentSlotIndex);value=parseInt(text.substring(0,text.length-1),10)}spinner.doSetSlotValue(currentSlotIndex,value)}retval=false;break;case 9:if(event.ctrlKey||!event.shiftKey&&spinner._currentSlotIndex==spinner.slotConfigs.length-1||event.shiftKey&&spinner._currentSlotIndex==0){retval=true}else{spinner.doChangeCurrentSlot(event.shiftKey?"prev":"next");
retval=false}break;case 187:if(spinner._currentSlotIndex>=0){var currentSlotIndex=spinner._currentSlotIndex,value=spinner.doGetSlotValue(currentSlotIndex)||0;if(value){value=Math.abs(value);spinner.doSetSlotValue(currentSlotIndex,value)}retval=false}break;case 189:if(spinner._currentSlotIndex>=0){var currentSlotIndex=spinner._currentSlotIndex,value=spinner.doGetSlotValue(currentSlotIndex)||0;if(value){value=0-Math.abs(value);spinner.doSetSlotValue(currentSlotIndex,value)}retval=false}break;default:if(spinner._currentSlotIndex>=0){if(event.keyCode>=48&&event.keyCode<=57){var number=event.keyCode-48,currentSlotIndex=spinner._currentSlotIndex,range=spinner.doGetSlotRange(currentSlotIndex),maxValue=range[1];var value=spinner._neverEdit?0:(spinner.doGetSlotValue(currentSlotIndex)||0),ignore=false;var config=spinner.slotConfigs[currentSlotIndex],digit=config.digit;if(!digit&&maxValue!=null){digit=(maxValue+"").length}if(digit&&(value+"").length==digit){ignore=true}else{value=value*10+number;ignore=(maxValue!=null&&value>maxValue)
}if(!ignore){spinner.doSetSlotValue(currentSlotIndex,value)}retval=false}}break}if(retval===false){spinner._neverEdit=false}return retval},doChangeCurrentSlot:function(slotIndex){var spinner=this;if(typeof slotIndex=="string"){if(slotIndex=="next"){slotIndex=(spinner._currentSlotIndex>=0)?spinner._currentSlotIndex+1:spinner.defaultSlot}else{if(slotIndex=="prev"){slotIndex=(spinner._currentSlotIndex>=0)?spinner._currentSlotIndex-1:spinner.defaultSlot}else{slotIndex=spinner.getSlotIndexByName(slotIndex)}}}slotIndex=slotIndex||0;var oldSlotIndex=spinner._currentSlotIndex,doms=spinner._doms;var config=spinner.slotConfigs[slotIndex];if(config){if(oldSlotIndex>=0){var oldSlotConfig=spinner.slotConfigs[oldSlotIndex];$fly(doms["slot_"+oldSlotIndex]).removeClass(oldSlotConfig.className+"-selected");spinner.doAfterSlotBlur(oldSlotIndex)}$fly(doms["slot_"+slotIndex]).addClass(config.className+"-selected");spinner._currentSlotIndex=slotIndex;return slotIndex}else{return oldSlotIndex}},doAfterSlotBlur:function(slotIndex){var spinner=this,value=spinner.doGetSlotValue(slotIndex);
if(value==null){spinner.doSetSlotValue(slotIndex,spinner.slotConfigs[slotIndex].defaultValue||0)}},doOnBlur:function(){var spinner=this,currentSlotIndex=spinner._currentSlotIndex,doms=spinner._doms;if(currentSlotIndex>=0){$fly(doms["slot_"+currentSlotIndex]).removeClass(spinner.slotConfigs[currentSlotIndex].className+"-selected");spinner.doAfterSlotBlur(currentSlotIndex)}this.post(true)},doOnFocus:function(){var spinner=this,currentSlotIndex=spinner._currentSlotIndex,doms=spinner._doms;spinner._neverEdit=true;if(currentSlotIndex>=0){$fly(doms["slot_"+currentSlotIndex]).addClass(spinner.slotConfigs[currentSlotIndex].className+"-selected")}},refreshDom:function(){$invokeSuper.call(this,arguments);var spinner=this,doms=spinner._doms;for(var i=0;i<spinner.slotConfigs.length;i++){$fly(doms["slot_"+i]).html(spinner.doGetSlotText(i))}},doGetText:function(){var spinner=this,slotConfigs=spinner.slotConfigs,text="";for(var i=0;i<slotConfigs.length;i++){var config=slotConfigs[i];text+=config.prefix||"";
text+=spinner.doGetSlotText(i);text+=config.suffix||""}return text}});function slotAttributeGetter(attr){return this.doGetSlotValue(attr)}function slotAttributeSetter(attr,value){this.doSetSlotValue(attr,value)}var now=new Date();dorado.widget.DateTimeSpinner=$extend(dorado.widget.MultiSlotSpinner,{$className:"dorado.widget.DateTimeSpinner",slotConfigTemplate:{year:{name:"year",range:[1,9999],defaultValue:now.getFullYear()},month:{name:"month",range:[1,12],defaultValue:now.getMonth()+1,digit:2,prefix:"-"},date:{name:"date",range:[1,31],defaultValue:now.getDate(),digit:2,prefix:"-"},hours:{name:"hours",range:[0,23],digit:2,prefix:" "},leading_hours:{name:"hours",range:[0,23],digit:2},minutes:{name:"minutes",range:[0,59],digit:2,prefix:":"},seconds:{name:"seconds",range:[0,59],digit:2,prefix:":"}},ATTRIBUTES:{type:{writeOnce:true,writeBeforeReady:true,setter:function(p,type){this._type=type=type||"time";this._typeChanged=true;var configs,template=this.slotConfigTemplate;switch(type){case"date":configs=[template.year,template.month,template.date];
break;case"time":configs=[template.leading_hours,template.minutes,template.seconds];break;case"dateTime":configs=[template.year,template.month,template.date,template.hours,template.minutes,template.seconds];break;case"hours":configs=[template.leading_hours];break;case"minutes":configs=[template.leading_hours,template.minutes];break;case"dateHours":configs=[template.year,template.month,template.date,template.hours];break;case"dateMinutes":configs=[template.year,template.month,template.date,template.hours,template.minutes];break}this.slotConfigs=configs;this.initSlotConfigs()}},year:{getter:slotAttributeGetter,setter:slotAttributeSetter},month:{getter:slotAttributeGetter,setter:slotAttributeSetter},date:{getter:slotAttributeGetter,setter:slotAttributeSetter},hours:{getter:slotAttributeGetter,setter:slotAttributeSetter},minutes:{getter:slotAttributeGetter,setter:slotAttributeSetter},seconds:{getter:slotAttributeGetter,setter:slotAttributeSetter},value:{getter:function(p){var year=this.doGetSlotValue("year")||1980;
var month=(this.doGetSlotValue("month")-1)||0;var date=this.doGetSlotValue("date")||1;var hours=this.doGetSlotValue("hours")||0;var minutes=this.doGetSlotValue("minutes")||0;var seconds=this.doGetSlotValue("seconds")||0;return new Date(year,month,date,hours,minutes,seconds)},setter:function(p,d){var year=0,month=1,date=1,hours=0,minutes=1,seconds=1;if(d){year=d.getFullYear();month=d.getMonth()+1;date=d.getDate();hours=d.getHours();minutes=d.getMinutes();seconds=d.getSeconds()}this.doSetSlotValue("year",year);this.doSetSlotValue("month",month);this.doSetSlotValue("date",date);this.doSetSlotValue("hours",hours);this.doSetSlotValue("minutes",minutes);this.doSetSlotValue("seconds",seconds);this.doSetValidateState("none")}}},constructor:function(){this.slotConfigs=[];$invokeSuper.call(this,arguments)},createTextDom:function(){if(!this._typeChanged){this.set("type","time")}return $invokeSuper.call(this,arguments)},doSetSlotValue:function(slotIndex,value){var spinner=this,slotName;if(typeof slotIndex=="number"){slotName=spinner.slotConfigs[slotIndex].name
}else{slotName=slotIndex;slotIndex=spinner.getSlotIndexByName(slotIndex)}if(!spinner._slotMap[slotName]){return}if(!spinner._slotMap.date){$invokeSuper.call(this,arguments);return}var dateSlotIndex=spinner.getSlotIndexByName("date"),date=spinner._values[dateSlotIndex],newDate=0;if(date>=28){var year=(slotIndex==0)?value:spinner._values[0];var month=(slotIndex==1)?value:spinner._values[1];var dayCount=new Date(year,month-1).getDaysInMonth();if(date>dayCount){newDate=dayCount}}if(newDate){if(slotName=="year"||slotName=="month"){spinner.doSetSlotValue("date",newDate);$invokeSuper.call(this,arguments)}else{$invokeSuper.call(this,[slotIndex,newDate])}}else{$invokeSuper.call(this,arguments)}},doGetSlotRange:function(slotIndex){var spinner=this,slotName;if(typeof slotIndex=="number"){slotName=spinner.slotConfigs[slotIndex].name}else{slotName=slotIndex}if(slotName=="date"&&spinner._slotMap.date){var year=spinner._values[0],month=spinner._values[1],dayCount=new Date(year,month-1).getDaysInMonth();
return[1,dayCount]}else{return $invokeSuper.call(this,arguments)}},doSetText:function(text){var format;switch(this._type){case"date":format="Y-m-d";break;case"time":format="h:i:s";break;case"dateTime":format="Y-m-d h:i:s";break;case"hours":format="h";break;case"minutes":format="h:i";break;case"dateHours":format="Y-m-d h";break;case"dateMinutes":format="Y-m-d h:i";break}this.set("value",format)}});dorado.widget.CustomSpinner=$extend(dorado.widget.MultiSlotSpinner,{$className:"dorado.widget.CustomSpinner",ATTRIBUTES:{pattern:{writeOnce:true,writeBeforeReady:true,setter:function(p,pattern){this.parsePattern(pattern)}},value:{getter:function(){return this._values},setter:function(p,v){var v=v||[];for(var i=0;i<this.slotConfigs.length;i++){this.doSetSlotValue(i,v[i])}this.doSetValidateState("none")}}},parsePattern:function(pattern){function parseSlotConfig(slotConfig){var slot={},sections=slotConfig.split("|");if(sections[0]!="*"){var range=sections[0].replace(/\*/g,"null");slot.range=eval("["+range+"]")
}if(sections[1]){slot.digit=parseInt(sections[1])}return slot}if(!pattern){throw new dorado.ResourceException("dorado.core.AttributeValueRequired","pattern")}this.slotConfigs=[];var i=0,c,text="",slotConfig="",inSlot=false;while(i<pattern.length){c=pattern.charAt(i);if(inSlot){if(c=="]"){var slot=parseSlotConfig(slotConfig);if(text){slot.prefix=text}this.slotConfigs.push(slot);inSlot=false;text=slotConfig=""}else{slotConfig+=c}}else{if(c=="\\"){c=pattern.charAt(++i);text+=c}else{if(c=="["){inSlot=true}else{text+=c}}}i++}if(!this.slotConfigs.length){throw new dorado.ResourceException("dorado.baseWidget.InvalidSpinnerPattern",pattern)}if(text){this.slotConfigs.peek().suffix=text}this.initSlotConfigs()},doSetText:dorado._UNSUPPORTED_FUNCTION()})})();