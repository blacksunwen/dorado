(function(){try{if(HTMLElement&&!HTMLElement.prototype.innerText){HTMLElement.prototype.__defineGetter__("innerText",function(){var b=this.textContent;if(b){b=b.replace(/<BR>/g,"\n")}return b});HTMLElement.prototype.__defineSetter__("innerText",function(c){if(c&&c.constructor==String){var d=c.split("\n");if(d.length>1){this.innerHTML="";for(var b=0;b<d.length;b++){if(b>0){this.appendChild(document.createElement("BR"))}this.appendChild(document.createTextNode(d[b]))}return}}this.textContent=c})}}catch(a){}if(!Array.prototype.push){Array.prototype.push=function(b){this[this.length]=b}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){for(var b=0;b<this.length;b++){if(this[b]==c){return b}}return -1}}if(!Array.prototype.remove){Array.prototype.remove=function(c){var b=this.indexOf(c);if(b>=0){this.splice(b,1)}return b}}if(!Array.prototype.removeAt){Array.prototype.removeAt=function(b){this.splice(b,1)}}if(!Array.prototype.insert){Array.prototype.insert=function(c,b){this.splice(b||0,0,c)
}}if(!Array.prototype.peek){Array.prototype.peek=function(){return this[this.length-1]}}if(!Array.prototype.each){Array.prototype.each=function(c){for(var b=0;b<this.length;b++){if(c.call(this,this[b],b)===false){break}}}}})();(function(c){var a=c.prototype.ready;c.prototype.ready=function(g){if(jQuery.browser.chrome){var e=this;function f(){if(document.readyState!=="complete"){setTimeout(arguments.callee,20)}else{a.call(e,g)}}f()}else{a.call(this,g)}};var d=c();d.length=1;var b=c();$fly=function(e){if(e instanceof Array){Array.prototype.splice.call(b,0,b.length);Array.prototype.push.apply(b,e);return b}else{d[0]=e;return d}}})(jQuery);var dorado={id:"_"+parseInt(Math.random()*Math.pow(10,8)),_ID_SEED:0,_TIMESTAMP_SEED:0,_GET_ID:function(a){return a._id},_GET_NAME:function(a){return a._name},_NULL_FUNCTION:function(){},_UNSUPPORTED_FUNCTION:function(){return function(){throw new dorado.ResourceException("dorado.core.OperationNotSupported",dorado.getFunctionName(arguments.callee))}},Browser:$.browser,defaultToString:function(b){var a=b.constructor.className||"[Object]";
if(b.id){a+=(" id="+b.id)}if(b.name){a+=(" name="+b.name)}},getFunctionName:function(e){var d=e.toString().split("\n")[0],b;if(e.methodName){var c;if(e.declaringClass){c=e.declaringClass.className}b=(c?(c+"."):"function ")+e.methodName}else{var a=d.match(/function (\w*)/);b="function "+(a&&a[1]||"anonymous")}var a=d.match(/\((.*)\)/);return b+(a&&a[0])}};if(dorado.Browser.webkit){var ua=navigator.userAgent.toLowerCase();dorado.Browser.chrome=/chrome/.test(ua);if(dorado.Browser.chrome){var match=/(chrome)[ \/]([\w.]+)/.exec(ua);dorado.Browser.version=match[2]}}dorado.Core={VERSION:"%version%",newId:function(){return"_uid_"+(++dorado._ID_SEED)},getTimestamp:function(){return ++dorado._TIMESTAMP_SEED},scopify:function(scope,fn){if(fn instanceof Function){return function(){return fn.apply(scope,arguments)}}else{return function(){return eval("(function(){return("+fn+")}).call(scope)")}}},setTimeout:function(b,a,c){return setTimeout(dorado.Core.scopify(b,a),c)},setInterval:function(b,a,c){return setInterval(dorado.Core.scopify(b,a),c)
},_clone:function(e){if(!(e instanceof Object)){return e}var d=e.constructor;var b=new d();for(var a in e){var c=e[a];if(c instanceof Object&&c.clone instanceof Function){c=c.clone()}b[a]=c}return b},clone:function(a){if(a==null){return a}if(a.clone instanceof Function){return a.clone()}return this._clone(a)}};(function(){window.$create=(dorado.Browser.msie)?document.createElement:function(a){return document.createElement(a)};window.$scopify=dorado.Core.scopify;window.$setTimeout=dorado.Core.setTimeout;window.$setInterval=dorado.Core.setInterval})();(function(){var CLASS_REPOSITORY={};var UNNAMED_CLASS="#UnnamedClass";function newClassName(prefix){var i=1;while(CLASS_REPOSITORY[prefix+i]){i++}return prefix+i}function adapterFunction(fn){var adapter=function(){return fn.apply(this,arguments)};adapter._doradoAdapter=true;return adapter}function cloneDefintions(defs){var newDefs={};for(var p in defs){if(defs.hasOwnProperty(p)){newDefs[p]=dorado.Object.apply({},defs[p])}}return newDefs}function overrideDefintions(subClass,defProp,defs,overwrite){if(!defs){return
}var sdefs=subClass.prototype[defProp];if(!sdefs){subClass.prototype[defProp]=cloneDefintions(defs)}else{for(var p in defs){if(defs.hasOwnProperty(p)){var odef=defs[p];if(odef===undefined){return}var cdef=sdefs[p];if(cdef===undefined){sdefs[p]=cdef={}}for(var m in odef){if(odef.hasOwnProperty(m)&&(overwrite||cdef[m]===undefined)){var odefv=odef[m];if(odefv instanceof Function){if(odefv.declaringClass){odefv=adapterFunction(odefv)}odefv.declaringClass=subClass;odefv.methodName=m;odefv.definitionType=defProp;odefv.definitionName=p}cdef[m]=odefv}}}}}}function override(subClass,overrides,overwrite){if(!overrides){return}if(overwrite===undefined){overwrite=true}var subp=subClass.prototype;for(var p in overrides){var override=overrides[p];if(p=="ATTRIBUTES"||p=="EVENTS"){overrideDefintions(subClass,p,override,overwrite);continue}if(subp[p]===undefined||overwrite){if(override instanceof Function){if(override.declaringClass){override=adapterFunction(override)}override.declaringClass=subClass;override.methodName=p
}subp[p]=override}}}dorado.Object={createNamespace:function(name){var names=name.split(".");var parent=window;for(var i=0;i<names.length;i++){var n=names[i];var p=parent[n];if(p===undefined){parent[n]=p={}}parent=p}return parent},createClass:function(p){var constr=p.constructor;if(constr===Object){constr=new Function()}constr.className=p.$className||newClassName(UNNAMED_CLASS);delete p.$className;for(var m in p){if(p.hasOwnProperty(m)){var v=p[m];if(v instanceof Function){if(v.declaringClass){p[m]=v=adapterFunction(v)}v.declaringClass=constr;v.methodName=m}}}constr.prototype=p;CLASS_REPOSITORY[constr.className]=constr;return constr},override:override,extend:(function(){var oc=Object.prototype.constructor;return function(superClass,overrides){var sc,scs;if(superClass instanceof Array){scs=superClass;sc=superClass[0]}else{sc=superClass}var subClass=(overrides&&overrides.constructor!=oc)?overrides.constructor:function(){sc.apply(this,arguments)};var fn=new Function();var sp=fn.prototype=sc.prototype;
if(!sc.className){sp.constructor=sc;sc.className=newClassName(UNNAMED_CLASS);sc.declaringClass=sp;sc.methodName="constructor"}var subp=subClass.prototype=new fn();subp.constructor=subClass;subClass.className=overrides.$className||newClassName((sc.$className||UNNAMED_CLASS)+"$");subClass.superClass=sc;subClass.declaringClass=subClass;subClass.methodName="constructor";delete overrides.$className;delete overrides.constructor;var attrs=subp.ATTRIBUTES;if(attrs){subp.ATTRIBUTES=cloneDefintions(attrs)}var events=subp.EVENTS;if(events){subp.EVENTS=cloneDefintions(events)}var ps=[sc];if(scs){for(var i=1,p;i<scs.length;i++){p=scs[i].prototype;override(subClass,p,false);ps.push(scs[i])}}subClass.superClasses=ps;override(subClass,overrides,true);CLASS_REPOSITORY[subClass.className]=subClass;return subClass}})(),eachProperty:function(object,fn){if(object&&fn){for(var p in object){fn.call(object,p,object[p])}}},apply:function(target,source,options){if(source){for(var p in source){if(options instanceof Function&&options.call(target,p,source[p])===false){continue
}if(options===false&&target[p]!==undefined){continue}target[p]=source[p]}}return target},isInstanceOf:function(object,type){function hasSuperClass(superClasses){if(!superClasses){return false}if(superClasses.indexOf(type)>=0){return true}for(var i=0;i<superClasses.length;i++){if(hasSuperClass(superClasses[i].superClasses)){return true}}return false}if(!object){return false}var b=false;if(type.className){eval("b = object instanceof "+type.className)}if(!b){var t=object.constructor;if(t){b=hasSuperClass(t.superClasses)}}return b},clone:function(object,options){if(object instanceof Object){var objClone,options=options||{};if(options.onCreate){objClone=new options.onCreate(object)}else{objClone=new object.constructor()}for(var p in object){if(!options.onCopyProperty||options.onCopyProperty(p,object,objClone)){objClone[p]=object[p]}}objClone.toString=object.toString;objClone.valueOf=object.valueOf;return objClone}else{return object}}};window.$namespace=dorado.Object.createNamespace;window.$class=dorado.Object.createClass;
window.$extend=dorado.Object.extend;window.$getSuperClass=function(){var fn=arguments.callee.caller,superClass;if(fn.declaringClass){superClass=fn.declaringClass.superClass}return superClass||{}};window.$getSuperClasses=function(){var fn=arguments.callee.caller,superClass;if(dorado.Browser.opera&&dorado.Browser.version<"10"){fn=fn.caller}if(fn.caller&&fn.caller._doradoAdapter){fn=fn.caller}if(fn.declaringClass){superClasses=fn.declaringClass.superClasses}return superClasses||[]};window.$invokeSuper=function(args){var fn=arguments.callee.caller;if(dorado.Browser.opera&&dorado.Browser.version<"10"){fn=fn.caller}if(fn.caller&&fn.caller._doradoAdapter){fn=fn.caller}if(fn.declaringClass){var superClasses=fn.declaringClass.superClasses;if(!superClasses){return}for(var i=0;i<superClasses.length;i++){var superClass=superClasses[i].prototype;var superFn;if(fn.definitionType){superFn=superClass[fn.definitionType][fn.definitionName][fn.methodName]}else{superFn=superClass[fn.methodName]}if(superFn){return superFn.apply(this,args||[])
}}}};window.$invokeSuper.methodName="$invokeSuper"})();(function(){var a=">dorado/view-service";dorado.Setting={"common.defaultDateFormat":"Y-m-d","common.defaultTimeFormat":"Y-m-d\\TH:i:s\\Z","ajax.defaultOptions":null,"ajax.autoBatchSupportedUris":[a],"ajax.dataTypeRepositoryOptions":{url:a,method:"POST"},"ajax.dataProviderOptions":{url:a,method:"POST"},"ajax.dataResolverOptions":{url:a,method:"POST"},"ajax.remoteServiceOptions":{url:a,method:"POST"},"dom.useCssShadow":true,"widget.skin":"~current","widget.panel.useCssCurveBorder":true};if(window.$setting instanceof Object){dorado.Object.apply(dorado.Setting,$setting)}var b=dorado.Setting["common.contextPath"];if(b&&b.charAt(b.length-1)!="/"){dorado.Setting["common.contextPath"]=b+"/"}window.$setting=dorado.Setting})();dorado.Exception=$class({$className:"dorado.Exception",constructor:function(a){this.message=a;this._buildStackTrace();dorado.Exception.EXCEPTION_STACK.push(this);if(dorado.Browser.msie||dorado.Browser.mozilla){window.onerror=function(f,d,c){var b=false;
if(dorado.Exception.EXCEPTION_STACK.length>0){var g;while(g=dorado.Exception.EXCEPTION_STACK.peek()){dorado.Exception.processException(g)}b=true}window.onerror=null;return b}}$setTimeout(this,function(){if(dorado.Exception.EXCEPTION_STACK.indexOf(this)>=0){dorado.Exception.processException(this)}},0)},_buildStackTrace:function(){var a=[];var b=dorado.Exception.caller,c=[];while(b&&c.indexOf(b)<0){c.push(b);a.push(dorado.getFunctionName(b));b=b.caller}this.stack=a;if(dorado.Browser.mozilla||dorado.Browser.chrome){var a=new Error().stack;if(a){a=a.split("\n");this.systemStack=a.slice(2,a.length-1)}}},formatStack:function(a){var c="";if(a){for(var b=0;b<a.length;b++){if(b>0){c+="\n"}c+=" > "+a[b];if(b>10){c+="\n > ... ... ...";break}}}return c},toString:function(){return this.message}});dorado.AbortException=$extend(dorado.Exception,{$className:"dorado.AbortException"});dorado.ResourceException=$extend(dorado.Exception,{$className:"dorado.ResourceException",constructor:function(){$invokeSuper.call(this,[$resource.apply(this,arguments)])
}});dorado.RemoteException=$extend(dorado.Exception,{$className:"dorado.RemoteException",constructor:function(b,a,c){$invokeSuper.call(this,[b]);this.exceptionType=a;this.remoteStack=c}});dorado.Exception.EXCEPTION_STACK=[];dorado.Exception.getExceptionMessage=function(a){if(!a||a instanceof dorado.AbortException){return null}var b;if(a instanceof dorado.Exception){b=a.message}else{if(a instanceof Error){b=a.message}else{b=a}}return b};dorado.Exception.processException=function(a){dorado.Exception.removeException(a);if(!a||a instanceof dorado.AbortException){return}var b=dorado.Exception.getExceptionMessage(a);if(a instanceof dorado.Exception){if(a.stack){b+="\n\nStack:\n"+a.formatStack(a.stack)}if(a.remoteStack){b+="\n\nRemote Stack:\n"+a.formatStack(a.remoteStack)}if(a.systemStack){b+="\n\nSystem Stack:\n"+a.formatStack(a.systemStack)}}else{if(a instanceof Error){if(a.stack){b+="\n\nSystem Stack:\n"+a.stack}}}if(!dorado.MessageBox||!document.body){alert(b)}else{dorado.MessageBox.alert(b,{icon:dorado.MessageBox.ERROR_ICON})
}};dorado.Exception.removeException=function(a){dorado.Exception.EXCEPTION_STACK.remove(a)};(function(){dorado.AttributeException=$extend(dorado.ResourceException,{$className:"dorado.AttributeException"});dorado.AttributeSupport=$class({$className:"dorado.AttributeSupport",constructor:function(){var a=this.ATTRIBUTES;for(var c in a){if(a.hasOwnProperty(c)&&a[c].defaultValue!=undefined&&this["_"+c]==undefined){var b=a[c].defaultValue;this["_"+c]=(b instanceof Function&&!a[c].neverEvalDefaultValue)?b():b}}},ATTRIBUTES:{tags:{setter:function(b,a){if(typeof a=="string"){a=a.split(",")}if(this._tags){dorado.TagManager.unregister(this)}this._tags=a;if(a){dorado.TagManager.register(this)}}}},EVENTS:{onAttributeChange:{}},getAttributeWatcher:function(){if(!this.attributeWatcher){this.attributeWatcher=new dorado.AttributeWatcher()}return this.attributeWatcher},get:function(c){var d=c.split("."),b;for(var e=0;e<d.length;e++){c=d[e];if(e==0){var f=this.ATTRIBUTES[c];if(f){if(f.writeOnly){throw new dorado.AttributeException("dorado.core.AttributeWriteOnly",c)
}if(f.getter){b=f.getter.call(this,c)}else{if(f.path){var h=f.path.split("."),a=this;for(var e=0;e<h.length;e++){var g=h[e];a=(g.charAt(0)=="_")?a[g]:a.get(g);if(a==null||e==h.length-1){b=a;break}}}else{b=this["_"+c]}}}else{throw new dorado.AttributeException("dorado.core.UnknownAttribute",c)}}else{if(!b){break}b=(b.get instanceof Function)?b.get(c):b[c]}}return b},set:function(j,m,o){var f,g,b,k;if(j&&typeof j=="object"){o=m}if(o&&typeof o=="object"){f=o.skipUnknownAttribute;g=o.tryNextOnError;b=o.preventOverwriting;k=o.lockWritingTimes}if(j.constructor!=String){var d=[];for(var a in j){if(j.hasOwnProperty(a)){var n=j[a],l={attr:a,value:n};if(a=="listener"||n instanceof Function){d.insert(l)}else{d.push(l)}}}if(b){watcher=this.getAttributeWatcher()}for(var c=0;c<d.length;c++){l=d[c];if(b&&watcher.getWritingTimes(l.attr)){continue}try{this.doSet(l.attr,l.value,f,k)}catch(h){if(h instanceof dorado.AttributeException){dorado.Exception.removeException(h)}else{if(!g){throw h}}}}}else{if(b){if(this.getAttributeWatcher().getWritingTimes(j)){return this
}}this.doSet(j,m,f,k)}return this},doSet:function(f,j,e,g){if(f.charAt(0)=="$"){return}var c=this.ATTRIBUTES[f];if(c){if(c.readOnly){throw new dorado.AttributeException("dorado.core.AttributeReadOnly",f)}var a=this.getAttributeWatcher();if(c.writeOnce&&a.getWritingTimes(f)>0){throw new dorado.AttributeException("dorado.core.AttributeWriteOnce",f)}if(!g){a.incWritingTimes(f)}if(c.setter){c.setter.call(this,f,j)}else{if(c.path){var k=c.path.split("."),b=this;for(var d=0;d<k.length-1&&b!=null;d++){var h=k[d];b=(h.charAt(0)=="_")?b[h]:b.get(h)}if(b!=null){var h=k[k.length-1];(h.charAt(0)=="_")?(b[h]=j):b.set(h,j)}else{this["_"+f]=j}}else{this["_"+f]=j}}if(this.fireEvent){this.fireEvent("onAttributeChange",this,{attribute:f,value:j})}}else{if(j instanceof Object&&dorado.Object.isInstanceOf(this,dorado.EventSupport)&&this.EVENTS[f]){if(j instanceof Function){this.addListener(f,j)}else{if(j.listener){this.addListener(f,j.listener,j.options)}}}else{if(!e){throw new dorado.AttributeException("dorado.core.UnknownAttribute",f)
}}}},hasTag:function(a){if(this._tags){return this._tags.indexOf(a)>=0}else{return false}}});dorado.AttributeWatcher=$class({$className:"dorado.AttributeWatcher",getWritingTimes:function(a){return this[a+".writingTimes"]||0},incWritingTimes:function(a){this[a+".writingTimes"]=(this[a+".writingTimes"]||0)+1},setWritingTimes:function(a,b){this[a+".writingTimes"]=b}})})();dorado.Callback={};window.$callback=dorado.Callback.invokeCallback=function(h,g,a,e){function d(k,j){if(c>0){setTimeout(function(){k.apply(f,j)},c)}else{k.apply(f,j)}}if(!h){return}if(g==null){g=true}var f,c;if(e){f=e.scope;c=e.delay}if(h instanceof Function){if(!g){return}d(h,[a])}else{f=h.scope||f||window;c=h.delay||c;if(h.callback instanceof Function){d(h.callback,[g,a])}var b=(g)?"success":"failure";if(h[b] instanceof Function){d(h.callback,[a])}}};dorado.Callback.simultaneousCallbacks=function(f,e){function b(g){var h=function(){a.push({task:g,scope:this,args:arguments});if(d[g.id]){delete d[g.id];c--;if(c==0){jQuery.each(a,function(k,j){j.task.callback.apply(j.scope,j.args)
});$callback(e,true)}}};return h}var d={},c=f.length,a=[];if(c>0){jQuery.each(f,function(h,g){if(!g.id){g.id=dorado.Core.newId()}var j=b(g);d[g.id]=e;g.run(j)})}else{$callback(e,true)}};dorado.EventSupport=$class({$className:"dorado.EventSupport",ATTRIBUTES:{listener:{setter:function(b,d){if(!d){return}if(d instanceof Array){var c=this;jQuery.each(d,function(f,a){c.addListener(a.name,a.listener,a.options)})}else{for(var e in d){if(d.hasOwnProperty(e)){this.addListener(e,d[e])}}}},writeOnly:true}},EVENTS:{},_disableListenersCounter:0,addListener:function(c,f,b){var e=this.EVENTS[c];if(!e){throw new dorado.ResourceException("dorado.core.UnknownEvent",c)}var d=dorado.Object.apply({},b);d.listener=f;if(!this._events){this._events={}}var a=this._events[c];if(a){if(e.disallowMultiListeners&&a.length){new dorado.ResourceException("dorado.core.MultiListenersNotSupport",c)}a.push(d)}else{this._events[c]=[d]}return this},removeListener:function(c,f){var e=this.EVENTS[c];if(!e){throw new dorado.ResourceException("dorado.core.UnknownEvent",c)
}if(!this._events){return}var b=this._events[c];if(b){var a=b.length;for(var d=a-1;d>=0;d--){if(b[d].listener==f){b.removeAt(d)}}}},clearListeners:function(a){if(!this._events){return}this._events[a]=null},disableListeners:function(){this._disableListenersCounter++},enableListeners:function(){if(this._disableListenersCounter>0){this._disableListenersCounter--}},fireEvent:function(c){var d=this.EVENTS[c];if(!d){throw new dorado.ResourceException("dorado.core.UnknownEvent",c)}var g=(d.interceptor instanceof Function)?d.interceptor:null;var b;if(this._events){b=this._events[c]}var a=this;var h=function(){if(b){for(var e=0;e<b.length;){var j=b[e];if(j.once){b.removeAt(e)}else{e++}if(a.notifyListener(j,arguments)===false){return false}}}return true};try{if(g){arguments[0]=h;return g.apply(this,arguments)}else{if(b&&this._disableListenersCounter==0){return h.apply(this,Array.prototype.slice.call(arguments,1))}}}catch(f){if(d.processException){dorado.Exception.processException(f)}else{throw f}}return true
},getListenerCount:function(b){var a=null;if(this._events){a=this._events[b]}return(a)?a.length:0},notifyListener:function(d,b){var e=d.listener;var c=d.scope;if(!c&&this.getListenerScope){c=this.getListenerScope()}c=c||this;var a=d.delay;if(a>=0){setTimeout(function(){e.apply(c,b)},a)}else{return e.apply(c,b)}}});dorado.TagManager={_map:{},_register:function(a,b){if(!b._id){b._id=dorado.Core.newId()}var c=this._map[a];if(c){if(!c.idMap[b._id]){c.list.push(b);c.idMap[b._id]=b}}else{this._map[a]=c={list:[b],idMap:{}};c.idMap[b._id]=b}},_unregister:function(a,b){var c=this._map[a];if(c){if(!c.idMap[b._id]){delete c.idMap[b._id];c.list.remove(b)}}},_regOrUnreg:function(d,b){var c=d._tags;if(c){if(typeof c=="string"){c=c.split(",")}if(c instanceof Array){for(var e=0;e<c.length;e++){var a=c[e];if(typeof a=="string"&&a.length>0){b?this._unregister(a,d):this._register(a,d)}}}}},register:function(a){this._regOrUnreg(a)},unregister:function(a){this._regOrUnreg(a,true)},find:function(a){var b=this._map[a];
return new dorado.ObjectGroup(b?b.list:null)}};dorado.ObjectGroup=$class({constructor:function(a){if(a&&!(a instanceof Array)){a=[a]}this.objects=a||[]},set:function(a,d){if(!this.objects){return}for(var c=0;c<this.objects.length;c++){var b=this.objects[c];if(b){b.set(a,d,true)}}return this},invoke:function(a){if(!this.objects){return}for(var c=0;c<this.objects.length;c++){var b=this.objects[c];if(b){var d=b[a];if(d instanceof Function){d.apply(b,Array.prototype.slice.call(arguments,1))}}}}});window.$group=function(){return new dorado.ObjectGroup(Array.prototype.slice.call(arguments))};window.$tags=function(a){return dorado.TagManager.find(a)};dorado.Renderer=$class({$className:"dorado.Renderer",render:function(b,a){}});dorado.Renderer.NONE_RENDERER=new dorado.Renderer();dorado.Renderer.render=function(b,c,a){if(b instanceof dorado.Renderer){b.render(c,a)}else{if(b instanceof Function){b(c,a)}}};dorado.RenderableElement=$extend(dorado.AttributeSupport,{$className:"dorado.RenderableElement",_ignoreRefresh:0,ATTRIBUTES:{className:{},exClassName:{skipRefresh:true,setter:function(b,a){if(this._rendered&&this._exClassName){$fly(this.getDom()).removeClass(this._exClassName)
}this._exClassName=a;if(this._rendered&&a){$fly(this.getDom()).addClass(a)}}},width:{setter:function(b,a){this["_"+b]=isFinite(a)?parseInt(a):a}},height:{setter:function(b,a){this["_"+b]=isFinite(a)?parseInt(a):a}},style:{setter:function(b,a){if(this._style&&a){dorado.Object.apply(this._style,a)}else{this._style=a}}},rendered:{readOnly:true}},doSet:function(a,c){$invokeSuper.call(this,arguments);var b=this.ATTRIBUTES[a];if(this._rendered&&this._ignoreRefresh<1&&b&&!b.skipRefresh){dorado.Toolkits.setDelayedAction(this,"$refreshDelayTimerId",this.refresh,50)}},createDom:function(){return document.createElement("DIV")},refreshDom:function(d){if(d.nodeType!=3){var b=$fly(d);if(this._className){b.addClass(this._className)}if(this._exClassName){b.addClass(this._exClassName)}if(this._floating){b.addClass(this._floatingClassName)}if(this._style){var a=this._style;if(typeof this._style=="string"){var c={};jQuery.each(a.split(";"),function(f,g){var e=g.split(":");c[jQuery.trim(e[0])]=jQuery.trim(e[1])
});a=c}b.css(a);delete this._style}this.resetDimension()}},resetDimension:function(d){var c=$fly(this.getDom()),e=false;var b=this.getRealWidth();var a=this.getRealHeight();if(d||b&&this._currentWidth!=b){this._currentWidth=b;c.outerWidth(b);e=true}if(d||a&&this._currentHeight!=a){this._currentHeight=a;c.outerHeight(a);e=true}return e},getRealWidth:function(){return(this._realWidth==null)?this._width:this._realWidth},getRealHeight:function(){return(this._realHeight==null)?this._height:this._realHeight},getDom:function(){if(!this._dom){this._dom=this.createDom()}return this._dom},doRenderToOrReplace:function(c,b,a){var d=this.getDom();if(!d){return}if(c){if(!b.parentNode){return}b.parentNode.replaceChild(d,b)}else{if(!b){b=document.body}if(d.parentNode!=b||(a&&d.nextSibling!=a)){if(a){b.insertBefore(d,a)}else{b.appendChild(d)}}}if(this._attached||!this.renderUtilAttached){this.refreshDom(d)}this._rendered=true},render:function(b,a){this.doRenderToOrReplace(false,b,a)},replace:function(a){this.doRenderToOrReplace(true,a)
},unrender:function(){var a=this.getDom();if(a){jQuery(a).remove()}},refresh:function(a){if(!this._rendered||(!this._attached&&this.renderUtilAttached)){return}if(a){dorado.Toolkits.setDelayedAction(this,"$refreshDelayTimerId",function(){dorado.Toolkits.cancelDelayedAction(this,"$refreshDelayTimerId");this.refreshDom(this.getDom())},50)}else{dorado.Toolkits.cancelDelayedAction(this,"$refreshDelayTimerId");this.refreshDom(this.getDom())}}});dorado.Toolkits={ajaxDefaultOptions:$setting["ajax.defaultOptions"],ajaxs:{},getAjax:function(b){var a={};if(this.ajaxDefaultOptions){dorado.Object.apply(a,this.ajaxDefaultOptions)}dorado.Object.apply(a,b);var d=a.url||"#EMPTY";var e=this.ajaxs[d];if(e===undefined){e=new dorado.util.AjaxEngine();e.set("defaultOptions",a);autoBatchSupportedUris=$setting["ajax.autoBatchSupportedUris"];if(autoBatchSupportedUris){for(var c=0;c<autoBatchSupportedUris.length;c++){if(d.match(new RegExp(autoBatchSupportedUris[c]))){e.set("autoBatchEnabled",true);break}}}this.ajaxs[d]=e
}return e},typesRegistry:{},typeTranslators:{},registerPrototype:function(c,a,d){function b(g,f,h){this.typesRegistry[g+"."+f]=h}if(typeof a=="object"){for(var e in a){if(a.hasOwnProperty(e)){b.call(this,c,e,a[e])}}}else{b.call(this,c,a,d)}},registerTypeTranslator:function(b,a){this.typeTranslators[b]=a},getPrototype:function(e,a){var d=e.split(",");for(var c=0;c<d.length;c++){var g=d[c],f=this.typesRegistry[g+"."+(a||"Default")];if(!f){var b=this.typeTranslators[g];if(b&&b instanceof Function){f=b(a)}}if(f){return f}}},createInstance:function(d,a,b){var c;if(typeof a=="string"){c=a;a=null}else{c=a?a.$type:undefined}var e=this.getPrototype(d,c);if(!e){if(b&&b.constructor==String){c=b+c}if(!e){if(b&&b instanceof Function){e=b(c)}if(!e){if(c){e=dorado.util.Common.getClassType(c)}else{throw new dorado.ResourceException("dorado.core.TypeUndefined")}}}if(e&&c){this.registerPrototype(d,c,e)}}if(!e){throw new dorado.ResourceException("dorado.core.UnknownType",c)}return new e(a)},URL_VARS:{},translateURL:function(c){if(c&&c.charAt(0)==">"){var e=/^\>.*\>/,a=c.match(e);
if(a){a=a[0];var f=a.substring(1,a.length-1);var d=this.URL_VARS[f]||"",b=c.substring(a.length);if(d){if(d.charAt(d.length-1)=="/"){if(b.charAt(0)=="/"){b=b.substring(1)}}else{if(b.charAt(0)!="/"){b="/"+b}}}c=d+b;if(c.charAt(0)==">"){c=this.translateURL(c)}}else{c=$setting["common.contextPath"]+c.substring(1)}}return c},setDelayedAction:function(a,d,b,c){d=d||dorado.Core.newId();this.cancelDelayedAction(a,d);a[d]=$setTimeout(a,b,c)},cancelDelayedAction:function(a,b){if(a[b]){clearTimeout(a[b]);delete a[b];return true}return false},parseFilterValue:function(b){var a,d=b.charAt(0);if("="==d){a=d;b=b.substring(1)}else{if("><".indexOf(d)>=0){a=d;d=b.charAt(1);if("="==d){a+=d;b=b.substring(2)}else{b=b.substring(1)}}}return[a||"",b]},STATE_CODE:{info:0,ok:1,warn:2,error:3},getTopMessage:function(f){if(!f){return null}var b=null,a=-1;for(var c=0;c<f.length;c++){var e=f[c];var d=this.STATE_CODE[e.state];if(d>a){a=d;b=e}}return b},getTopMessageState:function(b){if(!b){return null}var a=this.getTopMessage(b);
return a?a.state:null},trimSingleMessage:function(b,a){if(!b){return null}if(typeof b=="string"){b={state:a,text:b}}else{b.state=b.state||a}return b},trimMessages:function(e,c){if(!e){return null}var b;if(e instanceof Array){var f=[];for(var d=0;d<e.length;d++){var a=this.trimSingleMessage(e[d],c);if(!a){continue}f.push(a)}b=(f.length)?f:null}else{b=[this.trimSingleMessage(e,c)]}return b}};window.$url=function(a){return dorado.Toolkits.translateURL(a)};dorado.Toolkits.URL_VARS.skin=$url($setting["widget.skinRoot"]+($setting["widget.skin"]?($setting["widget.skin"]+"/"):""));dorado.util={};Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(b){if(Date.formatFunctions[b]==null){Date.createNewFormat(b)}var a=Date.formatFunctions[b];return this[a]()};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function(){return ";
var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code+="'"+String.escape(ch)+"' + "}else{code+=Date.getFormatCode(ch)}}}eval(code.substring(0,code.length-3)+";}")};Date.getFormatCode=function(a){switch(a){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";
case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(a)+"' + "}};Date.parseDate=function(a,c){if(Date.parseFunctions[c]==null){Date.createParser(c)}var b=Date.parseFunctions[c];return Date[b](a)};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;
var code="Date."+funcName+" = function(input){\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {";var regex="";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;regex+=String.escape(ch)}else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c}}}}code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}";
Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$");eval(code)};Date.formatCodeToRegex=function(b,a){switch(b){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+a+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+a+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+a+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+a+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+a+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+a+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};
case"a":return{g:1,c:"if (results["+a+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+a+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+a+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+a+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+a+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(b)}}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(this.getTimezoneOffset()/60),2,"0")+String.leftPad(this.getTimezoneOffset()%60,2,"0")
};Date.prototype.getDayOfYear=function(){var a=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b){a+=Date.daysInMonth[b]}return a+this.getDate()-1};Date.prototype.getWeekOfYear=function(){var b=this.getDayOfYear()+(4-this.getDay());var a=new Date(this.getFullYear(),0,1);var c=(7-a.getDay()+4);document.write(c);return String.leftPad(((b-c)/7)+1,2,"0")};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return((a&3)==0&&(a%100||(a%400==0&&a)))};Date.prototype.getFirstDayOfMonth=function(){var a=(this.getDay()-(this.getDate()-1))%7;return(a<0)?(a+7):a};Date.prototype.getLastDayOfMonth=function(){var a=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return(a<0)?(a+7):a};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";
default:return"th"}};String.escape=function(a){return a.replace(/('|\\)/g,"\\$1")};String.leftPad=function(d,b,c){var a=new String(d);if(c==null){c=" "}while(a.length<b){a=c+a}return a};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};dorado.util.Common={formatFloat:function(b,l){function c(o,A,p){if(!A){return(parseInt(o.substring(0,nfs.length))+1)+""
}var z,y,m="",t=0,x="";var s=A.split("");for(var w=0;w<s.length;w++){y=s[w];if(y=="#"||y=="0"||y=="`"){s=s.slice(w);break}x+=y}s=s.reverse();var u=o.split("").reverse();for(var w=0;w<s.length;w++){y=s[w];if(y=="#"){if(t<u.length){if(o=="0"){t=u.length}else{if(o=="-0"){if(p){m+="-"}t=u.length}else{m+=u[t++]}}}}else{if(y=="0"){if(t<u.length){m+=u[t++]}else{m+=y}}else{if(y=="`"){var q=3;while(t<u.length){var z=u[t++];if(q==3&&z!="-"){m+=",";q=0}m+=z;q++}}else{m+=y}}}}while(t<u.length){m+=u[t++]}return x+m.split("").reverse().join("")}function k(u,t){var m=(t)?t.match(/[\#0]/g):null;if(m===null){return[t,(u&&u.charAt(0)>"4")]}else{if(u&&u.length>m.length&&u.charAt(m.length)>"4"){u=(parseInt(u.substring(0,m.length))+1)+""}}var s,q="",o=0;for(var p=0;p<t.length;p++){s=t.charAt(p);if(s=="#"||s=="0"){if(u&&o<u.length){q+=u.charAt(o++)}else{if(s=="0"){q+=s}}}else{q+=s}}return[q,false]}if(b==null||isNaN(b)){return""}b=b+"";if(!l){return b}var j,h,f,e,g;g=b.indexOf(".");if(g>0){j=b.substring(0,g);
h=b.substring(g+1)}else{j=b}g=l.indexOf(".");if(g>0){f=l.substring(0,g);e=l.substring(g+1)}else{f=l}f=f.replace(/\#,/g,"`");var a=k(h,e);var d=a[0];if(a[1]){j=(parseInt(j)+((j.charAt(0)=="-")?-1:1))+""}return c(j,f,d)+((d)?("."+d):"")},parseFloat:function(b){if(!b){return Number.NaN}var a=(b+"").match(/[-\d\.]/g);if(!a){return Number.NaN}return parseFloat(a.join(""))},getClassType:function(type,silence){var classType=null;try{classType=eval(type)}catch(e){if(!silence){throw new dorado.ResourceException("dorado.core.UnknownType",type)}}return classType},singletonInstance:{},getSingletonInstance:function(c){var b;if(typeof c=="string"){b=c}else{b=c._singletonId;if(!b){c._singletonId=b=dorado.Core.newId()}}var a=this.singletonInstance[b];if(!a){if(typeof c=="string"){var d=dorado.util.Common.getClassType(b);a=new d()}else{a=new c()}this.singletonInstance[b]=a}return a}};window.$singleton=function(a){return dorado.util.Common.getSingletonInstance(a)};dorado.util.Resource={append:function(f,b){if(arguments.length==1&&f&&f.constructor!=String){b=f;
f=null}var h=this,a;if(f){var e=f.split(".");for(var d=0;d<e.length;d++){var g=e[d];var c=h[g];if(c==null){if(d==e.length-1){c=b;a=true}else{c={}}h[g]=c}h=c}}if(!a&&b){dorado.Object.apply(h,b)}},sprintf:function(){var a=arguments.length;var d=arguments[0];for(var b=1;b<a;b++){var e="\\{"+(b-1)+"\\}";var c=new RegExp(e,"g");d=d.replace(c,arguments[b])}return d},get:function(c){var b=c.split(".");var d=this;for(var a=0;d!=null&&a<b.length;a++){d=d[b[a]]}if(d==null){return""}else{d+="";if(arguments.length>1){arguments[0]=d;return this.sprintf.apply(this,arguments)}else{return d}}}};window.$resource=function(b,a){return dorado.util.Resource.get.apply(dorado.util.Resource,arguments)};(function(){dorado.util.Iterator=$class({$className:"dorado.util.Iterator",first:dorado._NULL_FUNCTION,last:dorado._NULL_FUNCTION,hasPrevious:dorado._NULL_FUNCTION,hasNext:dorado._NULL_FUNCTION,previous:dorado._NULL_FUNCTION,next:dorado._NULL_FUNCTION,current:dorado._NULL_FUNCTION,createBookmark:dorado._UNSUPPORTED_FUNCTION(),restoreBookmark:dorado._UNSUPPORTED_FUNCTION()});
dorado.util.ArrayIterator=$extend(dorado.util.Iterator,{$className:"dorado.util.ArrayIterator",constructor:function(b,a){this._v=b;this._current=(a||0)-1},first:function(){this._current=-1},last:function(){this._current=this._v.length},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<(this._v.length-1)},previous:function(){return(this._current<0)?null:this._v[--this._current]},next:function(){return(this._current>=this._v.length)?null:this._v[++this._current]},current:function(){return this._v[this._current]},setNextIndex:function(a){this._current=a-1},createBookmark:function(){return this._current},restoreBookmark:function(a){this._current=a}})})();dorado.util.KeyedArray=$class({$className:"dorado.util.KeyedArray",constructor:function(a){this.items=[];this._keyMap={};this._getKeyFunction=a},size:0,_getKey:function(b){var a=this._getKeyFunction?this._getKeyFunction(b):null;return a+""},insert:function(e,d,b){var a;if(this.beforeInsert){a=this.beforeInsert(e)
}if(!isFinite(d)&&d){switch(d){case"begin":d=0;break;case"before":d=this.items.indexOf(b);if(d<0){d=0}break;case"after":d=this.items.indexOf(b)+1;if(d>=this.items.length){d=null}break;default:d=null;break}}if(d!=null&&isFinite(d)&&d>=0){this.items.insert(e,d)}else{this.items.push(e)}this.size++;var c=this._getKey(e);if(c){this._keyMap[c]=e}if(this.afterInsert){this.afterInsert(e,a)}},append:function(a){this.insert(a)},remove:function(d){var a;if(this.beforeRemove){a=this.beforeRemove(d)}var c=this.items.remove(d);if(c>=0){this.size--;var b=this._getKey(d);if(b){delete this._keyMap[b]}}if(this.afterRemove){this.afterRemove(d,a)}return c},removeAt:function(c){if(c>=0&&c<this.size){var d=this.items[c],a;if(d){if(this.beforeRemove){a=this.beforeRemove(d)}var b=this._getKey(d);if(b){delete this._keyMap[b]}}this.items.removeAt(c);this.size--;if(d&&this.afterRemove){this.afterRemove(d,a)}return d}return null},indexOf:function(a){return this.items.indexOf(a)},replace:function(c,b){var a=this.indexOf(c);
if(a>=0){this.removeAt(a);this.insert(b,a)}return a},get:function(a){return(a>=0)?this.items[a]:this._keyMap[a]},clear:function(){for(var a=this.size-1;a>=0;a--){this.removeAt(a)}},iterator:function(b){var a=this.items.indexOf(b);if(a<0){a=0}return new dorado.util.ArrayIterator(this.items,a)},each:function(c,b){var d=this.items;for(var a=0;a<d.length;a++){if(c.call(b||d[a],d[a],a)===false){return a}}},toArray:function(){return this.items.slice(0)},clone:function(){return dorado.Core.clone(this)},deepClone:function(){var a=new dorado.util.KeyedArray(this._getKeyFunction);for(var b=0;b<this.items.length;b++){a.append(dorado.Core.clone(this.items[b]))}return a}});dorado.util.KeyedList=$class({$className:"dorado.util.KeyedList",constructor:function(a){this._keyMap={};this._getKeyFunction=a},size:0,_getKey:function(a){return this._getKeyFunction?this._getKeyFunction(a):null},_registerEntry:function(b){var a=this._getKey(b.data);if(a!=null){this._keyMap[a]=b}},_unregisterEntry:function(b){var a=this._getKey(b.data);
if(a!=null){delete this._keyMap[a]}},_unregisterAllEntries:function(){this._keyMap={}},insertEntry:function(b,c,a){var e,d;switch(c){case"begin":e=null;d=this.first;break;case"before":e=(a)?a.previous:null;d=a;break;case"after":e=a;d=(a)?a.next:null;break;default:e=this.last;d=null;break}b.previous=e;b.next=d;if(e){e.next=b}else{this.first=b}if(d){d.previous=b}else{this.last=b}this._registerEntry(b);this.size++},removeEntry:function(a){var c,b;c=a.previous;b=a.next;if(c){c.next=b}else{this.first=b}if(b){b.previous=c}else{this.last=c}this._unregisterEntry(a);this.size--},findEntry:function(c){if(c==null){return null}var a=this._getKey(c);if(a!=null){return this._keyMap[a]}else{var b=this.first;while(b){if(b.data===c){return b}b=b.next}}return null},insert:function(e,d,b){var a=null;if(b!=null){a=this.findEntry(b)}var c={data:e};this.insertEntry(c,d,a)},append:function(a){this.insert(a)},remove:function(b){var a=this.findEntry(b);if(a!=null){this.removeEntry(a)}return(a!=null)},removeKey:function(a){var b=this._keyMap[a];
if(b){this.removeEntry(b);return b.data}return null},get:function(a){var b=this._keyMap[a];if(b){return b.data}return null},clear:function(){var a=this.first;while(a){if(a.data){delete element.data}a=a.next}this._unregisterAllEntries();this.first=null;this.last=null;this.size=0},iterator:function(a){return new dorado.util.KeyedListIterator(this,a)},each:function(c,b){var d=this.first,a=0;while(d!=null){if(c.call(b||d.data,d.data,a++)===false){break}d=d.next}},toArray:function(){var a=[],b=this.first;while(b!=null){a.push(b.data);b=b.next}return a},getFirst:function(){return this.first?this.first.data:null},getLast:function(){return this.last?this.last.data:null},clone:function(){var a=new dorado.util.KeyedList(this._getKeyFunction);var b=this.first;while(b!=null){a.append(b.data);b=b.next}return a},deepClone:function(){var a=new dorado.util.KeyedList(this._getKeyFunction);var b=this.first;while(b!=null){a.append(dorado.Core.clone(b.data));b=b.next}return a}});dorado.util.KeyedListIterator=$extend(dorado.util.Iterator,{$className:"dorado.util.KeyedListIterator",constructor:function(a,b){this._list=a;
this.current=null;if(b){this.current=a.findEntry(b)}this.isFirst=(this.current==null);this.isLast=false},first:function(){this.isFirst=true;this.isLast=false;this.current=null},last:function(){this.isFirst=false;this.isLast=true;this.current=null},hasNext:function(){if(this.isFirst){return(this._list.first!=null)}else{if(this.current!=null){return(this.current.next!=null)}else{return false}}},hasPrevious:function(){if(this.isLast){return(this._list.last!=null)}else{if(this.current!=null){return(this.current.previous!=null)}else{return false}}},next:function(){var a=this.current;if(this.isFirst){a=this._list.first}else{if(a!=null){a=a.next}else{a=null}}this.current=a;this.isFirst=false;if(a!=null){this.isLast=false;return a.data}else{this.isLast=true;return null}},previous:function(){var a=this.current;if(this.isLast){a=this._list.last}else{if(a!=null){a=a.previous}else{a=null}}this.current=a;this.isLast=false;if(a!=null){this.isFirst=false;return a.data}else{this.isFirst=true;return null
}},current:function(){return(this.current)?this.current.data:null},createBookmark:function(){return{isFirst:this.isFirst,isLast:this.isLast,current:this.current}},restoreBookmark:function(a){this.isFirst=a.isFirst;this.isLast=a.isLast;this.current=a.current}});dorado.util.ObjectPool=$class({$className:"dorado.util.ObjectPool",constructor:function(a){dorado.util.ObjectPool.OBJECT_POOLS.push(this);this._factory=a;this._idlePool=[];this._activePool=[]},borrowObject:function(){var b=null;var a=this._factory;if(this._idlePool.length>0){b=this._idlePool.pop()}else{b=a.makeObject()}if(b!=null){this._activePool.push(b);if(a.activateObject){a.activateObject(b)}}return b},returnObject:function(b){if(b!=null){var a=this._factory;var c=this._activePool.indexOf(b);if(c<0){return}if(a.passivateObject){a.passivateObject(b)}this._activePool.removeAt(c);this._idlePool.push(b)}},getNumActive:function(){return this._activePool.length},getNumIdle:function(){return this._idlePool.length},destroy:function(){if(!!this._destroyed){return
}var b=this._factory;function a(h){if(b.passivateObject){b.passivateObject(h)}}function f(h){if(b.destroyObject){b.destroyObject(h)}}var e=this._activePool;for(var d=0;d<e.length;d++){var c=e[d];a(c);f(c)}var g=this._idlePool;for(var d=0;d<g.length;d++){var c=g[d];f(c)}this._factory=null;this._destroyed=true}});dorado.util.ObjectPool.OBJECT_POOLS=[];jQuery(window).unload(function(){var b=dorado.util.ObjectPool.OBJECT_POOLS;for(var a=0;a<b.length;a++){b[a].destroy()}});(function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(key){return this.getFullYear()+"-"+f(this.getMonth()+1)+"-"+f(this.getDate())+"T"+f(this.getHours())+":"+f(this.getMinutes())+":"+f(this.getSeconds())+"Z"};dorado.JSON={parse:function(text,untrusty){return text?((untrusty)?JSON.parse(text):eval("("+text+")")):null},stringify:function(value,options){if(value!=null){if(value instanceof dorado.Entity||value instanceof dorado.EntityList){value=value.toJSON(options)}}return JSON.stringify(value,(options!=null)?options.replacer:null)
},evaluate:function(template){function toJSON(obj){if(obj instanceof Function){obj=obj.call(dorado.$this||this)}var json;if(obj instanceof dorado.Entity||obj instanceof dorado.EntityList){json=obj.toJSON({generateDataType:true})}else{if(obj instanceof Object&&!(obj instanceof Date)){json={};for(var p in obj){if(obj.hasOwnProperty(p)){v=obj[p];if(v===undefined){continue}if(v!=null){v=toJSON.call(obj,v)}json[p]=v}}}else{json=obj}}return json}return toJSON(template)}}})();dorado.util.AjaxConnectionPool=new dorado.util.ObjectPool({activeX:["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],_createXMLHttpRequest:function(){try{return new XMLHttpRequest()}catch(b){for(var a=0;a<this.activeX.length;++a){try{return new ActiveXObject(this.activeX[a])}catch(b){}}}},makeObject:function(){return{conn:this._createXMLHttpRequest()}},passivateObject:function(b){delete b.url;delete b.method;delete b.options;var a=b.conn;a.onreadystatechange=dorado._NULL_FUNCTION;
a.abort()}});dorado.util.AjaxEngine=$extend([dorado.AttributeSupport,dorado.EventSupport],{$className:"dorado.util.AjaxEngine",constructor:function(){$invokeSuper.call(this,arguments);this._requests=[];this._connectionPool=dorado.util.AjaxConnectionPool},ATTRIBUTES:{defaultOptions:{writeOnce:true},autoBatchEnabled:{setter:function(a,b){if(b&&!(this._defaultOptions&&this._defaultOptions.url)){throw new dorado.ResourceException("dorado.core.BatchUrlUndefined")}this["_"+a]=b}},minConnectInterval:{defaultValue:50},maxBatchSize:{defaultValue:20}},EVENTS:{beforeRequest:{},onRequest:{},beforeConnect:{},onConnect:{}},request:function(b,g){if(typeof b=="string"){b={url:b}}var a=this._autoBatchEnabled;if(this._autoBatchEnabled){if(b){if(b.url&&b.url!=this._defaultOptions.url||b.method&&b.method!="POST"){a=false}if(a&&b.headers){for(var f in b.headers){if(b.headers.hasOwnProperty(f)){a=false;break}}}}}if(a){var e=this._requests;if(e.length==0){this._batchTimerId=$setTimeout(this,function(){this._requestBatch()
},this._minConnectInterval)}this.fireEvent("beforeRequest",this,{async:true,options:b});var d=b.message,c;if(d){c=dorado.util.TaskIndicator.showTaskIndicator(d)}e.push({options:b,callback:g,taskId:c});if(e.length>=this._maxBatchSize){this._requestBatch()}}else{this.requestAsync(b,g)}},_requestBatch:function(){if(this._batchTimerId){clearTimeout(this._batchTimerId);this._batchTimerId=0}var h=this._requests;if(h.length==0){return}this._requests=[];var d={scope:this,callback:function(p,o){function k(r){var q=new dorado.util.AjaxResult(r);q._init(o._connObj);return q}if(p){var n=jQuery(o.getXmlDocument());var l=0;n.find("result>request").each($scopify(this,function(r,u){var t=h[l];if(t.taskId){dorado.util.TaskIndicator.hideTaskIndicator(t.taskId)}var q=k(t.options);var s=jQuery(u);var y=s.children("error");var x=(y.size()==0);if(x){var w=s.children("response");q.text=unescape(w.text())}else{q.text=unescape(y.text());q._setError(q._parseError(q.text,o._connObj))}$callback(t.callback,x,q);this.fireEvent("onRequest",this,{async:true,result:q});
l++}))}else{for(var l=0;l<h.length;l++){var m=h[l];if(m.taskId){dorado.util.TaskIndicator.hideTaskIndicator(m.taskId)}var j=k(m.options);j._setError(o.error);$callback(m.callback,false,j);this.fireEvent("onRequest",this,{async:true,result:j})}}}};var b=["<batch>\n"];for(var e=0;e<h.length;e++){var g=h[e];var c=g.options;var f="";if(c){if(c.xmlData){f="xml"}else{if(c.jsonData){f="json"}}}b.push('<request type="'+f+'"><![CDATA[');b.push(this._getSendData(c));b.push("]]></request>\n")}b.push("</batch>");var a={isBatch:true,xmlData:b.join("")};this.requestAsync(a,d)},requestAsync:function(a,g){var f=this._connectionPool.borrowObject();this._init(f,a,true);var e={async:true,options:a};if(a==null||!a.isBatch){this.fireEvent("beforeRequest",this,e)}this.fireEvent("beforeConnect",this,e);var d=f.conn;var c=a.message,b;if(c){b=dorado.util.TaskIndicator.showTaskIndicator(c)}if(g&&a&&a.timeout){f.timeoutTimerId=$setTimeout(this,function(){try{if(b){dorado.util.TaskIndicator.hideTaskIndicator(b)}var h=dorado.util.AjaxResult(a);
h._init(f);h._setError(new dorado.util.AjaxException("Async Request Timeout.",null,f));$callback(g,false,h,{scope:this});var j={async:true,result:h};this.fireEvent("onConnect",this,j);if(a==null||!a.isBatch){this.fireEvent("onRequest",this,j)}}finally{this._connectionPool.returnObject(f)}},a.timeout)}d.onreadystatechange=$scopify(this,function(){if(d.readyState==4){try{if(b){dorado.util.TaskIndicator.hideTaskIndicator(b)}if(g&&a&&a.timeout){clearTimeout(f.timeoutTimerId)}var h=new dorado.util.AjaxResult(a,f);var j={async:true,result:h};this.fireEvent("onConnect",this,j);$callback(g,h.success,h,{scope:this});if(a==null||!a.isBatch){this.fireEvent("onRequest",this,j)}}finally{this._connectionPool.returnObject(f)}}});d.send(this._getSendData(a))},_setHeader:function(c,a){function b(d,f){if(!f){return}for(var g in f){if(f.hasOwnProperty(g)){var e=f[g];if(e!=null){d.setRequestHeader(g,e)}}}}if(this._defaultOptions){b(c.conn,this._defaultOptions.headers)}if(a){b(c.conn,a.headers)}},_init:function(g,j,d){function h(k,l){if(l){return k+(k.indexOf("?")===-1?"?":"&")+encodeURI(l)
}return k}var b,a;if(j){b=j.url;a=j.method;if(!j.headers){j.headers={}}if(j.xmlData){j.headers["Content-Type"]="text/xml";a="POST"}else{if(j.jsonData){j.headers["Content-Type"]="text/javascript";a="POST"}}}var e=(this._defaultOptions)?this._defaultOptions:{};b=b||e.url;a=a||e.method||"GET";var f=j.parameter;if(f&&(a=="GET"||j.xmlData||j.jsonData)){for(var c in f){if(f.hasOwnProperty(c)){b=h(b,f[c])}}}g.url=b=$url(b);g.method=a;g.options=j;g.conn.open(a,b,d);this._setHeader(g,j)},_getSendData:function(a){if(!a){return null}var b=null;if(a.xmlData){b=a.xmlData}else{if(a.jsonData){b=dorado.JSON.stringify(a.jsonData,{replacer:function(e,f){return(f instanceof Function)?f.call(this):f}})}else{if(a.parameter){var d=a.parameter;b="";for(var c in d){if(d.hasOwnProperty(c)){b+=(i>0?"&":"")+c+"="+encodeURI(parameters[c])}}}}}return b},requestSync:function(c,d){if(typeof c=="string"){c={url:c}}var h=this._connectionPool.borrowObject();try{var g={async:false,options:c};this.fireEvent("beforeRequest",this,g);
this.fireEvent("beforeConnect",this,g);var b=null;try{this._init(h,c,false);h.conn.send(this._getSendData(c))}catch(f){b=f}var a=new dorado.util.AjaxResult(c);if(b!=null){a._init(h);a._setError(b)}else{a._init(h,true)}g={async:true,result:a};this.fireEvent("onConnect",this,g);this.fireEvent("onRequest",this,g);if(!d&&b!=null){throw b}return a}finally{this._connectionPool.returnObject(h)}}});dorado.util.AjaxEngine._parseXml=function(b){var d=null;try{if(dorado.Browser.msie){var a=["MSXML2.DOMDocument","MSXML.DOMDocument"];for(var c=0;c<a.length;++c){try{d=new ActiveXObject(a[c]);break}catch(f){}}d.loadXML(b)}else{var g=new DOMParser();d=g.parseFromString(b,"text/xml")}}finally{return d}};dorado.util.AjaxException=$extend(Error,{$className:"dorado.util.AjaxException",constuctor:function(b,a,c){this.message=b||"Unknown Error.";this.description=a;if(c==null){return}this.url=c.url;this.method=c.method;this.status=c.conn.status;this.statusText=c.conn.statusText},toString:function(){var a=this.message;
if(this.url){a+="\nURL: "+this.url}if(this.status){a+="\nStatus: "+this.statusText+"("+this.status+")"}if(this.description){a+="\n"+this.description}return a}});dorado.util.AjaxResult=$class({$className:"dorado.util.AjaxResult",constructor:function(a,b){this.options=a;if(b!=null){this._init(b,true)}},success:true,_init:function(d,c){this._connObj=d;this.url=d.url;this.method=d.method;var b=d.conn;this.status=b.status;this.statusText=b.statusText;this.allResponseHeaders=b.getAllResponseHeaders();if(c){this.text=b.responseText;if(b.status<200||b.status>=400){var a;if(b.status==12021){a=this._parseError(b.responseText,d)}else{a=new dorado.util.AjaxException("HTTP "+b.status+" "+b.statusText,null,d)}this._setError(a)}}},_setError:function(a){this.success=false;this.error=a},_parseError:function(b){var a=dorado.JSON.parse(b,true);return new dorado.RemoteException(a.message,a.exceptionType,a.stackTrace)},getResponseHeaders:function(){var b=this._responseHeaders;if(b===undefined){b={};this._responseHeaders=b;
try{var c=this.allResponseHeaders;var f=c.split("\n");for(var a=0;a<f.length;a++){var h=f[a];var g=h.indexOf(":");if(g!=-1){b[h.substring(0,g)]=h.substring(g+2)}}}catch(d){}}return b},getXmlDocument:function(){var a=this._responseXML;if(a===undefined){a=dorado.util.AjaxEngine._parseXml(this.text);this._responseXML=a}return a},getJsonData:function(b){var a=this._jsonData;if(a===undefined){this._jsonData=a=dorado.JSON.parse(this.text,b)}return a}});window.$ajax=new dorado.util.AjaxEngine();(function(){var maxZIndex=9999;window.$DomUtils=dorado.util.Dom={getInvisibleContainer:function(){var id="_dorado_invisible_div";var div=document.getElementById(id);if(!div){div=this.xCreateElement({tagName:"DIV",id:id,style:{position:"absolute",width:100,height:100,left:-200,top:-200,overflow:"hidden"}});document.body.appendChild(div)}return div},getUndisplayContainer:function(){var id="_dorado_undisplay_div";var div=document.getElementById(id);if(!div){div=this.xCreateElement({tagName:"DIV",id:id,style:{visibility:"hidden",display:"none"}});
document.body.appendChild(div)}return div},getOwnerWindow:function(node){return dorado.Browser.msie?node.ownerDocument.parentWindow:node.ownerDocument.defaultView},isOwnerOf:function(node,owner){while(true){node=node.parentNode;if(node==null){return false}if(node==owner){return true}}},findParent:function(node,fn,includeSelf){if(includeSelf!==false){if(fn(node)){return node}}while(true){node=node.parentNode;if(!node){break}if(fn(node)){return node}}return null},xCreateElement:function(template,arg,context){function setAttrs(el,attrs,jqEl){for(var attrName in attrs){var attrValue=attrs[attrName];switch(attrName){case"style":if(attrValue.constructor==String){$fly(el).attr("style",attrValue)}else{for(var styleName in attrValue){var v=attrValue[styleName];if(styleName.match(/^width$|^height$|^top$|^left$|^right$|^bottom$/)){if(isFinite(v)){v+="px"}}el.style[styleName]=v}}break;case"outerWidth":jqEl.outerWidth(attrValue);break;case"outerHeight":jqEl.outerHeight(attrValue);break;case"tagName":case"content":continue;
case"contextKey":if(context instanceof Object&&attrValue&&typeof attrValue=="string"){context[attrValue]=el}continue;default:if(attrName.substr(0,2)=="on"){var event=attrName.substr(2);if(!(attrValue instanceof Function)){attrValue=new Function(attrValue)}jqEl.bind(event,attrValue)}else{el[attrName]=attrValue}}}return el}function setText(el,content,jqEl){var isHtml=/(<\S[^><]*>)|(&.+;)/g;if(content.match(isHtml)!=null&&el.tagName.toUpperCase()!="TEXTAREA"){el.innerHTML=content}else{el.appendChild(document.createTextNode(content))}return el}function appendChild(parentEl,el){if(parentEl.nodeName.toUpperCase()=="TABLE"&&el.nodeName.toUpperCase()=="TR"){var tbody;if(parentEl&&parentEl.tBodies[0]){tbody=parentEl.tBodies[0]}else{tbody=parentEl.appendChild(document.createElement("tbody"))}parentEl=tbody}parentEl.appendChild(el)}if(template instanceof Function){template=template(arg||window)}if(template instanceof Array){var elements=[];for(var i=0;i<template.length;i++){elements.push(this.xCreateElement(template[i],arg,context))
}return elements}var tagName=template.tagName||"DIV";tagName=tagName.toUpperCase();var content=template.content;var el;if(dorado.Core.msie&&tagName=="INPUT"&&template.type){el=document.createElement("<"+tagName+' type="'+template.type+'"/>')}else{el=document.createElement(tagName)}var jqEl=jQuery(el);el=setAttrs(el,template,jqEl);if(content!=null){if(content.constructor==String){if(content.charAt(0)=="^"){appendChild(el,document.createElement(content.substring(1)))}else{el=setText(el,content,jqEl)}}else{if(content instanceof Array){for(var i=0;i<content.length;i++){var c=content[i];if(c.constructor==String){if(c.charAt(0)=="^"){appendChild(el,document.createElement(c.substring(1)))}else{appendChild(el,document.createTextNode(c))}}else{appendChild(el,this.xCreateElement(c,arg,context))}}}else{if(content.nodeType){appendChild(el,content)}else{appendChild(el,this.xCreateElement(content,arg,context))}}}}return el},BLANK_IMG:dorado.Setting["common.contextPath"]+"dorado/resources/blank.gif",setImgSrc:function(img,src){src=$url(src)||BLANK_IMG;
if(img.src!=src){img.src=src}},setBackgroundImage:function(el,url){if(url){var reg=/url\(.*\)/i,m=url.match(reg);if(m){m=m[0];var realUrl=jQuery.trim(m.substring(4,m.length-1));realUrl=$url(realUrl);el.style.background=url.replace(reg,"url("+realUrl+")");return}url=$url(url);url="url("+url+")"}else{url="none"}if(el.style.backgroundImage!=url){el.style.backgroundImage=url}},placeCenterElement:function(element,container){var offset=$fly(container).offset();element.style.left=(offset.left+(container.offsetWidth-element.offsetWidth)/2)+"px";element.style.top=(offset.top+(container.offsetHeight-element.offsetHeight)/2)+"px"},getOrCreateChild:function(parentNode,index,tagName,fn){var child,refChild;if(index<parentNode.childNodes.length){child=refChild=parentNode.childNodes[index];if(fn&&fn(child)===false){child=null}}if(!child){child=(tagName instanceof Function)?tagName(index):((tagName.constructor==String)?document.createElement(tagName):this.xCreateElement(tagName));(refChild)?parentNode.insertBefore(child,refChild):parentNode.appendChild(child)
}return child},removeChildrenFrom:function(parentNode,from,fn){var toRemove=[];for(var i=parentNode.childNodes.length-1;i>=from;i--){var child=parentNode.childNodes[i];if(fn&&fn(child)===false){continue}toRemove.push(child)}$fly(toRemove).remove()},fixMsieYScrollBar:function(container){var content=findValidContent(container);if(!content){return}container.style.overflowX="auto";container.style.overflowY=(dorado.Browser.version<"7")?"scroll":"";var offsetWidth=content.offsetWidth;if(offsetWidth>container.clientWidth){if(offsetWidth==$fly(container).width()){$fly(content).outerWidth(container.clientWidth);if(content.offsetWidth>container.clientWidth){container.style.overflowX="scroll"}else{container.style.overflowX="hidden";if(content.offsetHeight>container.clientHeight){container.style.overflowY="scroll"}}content.style.width=""}}},fixMsieXScrollBar:function(container){var content=findValidContent(container);if(!content){return}var $container=$fly(container);$container.height(content.offsetHeight+((content.offsetWidth>container.clientWidth)?($container.height()-container.clientHeight):0))
},isDragging:function(){var currentDraggable=jQuery.ui.ddmanager.current;return(currentDraggable&&currentDraggable._mouseStarted)},getCellPosition:function(event){var element=event.srcElement||event.target,row=-1,column=-1;while(element&&element!=element.ownerDocument.body){var tagName=element.tagName.toLowerCase();if(tagName=="td"){row=element.parentNode.rowIndex;column=element.cellIndex;break}element=element.parentNode}if(element!=element.ownerDocument.body){return{row:row,column:column,element:element}}return null},dockAround:function(element,fixedElement,options){options=options||{};var align=options.align||"innerleft",vAlign=options.vAlign||"innertop",positionOffset=options.positionOffset,offsetLeft=positionOffset?positionOffset[0]:0,offsetTop=positionOffset?positionOffset[1]:0,autoAdjustPosition=options.autoAdjustPosition,handleOverflow=options.handleOverflow,docEl=jQuery(document),docWidth=docEl.width(),docHeight=docEl.height(),overflowTrigger=false,bodyOffset=$fly(element.ownerDocument.body).offset(),overflowHeight,adjustLeft,adjustTop;
docWidth+=bodyOffset.left;docHeight+=bodyOffset.top;var rect,offset;var position=jQuery(fixedElement==window?document.body:fixedElement).offset(),left=position.left,top=position.top,newAlign,vAlignPrefix;if(fixedElement){offset=jQuery(fixedElement).offset();rect=getRect(fixedElement);if(align){left=getLeft(rect,element,align);if(!(autoAdjustPosition===false)){if((left+element.offsetWidth>docWidth)||(left<0)){if(align!="center"){if(align.indexOf("left")!=-1){newAlign=align.replace("left","right")}else{if(align.indexOf("right")!=-1){newAlign=align.replace("right","left")}}adjustLeft=getLeft(rect,element,newAlign);if((adjustLeft+element.offsetWidth>docWidth)||(adjustLeft<0)){left=0}else{left=adjustLeft;align=newAlign}}else{if(align=="center"){if(left<0){overflowTrigger=true;left=0}}}}}}if(vAlign){top=getTop(rect,element,vAlign);if(!(autoAdjustPosition===false)){if((top+element.offsetHeight>docHeight)||(top<0)){if(vAlign!="center"){if(vAlign.indexOf("top")!=-1){vAlign=vAlign.replace("top","bottom");
vAlignPrefix=vAlign.replace("top","")}else{if(vAlign.indexOf("bottom")!=-1){vAlign=vAlign.replace("bottom","top");vAlignPrefix=vAlign.replace("bottom","")}}adjustTop=getTop(rect,element,vAlign);if(adjustTop+element.offsetHeight>docHeight){overflowTrigger=true;if(adjustTop<(docHeight/2)){top=adjustTop;overflowHeight=docHeight-top;vAlign=vAlignPrefix+"bottom"}else{overflowHeight=element.offsetHeight+top;vAlign=vAlignPrefix+"top"}}else{if(adjustTop<0){overflowTrigger=true;if(top>(docHeight/2)){top=0;overflowHeight=element.offsetHeight+adjustTop;vAlign=vAlignPrefix+"top"}else{overflowHeight=docHeight-top;vAlign=vAlignPrefix+"bottom"}}else{top=adjustTop}}}else{if(vAlign=="center"){if(top<0){overflowTrigger=true;top=0;overflowHeight=docHeight}}}}}}}options.align=align;options.vAlign=vAlign;if(!(handleOverflow===false)&&overflowTrigger){if(options.overflowHandler&&typeof options.overflowHandler=="function"){options.overflowHandler.call(null,overflowHeight)}}var finalLeft=left+offsetLeft,finalTop=top+offsetTop;
$fly(element).left(finalLeft).top(finalTop);return{left:finalLeft,top:finalTop,0:finalLeft,1:finalTop}},locateIn:function(element,options){options=options||{};var positionOffset=options.positionOffset,offsetLeft=positionOffset?positionOffset[0]:0,offsetTop=positionOffset?positionOffset[1]:0,handleOverflow=options.handleOverflow,parent=options.parent,docEl=jQuery(document),docWidth=docEl.width(),docHeight=docEl.height(),adjustLeft,adjustTop,overflowTrigger=false,overflowHeight,position=options.position,left=position?position.left:0,top=position?position.top:0,autoAdjustPosition=options.autoAdjustPosition;if(parent){var parentPos=$fly(parent).offset();left+=parentPos.left;top+=parentPos.top}if(!(autoAdjustPosition===false)){if(top<0){top=0}if(left<0){left=0}if(left+element.offsetWidth>docWidth){adjustLeft=left-element.offsetWidth;left=adjustLeft>0?adjustLeft:0}if(top+element.offsetHeight>=docHeight){adjustTop=top-element.offsetHeight;if(adjustTop<0){overflowTrigger=true;top=0;overflowHeight=docHeight
}else{top=adjustTop}}}if(handleOverflow!==false&&overflowTrigger){if(options.overflowHandler&&typeof options.overflowHandler=="function"){options.overflowHandler.call(null,overflowHeight)}}var finalLeft=left+offsetLeft,finalTop=top+offsetTop;$fly(element).left(finalLeft).top(finalTop);return{left:finalLeft,top:finalTop,0:finalLeft,1:finalTop}},disableUserSelection:function(element){if(dorado.Browser.msie){$fly(element).bind("selectstart",onSelectStart)}else{element.style.MozUserSelect="none";element.style.KhtmlUserSelect="none";element.style.webkitUserSelect="none";element.style.OUserSelect="none";element.unselectable="on"}},enableUserSelection:function(element){if(dorado.Browser.msie){$fly(element).unbind("selectstart",onSelectStart)}else{element.style.MozUserSelect="";element.style.KhtmlUserSelect="";element.style.webkitUserSelect="";element.style.OUserSelect="";element.unselectable=""}},bringToFront:function(dom){if(dorado.Browser.msie){maxZIndex+=2}else{maxZIndex+=1}if(dom){dom.style.zIndex=maxZIndex
}return maxZIndex}};function onSelectStart(){return false}function getRect(element){if(element){var width,height;if(element==window){var $win=$fly(window),left=$win.scrollLeft(),top=$win.scrollTop();width=$win.width();height=$win.height();return{left:left,top:top,right:left+width,bottom:top+height}}var offset=$fly(element).offset();if(element==document.body){width=$fly(window).width();height=$fly(window).height()}else{width=$fly(element).outerWidth();height=$fly(element).outerHeight()}return{left:offset.left,top:offset.top,right:offset.left+width,bottom:offset.top+height}}return null}function getLeft(rect,dom,align){switch(align.toLowerCase()){case"left":return rect.left-dom.offsetWidth;case"innerleft":return rect.left;case"center":return(rect.left+rect.right-dom.offsetWidth)/2;case"innerright":return rect.right-dom.offsetWidth;case"right":default:return rect.right}}function getTop(rect,dom,vAlign){switch(vAlign.toLowerCase()){case"top":return rect.top-dom.offsetHeight;case"innertop":return rect.top;
case"center":return(rect.top+rect.bottom-dom.offsetHeight)/2;case"innerbottom":return rect.bottom-dom.offsetHeight;case"bottom":default:return rect.bottom}}function findValidContent(container){var childNodes=container.childNodes;for(var i=0,j=childNodes.length;i<j;i++){var child=childNodes[i];with(child.style){if(display!="none"&&(position==""||position=="static")){return child}}}return null}})();dorado.util.ShadowPool=new dorado.util.ObjectPool({makeObject:function(){return $fly(document.body).prepend('<div class="d-shadow-ie"></div>')[0].firstChild}});dorado.util.Shadow=$class({$className:"dorado.util.Shadow",constructor:function(b){dorado.Object.apply(this,b);if(!this.mode){this.mode=this.defaultMode}var d=this.offset,c={h:0},a=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":c.w=0;c.l=c.t=d;c.t-=1;if(dorado.Browser.msie){c.l-=this.offset+a;c.t-=this.offset+a;c.w-=a;c.h-=a;c.t+=1}break;case"sides":c.w=(d*2);c.l=-d;c.t=d-1;if(dorado.Browser.msie){c.l-=(this.offset-a);
c.t-=this.offset+a;c.l+=1;c.w-=(this.offset-a)*2;c.w-=a+1;c.h-=1}break;case"frame":c.w=c.h=(d*2);c.l=c.t=-d;c.t+=1;c.h-=2;if(dorado.Browser.msie){c.l-=(this.offset-a);c.t-=(this.offset-a);c.l+=1;c.w-=(this.offset+a+1);c.h-=(this.offset+a);c.h+=1}break}this.adjusts=c;this.target=b.target},offset:(dorado.Browser.msie&&dorado.Browser.version>=9)?8:4,defaultMode:"drop",show:function(){var d=this.target,e=jQuery(d),b=this;if(!b.dom){b.dom=dorado.util.ShadowPool.borrowObject();if(b.dom.nextSibling!=d){e.before(b.dom)}}if(e.css("display")=="none"){b.dom.style.display="none"}else{b.dom.style.zIndex=(parseInt(d.style.zIndex)||0)-1;var c="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+(this.offset)+")";b.dom.style.filter=c;var a=e.offset();b.realign(a.left,a.top,e.outerWidth(),e.outerHeight());b.dom.style.display="block"}},realign:function(d,h,b,l){if(!this.dom){return}var c=this.adjusts,e=this.dom,a=e.style;a.left=(d+c.l)+"px";a.top=(h+c.t)+"px";
var k=(b+c.w),f=(l+c.h),g=k+"px",j=f+"px";if(a.width!=g||a.height!=j){a.width=g;a.height=j}},hide:function(){if(this.dom){this.dom.style.display="none";dorado.util.ShadowPool.returnObject(this.dom);delete this.dom}},disable:function(){this.disabled=true;if(this.dom){this.dom.style.display="none"}},enable:function(){this.disabled=false;if(this.dom){this.show()}}});jQuery.fn.shadow=function(a){var b;if(this.length==1){b=this[0];if(dorado.Browser.msie){if(b.offsetWidth){var d=jQuery.data(b,"blockShadow");if(!d){a.target=b;d=new dorado.util.Shadow(a);jQuery.data(b,"blockShadow",d);b.onresize=function(){var e=jQuery.data(b,"blockShadowDisabled");if(!e){setTimeout(function(){d.show()},0)}};b.onpropertychange=function(){var e=jQuery.data(b,"blockShadowDisabled");if(!e){var f=event.propertyName;if(f=="style.visibility"||f=="style.display"){d.dom.style.visibility=b.style.visibility;d.dom.style.display=b.style.display=="none"?"none":"block"}else{if(f=="style.left"||f=="style.top"){d.show()}}}}}d.show()
}}else{a=a||{};var c=a.mode||"drop";switch(c.toLowerCase()){case"drop":this.addClass("d-shadow-drop");break;case"sides":this.addClass("d-shadow-sides");break;case"frame":this.addClass("d-shadow-frame");break}}}return this};jQuery.fn.unshadow=function(){var a;if(this.length==1){a=this[0];if(dorado.Browser.msie){var b=jQuery.data(a,"blockShadow");if(b!=null){a.onresize=null;a.onpropertychange=null;b.hide();jQuery.data(a,"blockShadow",null)}}}return this};jQuery.fn.disableShadow=function(){var a;if(this.length==1){a=this[0];var b=jQuery.data(a,"blockShadow");if(b){b.disable()}jQuery.data(a,"blockShadowDisabled",true)}return this};jQuery.fn.enableShadow=function(){var a;if(this.length==1){a=this[0];var b=jQuery.data(a,"blockShadow");if(b){b.enable()}jQuery.data(a,"blockShadowDisabled",false)}return this};(function(c){function a(d,e){return parseInt(c.curCSS(d.jquery?d[0]:d,e,true))||0}c.fn.bringToFront=function(){return this.css("zIndex",$DomUtils.bringToFront())};c.each(["left","top","right","bottom"],function(e,d){c.fn[d]=function(f){return this.css(d,f)
}});var b=c.fn.position;c.fn.position=function(e,d){if(arguments.length){this.css("left",e).css("top",d);return this}else{return b.call(this)}};c.each(["Height","Width"],function(g,e){var d=g?"Left":"Top";var f=g?"Right":"Bottom";var h=c.fn["outer"+e];c.fn["outer"+e]=function(j){if(j!=null&&j.constructor!=Boolean){if(j.constructor==String&&j.match("%")){this[e.toLowerCase()](j)}else{var k=parseInt(j);k=k-a(this,"padding"+d)-a(this,"padding"+f)-a(this,"border"+d+"Width")-a(this,"border"+f+"Width");this[e.toLowerCase()](k)}return this}return h.call(this,j)}});c.fn.addClassOnHover=function(d,f,e){var f=f||this;this.hover(function(){if($DomUtils.isDragging()){return}if(e instanceof Function&&!e.call(this)){return}f.addClass(d)},function(){f.removeClass(d)});return this};c.fn.addClassOnFocus=function(d,f,e){var f=f||this;this.focus(function(){if(e instanceof Function&&!e.call(this)){return}f.addClass(d)});this.blur(function(){f.removeClass(d)});return this};c.fn.addClassOnClick=function(d,f,e){var f=f||this;
this.mousedown(function(){if(e instanceof Function&&!e.call(this)){return}f.addClass(d);c(document).one("mouseup",function(){f.removeClass(d)})});return this};c.fn.repeatOnClick=function(e,d){this.mousedown(function(){var f;if(e instanceof Function){e.apply(null,[]);f=setInterval(e,d||100)}c(document).one("mouseup",function(){if(f){clearInterval(f);f=null}})});return this}})(jQuery);jQuery.fn.xCreate=function(g,j,k){var c=$DomUtils.xCreateElement(g,j);if(c){var e=false,h=false,f=null;var d=this[0];if(k instanceof Object){e=k.insertBefore;f=(k.refNode)?k.refNode:d.firstChild;h=k.returnNewElements}var a=(c instanceof Array)?c:[c];for(var b=0;b<a.length;b++){if(e&&f){d.insertBefore(a[b],f)}else{d.appendChild(a[b])}}}return h?jQuery(a):this};(function(){jQuery.extend({speed:function(t,u,s){var r=t&&typeof t==="object"?t:{complete:s||!s&&u||jQuery.isFunction(t)&&t,duration:t,easing:s&&u||u&&!jQuery.isFunction(u)&&u};r.duration=jQuery.fx.off?0:typeof r.duration==="number"?r.duration:jQuery.fx.speeds[r.duration]||jQuery.fx.speeds._default;
r.old=r.complete;r.complete=function(){if(jQuery.isFunction(r.old)){r.old.call(this)}if(r.queue!==false){jQuery(this).dequeue()}};return r}});jQuery.fn.region=function(){var t=this,u=t[0];if(t.length==1){var s=t.offset(),w=u.offsetWidth,r=u.offsetHeight;return{top:s.top,right:s.left+w,left:s.left,bottom:s.top+r,height:r,width:w}}};jQuery.fn.innerRegion=function(){var s=this,w=s[0];if(s.length==1){var x=s.offset(),r=s.width(),z=s.height(),u=parseInt(s.css("border-left-width"),10)||0,y=parseInt(s.css("border-top-width"),10)||0,t=parseInt(s.css("padding-left"),10)||0,A=parseInt(s.css("padding-top"),10)||0;return{top:x.top+y+A,right:x.left+u+t+r,left:x.left+u+t,bottom:x.top+y+A+z,height:z,width:r}}};var k={normal:["position","visibility","left","right","top","bottom","width","height","zIndex"],safe:["overflow","position","width","height"],child:["position","left","right","top","bottom","width","height"]},q="dockStyleRestore",j="dockData";var g=function(u,x){var w=k[x||"normal"],s={};if(w){for(var t=0,r=w.length;
t<r;t++){var y=w[t];s[y]=u.style[y]}}jQuery.data(u,q,s)};var o={top:1,bottom:-1,left:1,right:-1},n={top:{horizontal:"left",vertical:"top",style:{left:0,top:0,right:"auto",bottom:"auto"}},bottom:{horizontal:"left",vertical:"bottom",style:{left:0,top:"auto",right:"auto",bottom:0}},left:{horizontal:"left",vertical:"top",style:{left:0,top:0,right:"auto",bottom:"auto"}},right:{horizontal:"right",vertical:"top",style:{left:"auto",top:0,right:0,bottom:"auto"}}};jQuery.fn.dockable=function(O,C,A){var H=this;if(H.length==1){O=O||"bottom";var t=H[0],N=(H.css("position")=="absolute"),F=N?parseInt(H.css("left"),10)||0:0,P=N?parseInt(H.css("top"),10)||0:0;g(t,C?"safe":"normal");H.css({visibility:"hidden",display:"block"});var y=n[O],E=y.horizontal,M=y.vertical,s={width:H.outerWidth(),height:H.outerHeight()},D,K;if(C){var r=o[E],u=o[M],J=H.innerRegion(),B=t.firstChild,w,z={},x;while(B){x=jQuery(B);g(B,"child");w=x.region();z[E]=r*(w[E]-J[E]);z[M]=u*(w[M]-J[M]);x.css(z).outerWidth(B.offsetWidth).outerHeight(B.offsetHeight);
B=B.nextSibling}if(N){H.outerWidth(s.width).outerHeight(s.height).css({overflow:"hidden",visibility:""}).find("> *").css("position","absolute")}else{H.css({overflow:"hidden",position:"relative",visibility:""}).find("> *").css("position","absolute")}}else{D=document.createElement("div");var G=jQuery(D);if(N){D.style.position="absolute";D.style.left=H.css("left");D.style.top=H.css("top");G.bringToFront()}else{D.style.position="relative";t.style.position="absolute"}D.style.overflow="hidden";G.insertBefore(t);D.appendChild(t);var L=y.style;L.visibility="";H.css(L).outerWidth(s.width).outerHeight(s.height)}if(A!==false){K=document.createElement("div");var I=jQuery(K);I.css({position:"absolute",left:0,top:0,backgroundColor:"white",opacity:0}).bringToFront().outerWidth(s.width).outerHeight(s.height);if(C){t.appendChild(K)}else{D.appendChild(K)}}jQuery.data(t,j,{rect:s,mask:K,wrap:D,leftStart:F,topStart:P})}return this};jQuery.fn.undockable=function(w){var s=this;if(s.length==1){var t=s[0],r=jQuery.data(t,j);
if(r==null){return}if(w){s.css(jQuery.data(t,q)).find("> *").each(function(x,z){var y=jQuery.data(z,q);if(y!=null){jQuery(z).css(y)}jQuery.data(z,q,null)});jQuery(r.mask).remove()}else{var u=r.wrap;if(u){s.css(jQuery.data(t,q)).insertAfter(u);jQuery(u).remove()}}jQuery.data(t,j,null);jQuery.data(t,q,null)}return this};var l={l2r:"right",r2l:"left",t2b:"bottom",b2t:"top"},e={l2r:"left",r2l:"right",t2b:"top",b2t:"bottom"},d={l2r:"height",r2l:"height",t2b:"width",b2t:"width"};var h=function(x,z,u,s){var r=jQuery.data(u,j),y=r.rect,t=r.leftStart,w=r.topStart;if(s){if(x=="out"){switch(z){case"t2b":return{top:[w,w+y.height],height:[y.height,0]};case"r2l":return{width:[y.width,0]};case"b2t":return{height:[y.height,0]};case"l2r":return{left:[t,t+y.width],width:[y.width,0]}}}else{switch(z){case"t2b":return{height:[0,y.height]};case"l2r":return{width:[0,y.width]};case"b2t":return{top:[w+y.height,w],height:[0,y.height]};case"r2l":return{left:[t+y.width,t],width:[0,y.width]}}}}else{var A=d[z];jQuery(r.wrap).css(A,r.rect[A]);
if(x=="in"){switch(z){case"t2b":return{height:[0,y.height]};case"l2r":return{width:[0,y.width]};case"b2t":return{top:[w+y.height,w],height:[0,y.height]};case"r2l":return{left:[t+y.width,t],width:[0,y.width]}}}else{if(x=="out"){switch(z){case"t2b":return{top:[w,w+y.height],height:[y.height,0]};case"r2l":return{width:[y.width,0]};case"b2t":return{height:[y.height,0]};case"l2r":return{left:[t,t+y.width],width:[y.width,0]}}}}}};var f=function(y,u,E,s){E=typeof E=="string"?{direction:E}:E||{};var z=E.direction||"t2b",B=E.complete,t=E.step,r=E.start,D,x=u,A,w,C=false;w=function(G){$fly(u).disableShadow().dockable(y=="in"?l[G]:e[G],s);D=h(y,G,u,s);A=jQuery(s?x:jQuery.data(u,j).wrap);for(var H in D){var F=D[H];A.css(H,F[0])}if(r){r.call(u)}C=true};E.step=function(G,H){if(!C){w(z)}var K=new Date().getTime(),I=K-H.startTime,N=H.options.easing||(jQuery.easing.swing?"swing":"linear"),L=jQuery.easing[N](H.state,I,0,1,H.options.duration);var M={};for(var F in D){var J=D[F];M[F]=J[0]+(J[1]-J[0])*L}A.css(M);
if(t){t.call(H.elem,M,H)}};E.complete=function(){$fly(u).undockable(s);$fly(u).enableShadow().css("display",y=="out"?"none":"");if(typeof B=="function"){B.apply(null,[])}};E.duration=E.duration?E.duration:300;$fly(u).animate({dummy:1},E)};jQuery.fn.slideIn=function(s){var r=this;if(r.length==1){f("in",r[0],s,false)}return this};jQuery.fn.slideOut=function(s){var r=this;if(r.length==1){f("out",r[0],s,false)}return this};jQuery.fn.safeSlideIn=function(s){var r=this;if(r.length==1){f("in",r[0],s,true)}return this};jQuery.fn.safeSlideOut=function(s){var r=this;if(r.length==1){f("out",r[0],s,true)}return this};var c=new dorado.util.ObjectPool({makeObject:function(){var r=document.createElement("div");r.className="d-animate-zoom-proxy";jQuery(document.body).prepend(r);return r}});var p=function(E,y,H){var B=H.position,x=H.animateTarget,t,D,C,r,w,u=(E!="out"),F,A;if(typeof x=="string"){x=jQuery(x)[0]}else{if(x instanceof dorado.widget.Control){x=x._dom}}var z=jQuery(y),s=jQuery(x);if(E=="in"){if(x){w=s.offset();
D=w.top;t=w.left;r=B.top;C=B.left}else{w=z.offset();F=z.outerWidth();A=z.outerHeight();D=w.top+A/2;t=w.left+F/2;r=B.top;C=B.left}}else{if(x){w=s.offset();if(!B){B=z.offset()}D=B.top;t=B.left;r=w.top;C=w.left}else{w=z.offset();F=z.outerWidth();A=z.outerHeight();D=w.top;t=w.left;r=w.top+A/2;C=w.left+F/2}}var G=c.borrowObject();jQuery(G).css({display:"",top:D,left:t,width:u?0:z.width(),height:u?0:z.height()}).bringToFront().animate({top:r,left:C,width:u?z.width():0,height:u?z.height():0},{duration:H.animateDuration||300,easing:H.animateEasing,complete:function(){G.style.display="none";c.returnObject(G);H.complete.apply(null,[])}})};jQuery.fn.zoomIn=function(s){var r=this;if(r.length==1){p("in",r[0],s)}return this};jQuery.fn.zoomOut=function(s){var r=this;if(r.length==1){p("out",r[0],s)}return this};var b=function(r){return(r&&("scrollTo" in r)&&r.document)?r:r&&r.nodeType===9?r.defaultView||r.parentWindow:r===undefined?window:false},a="scrollTo",m="document";jQuery.fn.scrollIntoView=function(E,I,P){var J=this,O;
if(J.length==1){O=J[0]}E=typeof E=="string"?jQuery(E)[0]:E;P=P===undefined?true:!!P;I=I===undefined?true:!!I;if(!E||E===window){return O.scrollIntoView(I)}if(E&&E.nodeType==9){E=b(E)}var C=E&&(a in E)&&E[m],A=J.offset(),x=C?{left:jQuery(E).scrollLeft(),top:jQuery(E).scrollTop()}:jQuery(E).offset(),G={left:A.left-x.left,top:A.top-x.top},D=C?jQuery(window).height():E.clientHeight,s=C?jQuery(window).width():E.clientWidth,z=jQuery(E).scrollLeft(),w=jQuery(E).scrollTop(),y=z+s,K=w+D,u=O.offsetHeight,N=O.offsetWidth,M=G.left+z-(parseInt(jQuery(E).css("borderLeftWidth"))||0),F=G.top+w-(parseInt(jQuery(E).css("borderTopWidth"))||0),H=M+N,Q=F+u,B,L;if(u>D||F<w||I){B=F}else{if(Q>K){B=Q-D}}if(P){if(N>s||M<z||I){L=M}else{if(H>y){L=H-s}}}if(C){if(B!==undefined||L!==undefined){E[a](L,B)}}else{if(B!==undefined){E.scrollTop=B}if(L!==undefined){E.scrollLeft=L}}}})();(function(c){var b=c.fn.draggable;c.fn.draggable=function(f){var d,e;if(f){d=f.draggingInfo;e=f.doradoDraggable}if(d||e){var g=f;f=dorado.Object.apply({},g);
f.createDraggingInfo=function(j){var h=g.draggingInfo;if(h instanceof Function){h=h.call(this,this,f)}if(!h){if(e){h=e.createDraggingInfo(this,f)}if(!h){h=new dorado.DraggingInfo()}}if(h){h.set("element",this)}return h};if(typeof g.revert!="string"){f.revert=function(j){var h=g.revert;if(h==null){h=!j}else{if(h instanceof Function){h=h.call(this,j)}}return h}}if(typeof g.helper!="string"){f.helper=function(j){var k;if(g.helper instanceof Function){k=g.helper.apply(this,arguments)}if(e){k=e.onGetDraggingIndicator(k,j,this)}var h=f.createDraggingInfo.call(this,j);$fly(this).data("draggable").draggingInfo=h;if(k instanceof dorado.DraggingIndicator){h.set("indicator",k);k=k.getDom()}return k}}f.start=function(l,m){var j=true;if(g.start){j=g.start.apply(this,arguments)}if(j!==false){var h=dorado.DraggingInfo.getFromElement(this);if(h){h._targetDroppables=[];if(e){j=e.onDragStart(h,l);if(j!==false){e.initDraggingInfo(h,l);var k=h.get("indicator");if(k){e.initDraggingIndicator(k,h,l)}}}}}return j
};f.stop=function(k,l){var j=true;if(g.stop){j=g.stop.apply(this,arguments)}if(j!==false){var h=dorado.DraggingInfo.getFromElement(this);if(h){if(e){j=e.onDragStop(h,k)}if(j!==false){setTimeout(function(){var m=h._targetDroppables.peek();if(m){m.onDraggingSourceOut(h,k)}},20)}}}return j};f.drag=function(k,l){if(g.drag){g.drag.apply(this,arguments)}var h=dorado.DraggingInfo.getFromElement(this);if(h){if(e){e.onDragMove(h,k)}var j=h._targetDroppables.peek();if(j){j.onDraggingSourceMove(h,k)}}}}return b.call(this,f)};var a=c.fn.droppable;c.fn.droppable=function(d){var f=d?d.doradoDroppable:null;if(f){var e=d;d=dorado.Object.apply({},e);d.over=function(h,j){if(e.over){e.over.apply(this,arguments)}if(f){var g=dorado.DraggingInfo.getFromJQueryUI(j);if(g){if(g._targetDroppables.peek()!=f){g._targetDroppables.push(f)}f.onDraggingSourceOver(g,h)}}};d.out=function(h,j){if(e.out){e.out.apply(this,arguments)}if(f){var g=dorado.DraggingInfo.getFromJQueryUI(j);if(g){f.onDraggingSourceOut(g,h);if(g._targetDroppables.peek()==f){g._targetDroppables.pop()
}}}};d.drop=function(j,k){var h=jQuery(k.draggable).data("draggable");if(!jQuery.ui.ddmanager.accept){if(h&&h.options.revert=="invalid"){h.options.revert=true;h.options.forceRevert=true}return false}else{if(h&&h.options.forceRevert){h.options.revert="invalid";h.options.forceRevert=false}var l=false;if(e.drop){l=e.drop.apply(this,arguments)}if(!l&&f){var g=dorado.DraggingInfo.getFromJQueryUI(k);if(g){setTimeout(function(){f.onDraggingSourceDrop(g,j)},20)}}return true}};d.accept=function(g){var h=e.accept;if(h){if(h instanceof Function){h=h.apply(this,arguments)}else{h=g.is(h)}}return !!h}}return a.call(this,d)};if(dorado.Browser.chrome||dorado.Browser.safari){jQuery.ui.draggable.prototype.options.userSelectFix=true;c.ui.plugin.add("draggable","userSelectFix",{start:function(d,e){$DomUtils.disableUserSelection(document.body)},stop:function(d,e){$DomUtils.enableUserSelection(document.body)}})}})(jQuery);dorado.ModalManager={_controlStack:[],getMask:function(){var b=dorado.ModalManager,a=b._dom;
if(!a){a=b._dom=document.createElement("div");$fly(a).addClass("d-modal-mask");$fly(document.body).append(a)}b.resizeMask();return a},resizeMask:function(){var c=dorado.ModalManager,b=c._dom;if(b){var d=b.ownerDocument,e=$fly(d).height(),a;if(dorado.Browser.msie){if(dorado.Browser.version==6){a=$fly(d).width()-parseInt($fly(d.body).css("margin-left"),10)-parseInt($fly(d.body).css("margin-right"),10);$fly(b).width(a-2).height(e-4)}else{if(dorado.Browser.version==7){$fly(b).height(e)}else{if(dorado.Browser.version==8){$fly(b).height(e-4)}}}}else{$fly(b).height(e-4)}}},show:function(e,b){var d=dorado.ModalManager,a=d._controlStack,c=d.getMask();if(e){b=b||"d-modal-mask";$fly(c).css({display:""}).attr("className",b).bringToFront();a.push({dom:e,maskClass:b,zIndex:c.style.zIndex});$fly(e).bringToFront()}},hide:function(g){var e=dorado.ModalManager,a=e._controlStack,d=e.getMask();if(g){if(a.length>0){var f=a[a.length-1];if(f&&f.dom==g){a.pop()}else{for(var c=0,b=a.length;c<b;c++){if(g==(a[c]||{}).dom){a.removeAt(c);
break}}}if(a.length==0){$fly(d).css("display","none")}else{f=a[a.length-1];$fly(d).css({zIndex:f.zIndex}).attr("className",f.className)}}}}};$fly(window).bind("resize",function(){if(dorado.ModalManager.onResizeTimerId){clearTimeout(dorado.ModalManager.onResizeTimerId);delete dorado.ModalManager.onResizeTimerId}dorado.ModalManager.onResizeTimerId=setTimeout(function(){delete dorado.ModalManager.onResizeTimerId},200)});dorado.util.TaskIndicator={idseed:0,_taskGroups:{},registerTaskGroup:function(d,c){var b=this,a=b._taskGroups;if(a[d]){}else{c=c||{};a[d]=c}},showTaskIndicator:function(f,g){var b=this,a=b._taskGroups,c;g=g||"daemon";c=a[g];if(c){var e=c.groupPanel;if(!e){e=c.groupPanel=new dorado.util.TaskGroupPanel(c)}var d=g+"@"+ ++b.idseed;e.show();e.addTask(f,d);return d}else{return null}},hideTaskIndicator:function(d){var b=this,a=b._taskGroups,f,c;f=d.substring(0,d.indexOf("@"));c=a[f];if(c){var e=c.groupPanel;if(e){e.removeTask(d)}}else{}}};dorado.util.TaskIndicator.registerTaskGroup("main",{showOptions:{align:"center",vAlign:"center"},modal:true,className:"main-task-indicator"});
dorado.util.TaskIndicator.registerTaskGroup("daemon",{showOptions:{align:"innerright",vAlign:"innertop",positionOffset:[-15,15]},className:"daemon-task-indicator"});dorado.util.TaskGroupPanel=$extend(dorado.RenderableElement,{$className:"dorado.util.TaskGroupPanel",tasks:null,taskGroupConfig:null,_intervalId:null,ATTRIBUTES:{className:{defaultValue:"d-task-group-panel"}},constructor:function(b){$invokeSuper.call(this,[{}]);var a=this;if(!b){throw new Error("taskGrooupRequired")}a.taskGroupConfig=b;a.tasks=new dorado.util.KeyedArray(function(c){return c.taskId})},createDom:function(){var a=this,d,c={},b=a.taskGroupConfig;d=$DomUtils.xCreateElement({tagName:"div",className:a._className,content:[{tagName:"div",className:"panel-header-left",contextKey:"header",content:{tagName:"div",className:"panel-header-right"}},{tagName:"div",className:"panel-body-left",contextKey:"body",content:{tagName:"div",className:"panel-body-right",content:[{tagName:"div",className:"panel-body",contextKey:"body",content:{tagName:"div",className:"content-panel",contextKey:"contentPanel",content:[{tagName:"div",className:"count-info",contextKey:"countInfo"},{tagName:"ul",className:"task-list",contextKey:"taskList"}]}}]}},{tagName:"div",className:"panel-footer-left",contextKey:"footer",content:{tagName:"div",className:"panel-footer-right"}}]},null,c);
a._doms=c;$fly(d).addClass(b.className).shadow({mode:"sides"});b.caption=b.caption?b.caption:$resource("dorado.core.DefaultTaskCountInfo");b.executeTimeCaption=b.executeTimeCaption?b.executeTimeCaption:$resource("dorado.core.DefaultTaskExecuteTime");return d},addTask:function(f,e){var c=this,d=c.taskGroupConfig,b=c._doms.taskList,a=$DomUtils.xCreateElement({tagName:"li",className:"task-item",content:[{tagName:"span",className:"interval-span",content:d.executeTimeCaption.replace("${taskExecuteTime}","0")},{tagName:"span",className:"caption-span",content:f}]});b.appendChild(a);if(c.tasks.size==0){c._intervalId=setInterval(function(){c.refreshInterval()},500)}c.tasks.append({taskId:e,dom:a,startTime:new Date().getTime()});$fly(c._doms.countInfo).text(d.caption.replace("${taskNum}",c.tasks.size))},removeTask:function(c){var a=this,d=a.tasks.get(c),b=a.taskGroupConfig;if(d){setTimeout(function(){$fly(d.dom).remove();a.tasks.remove(d);if(a.tasks.size==0){clearInterval(a._intervalId);a._intervalId=null;
a.hide()}$fly(a._doms.countInfo).text(b.caption.replace("${taskNum}",a.tasks.size))},500)}},refreshInterval:function(){var a=this,b=new Date().getTime();a.tasks.each(function(d){var f=d.dom,e=d.startTime;if(f&&e){var c=parseInt((b-e)/1000,10);$fly(f).find(".interval-span").text(a.taskGroupConfig.executeTimeCaption.replace("${taskExecuteTime}",c))}})},show:function(c){var a=this,b=a.taskGroupConfig;c=c||b.showOptions;if(a._hideTimer){clearTimeout(a._hideTimer);a._hideTimer=null;return}if(!a._rendered){a.render(document.body)}else{$fly(a._dom).css("display","")}if(b.modal){dorado.ModalManager.show(a._dom)}$fly(a._dom).bringToFront();$DomUtils.dockAround(a._dom,document.body,c)},hide:function(){var a=this;if(a._rendered){var b=a.taskGroupConfig;$fly(a._dom).css("display","none");if(b.modal){dorado.ModalManager.hide(a._dom)}}}});dorado.DraggingIndicator=$extend(dorado.RenderableElement,{$className:"dorado.DraggingIndicator",ATTRIBUTES:{className:{defaultValue:"d-dragging-indicator"},accept:{skipRefresh:true,setter:function(b,a){if(this._accept!=a){this._accept=a;
this.refresh()}}},icon:{},iconClass:{},contentOffsetLeft:{defaultValue:20},contentOffsetTop:{defaultValue:20},content:{writeOnly:true,setter:function(b,a){if(a instanceof jQuery){a=a[0]}this._content=a}}},constructor:function(a){$invokeSuper.call(this,arguments);if(a){this.set(a)}},createDom:function(){var a=$DomUtils.xCreateElement({tagName:"div",content:[{tagName:"div",className:"content-container"},{tagName:"div"}]});this._contentContainer=a.firstChild;this._iconDom=a.lastChild;return a},refreshDom:function(c){$invokeSuper.call(this,arguments);var f=this._contentContainer,a=$fly(this._contentContainer),e=this._content;a.toggleClass("default-content",(e==null)).left(this._contentOffsetLeft||0).top(this._contentOffsetTop||0);if(e){if(e.parentNode!=f){a.empty().append(e)}}else{a.empty()}var k=f.offsetWidth+(this._contentOffsetLeft||0);var d=f.offsetHeight+(this._contentOffsetTop||0);$fly(c).width(k).height(d);var b=this._iconDom;$fly(b).attr("class","icon");var j=this._icon,g=this._iconClass;
if(!j&&!g){g=this._accept?"accept-icon":"denied-icon"}if(j){$DomUtils.setBackgroundImage(b,j)}else{if(g){$fly(b).addClass(g)}}}});dorado.DraggingIndicator.create=function(){return new dorado.DraggingIndicator()};(function(){dorado.DraggingInfo=$extend(dorado.AttributeSupport,{$className:"dorado.DraggingInfo",ATTRIBUTES:{object:{setter:function(b,a){this._object=a;this._insertMode=null;this._refObject=null}},element:{},tags:{},sourceControl:{},targetObject:{},targetControl:{},insertMode:{},refObject:{},accept:{setter:function(b,a){if(this._indicator){this._indicator.set("accept",a)}jQuery.ui.ddmanager.accept=a}},indicator:{},options:{}},constructor:function(a){if(a){this.set(a)}if(!this._tags){this._tags=[]}},isDropAcceptable:function(a){if(a&&a.length&&this._tags.length){for(var b=0;b<a.length;b++){if(this._tags.indexOf(a[b])>=0){return true}}}return false}});dorado.DraggingInfo.getFromJQueryUI=function(a){return $fly(a.draggable[0]).data("draggable").draggingInfo};dorado.DraggingInfo.getFromElement=function(a){a=(a instanceof jQuery)?a:$fly(a);
return a.data("draggable").draggingInfo};dorado.Draggable=$class({$className:"dorado.Draggable",defaultDraggableOptions:{distance:5,revert:"invalid",cursorAt:{left:8,top:8}},ATTRIBUTES:{draggable:{},dragTags:{skipRefresh:true,setter:function(b,a){if(typeof a=="string"){a=a.split(",")}this._dragTags=a||[]}}},EVENTS:{onGetDraggingIndicator:{},onDragStart:{},onDragStop:{},onDragMove:{}},getDraggableOptions:function(b){var a=dorado.Object.apply({doradoDraggable:this},this.defaultDraggableOptions);return a},applyDraggable:function(b,a){if(b._currentDraggable!==this._draggable){if(this._draggable){a=a||this.getDraggableOptions(b);$fly(b).draggable(a)}else{$fly(b).draggable("destroy")}b._currentDraggable=this._draggable}},createDraggingInfo:function(c,a){var b=new dorado.DraggingInfo({sourceControl:this,options:a,tags:this._dragTags});return b},initDraggingInfo:function(a,b){},initDraggingIndicator:function(c,a,b){},onGetDraggingIndicator:function(b,a,c){if(!b){b=dorado.DraggingIndicator.create()
}var e={indicator:b,event:a,draggableElement:c};this.fireEvent("onGetDraggingIndicator",this,e);b=e.indicator;if(b instanceof dorado.DraggingIndicator){if(!b.get("rendered")){b.render()}var d=b.getDom();$fly(d).bringToFront()}return b},onDragStart:function(a,b){var c={draggingInfo:a,event:b,processDefault:true};this.fireEvent("onDragStart",this,c);return c.processDefault},onDragStop:function(a,b){var c={draggingInfo:a,event:b,processDefault:true};this.fireEvent("onDragStop",this,c);return c.processDefault},onDragMove:function(a,b){var c={draggingInfo:a,event:b};this.fireEvent("onDragMove",this,c)}});dorado.Droppable=$class({$className:"dorado.Droppable",defaultDroppableOptions:{accept:"*",tolerance:"pointer"},ATTRIBUTES:{droppable:{},droppableTags:{skipRefresh:true,setter:function(b,a){if(typeof a=="string"){a=a.split(",")}this._droppableTags=a||[]}}},EVENTS:{onDraggingSourceOver:{},onDraggingSourceOut:{},onDraggingSourceMove:{},onDraggingSourceDrop:{}},getDroppableOptions:function(b){var a=dorado.Object.apply({doradoDroppable:this},this.defaultDroppableOptions);
return a},applyDroppable:function(b,a){if(b._currentDroppable!==this._droppable){if(this._droppable){a=a||this.getDroppableOptions(b);$fly(b).droppable(a)}else{$fly(b).droppable("destroy")}b._currentDroppable=this._droppable}},onDraggingSourceOver:function(a,b){var c=a.isDropAcceptable(this._droppableTags);var d={draggingInfo:a,event:b,accept:c};this.fireEvent("onDraggingSourceOver",this,d);a.set("accept",d.accept);return d.accept},onDraggingSourceOut:function(a,b){var c={draggingInfo:a,event:b};this.fireEvent("onDraggingSourceOut",this,c);a.set({targetObject:null,insertMode:null,refObject:null,accept:false})},onDraggingSourceMove:function(a,b){var c={draggingInfo:a,event:b};this.fireEvent("onDraggingSourceMove",this,c)},onDraggingSourceDrop:function(a,b){var c={draggingInfo:a,event:b};this.fireEvent("onDraggingSourceDrop",this,c)},getMousePosition:function(a){var b=$fly(this.getDom()).offset();return{x:a.pageX-b.left,y:a.pageY-b.top}}})})();